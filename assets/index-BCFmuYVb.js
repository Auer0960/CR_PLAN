(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();function bd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qf={exports:{}},Kr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function b_(){if(Zg)return Kr;Zg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(l,s,a){var c=null;if(a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),"key"in s){a={};for(var d in s)d!=="key"&&(a[d]=s[d])}else a=s;return s=a.ref,{$$typeof:t,type:l,key:c,ref:s!==void 0?s:null,props:a}}return Kr.Fragment=e,Kr.jsx=i,Kr.jsxs=i,Kr}var Wg;function M_(){return Wg||(Wg=1,qf.exports=b_()),qf.exports}var S=M_(),Pf={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function R_(){if(jg)return qe;jg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),x=Symbol.iterator;function _(R){return R===null||typeof R!="object"?null:(R=x&&R[x]||R["@@iterator"],typeof R=="function"?R:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,w={};function E(R,B,ee){this.props=R,this.context=B,this.refs=w,this.updater=ee||N}E.prototype.isReactComponent={},E.prototype.setState=function(R,B){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,B,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function M(){}M.prototype=E.prototype;function H(R,B,ee){this.props=R,this.context=B,this.refs=w,this.updater=ee||N}var I=H.prototype=new M;I.constructor=H,A(I,E.prototype),I.isPureReactComponent=!0;var D=Array.isArray;function U(){}var k={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function P(R,B,ee){var ae=ee.ref;return{$$typeof:t,type:R,key:B,ref:ae!==void 0?ae:null,props:ee}}function Y(R,B){return P(R.type,B,R.props)}function J(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function j(R){var B={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ee){return B[ee]})}var de=/\/+/g;function q(R,B){return typeof R=="object"&&R!==null&&R.key!=null?j(""+R.key):B.toString(36)}function ie(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(U,U):(R.status="pending",R.then(function(B){R.status==="pending"&&(R.status="fulfilled",R.value=B)},function(B){R.status==="pending"&&(R.status="rejected",R.reason=B)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function L(R,B,ee,ae,te){var me=typeof R;(me==="undefined"||me==="boolean")&&(R=null);var xe=!1;if(R===null)xe=!0;else switch(me){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(R.$$typeof){case t:case e:xe=!0;break;case y:return xe=R._init,L(xe(R._payload),B,ee,ae,te)}}if(xe)return te=te(R),xe=ae===""?"."+q(R,0):ae,D(te)?(ee="",xe!=null&&(ee=xe.replace(de,"$&/")+"/"),L(te,B,ee,"",function(Ve){return Ve})):te!=null&&(J(te)&&(te=Y(te,ee+(te.key==null||R&&R.key===te.key?"":(""+te.key).replace(de,"$&/")+"/")+xe)),B.push(te)),1;xe=0;var re=ae===""?".":ae+":";if(D(R))for(var ye=0;ye<R.length;ye++)ae=R[ye],me=re+q(ae,ye),xe+=L(ae,B,ee,me,te);else if(ye=_(R),typeof ye=="function")for(R=ye.call(R),ye=0;!(ae=R.next()).done;)ae=ae.value,me=re+q(ae,ye++),xe+=L(ae,B,ee,me,te);else if(me==="object"){if(typeof R.then=="function")return L(ie(R),B,ee,ae,te);throw B=String(R),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return xe}function O(R,B,ee){if(R==null)return R;var ae=[],te=0;return L(R,ae,"","",function(me){return B.call(ee,me,te++)}),ae}function oe(R){if(R._status===-1){var B=R._result;B=B(),B.then(function(ee){(R._status===0||R._status===-1)&&(R._status=1,R._result=ee)},function(ee){(R._status===0||R._status===-1)&&(R._status=2,R._result=ee)}),R._status===-1&&(R._status=0,R._result=B)}if(R._status===1)return R._result.default;throw R._result}var ce=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},he={map:O,forEach:function(R,B,ee){O(R,function(){B.apply(this,arguments)},ee)},count:function(R){var B=0;return O(R,function(){B++}),B},toArray:function(R){return O(R,function(B){return B})||[]},only:function(R){if(!J(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return qe.Activity=T,qe.Children=he,qe.Component=E,qe.Fragment=i,qe.Profiler=s,qe.PureComponent=H,qe.StrictMode=l,qe.Suspense=p,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,qe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return k.H.useMemoCache(R)}},qe.cache=function(R){return function(){return R.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(R,B,ee){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ae=A({},R.props),te=R.key;if(B!=null)for(me in B.key!==void 0&&(te=""+B.key),B)!F.call(B,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&B.ref===void 0||(ae[me]=B[me]);var me=arguments.length-2;if(me===1)ae.children=ee;else if(1<me){for(var xe=Array(me),re=0;re<me;re++)xe[re]=arguments[re+2];ae.children=xe}return P(R.type,te,ae)},qe.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},qe.createElement=function(R,B,ee){var ae,te={},me=null;if(B!=null)for(ae in B.key!==void 0&&(me=""+B.key),B)F.call(B,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(te[ae]=B[ae]);var xe=arguments.length-2;if(xe===1)te.children=ee;else if(1<xe){for(var re=Array(xe),ye=0;ye<xe;ye++)re[ye]=arguments[ye+2];te.children=re}if(R&&R.defaultProps)for(ae in xe=R.defaultProps,xe)te[ae]===void 0&&(te[ae]=xe[ae]);return P(R,me,te)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(R){return{$$typeof:d,render:R}},qe.isValidElement=J,qe.lazy=function(R){return{$$typeof:y,_payload:{_status:-1,_result:R},_init:oe}},qe.memo=function(R,B){return{$$typeof:h,type:R,compare:B===void 0?null:B}},qe.startTransition=function(R){var B=k.T,ee={};k.T=ee;try{var ae=R(),te=k.S;te!==null&&te(ee,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(U,ce)}catch(me){ce(me)}finally{B!==null&&ee.types!==null&&(B.types=ee.types),k.T=B}},qe.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},qe.use=function(R){return k.H.use(R)},qe.useActionState=function(R,B,ee){return k.H.useActionState(R,B,ee)},qe.useCallback=function(R,B){return k.H.useCallback(R,B)},qe.useContext=function(R){return k.H.useContext(R)},qe.useDebugValue=function(){},qe.useDeferredValue=function(R,B){return k.H.useDeferredValue(R,B)},qe.useEffect=function(R,B){return k.H.useEffect(R,B)},qe.useEffectEvent=function(R){return k.H.useEffectEvent(R)},qe.useId=function(){return k.H.useId()},qe.useImperativeHandle=function(R,B,ee){return k.H.useImperativeHandle(R,B,ee)},qe.useInsertionEffect=function(R,B){return k.H.useInsertionEffect(R,B)},qe.useLayoutEffect=function(R,B){return k.H.useLayoutEffect(R,B)},qe.useMemo=function(R,B){return k.H.useMemo(R,B)},qe.useOptimistic=function(R,B){return k.H.useOptimistic(R,B)},qe.useReducer=function(R,B,ee){return k.H.useReducer(R,B,ee)},qe.useRef=function(R){return k.H.useRef(R)},qe.useState=function(R){return k.H.useState(R)},qe.useSyncExternalStore=function(R,B,ee){return k.H.useSyncExternalStore(R,B,ee)},qe.useTransition=function(){return k.H.useTransition()},qe.version="19.2.0",qe}var e0;function Md(){return e0||(e0=1,Pf.exports=R_()),Pf.exports}var Q=Md();const Te=bd(Q);var Bf={exports:{}},Xr={},Vf={exports:{}},Of={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function I_(){return t0||(t0=1,(function(t){function e(L,O){var oe=L.length;L.push(O);e:for(;0<oe;){var ce=oe-1>>>1,he=L[ce];if(0<s(he,O))L[ce]=O,L[oe]=he,oe=ce;else break e}}function i(L){return L.length===0?null:L[0]}function l(L){if(L.length===0)return null;var O=L[0],oe=L.pop();if(oe!==O){L[0]=oe;e:for(var ce=0,he=L.length,R=he>>>1;ce<R;){var B=2*(ce+1)-1,ee=L[B],ae=B+1,te=L[ae];if(0>s(ee,oe))ae<he&&0>s(te,ee)?(L[ce]=te,L[ae]=oe,ce=ae):(L[ce]=ee,L[B]=oe,ce=B);else if(ae<he&&0>s(te,oe))L[ce]=te,L[ae]=oe,ce=ae;else break e}}return O}function s(L,O){var oe=L.sortIndex-O.sortIndex;return oe!==0?oe:L.id-O.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var p=[],h=[],y=1,T=null,x=3,_=!1,N=!1,A=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function I(L){for(var O=i(h);O!==null;){if(O.callback===null)l(h);else if(O.startTime<=L)l(h),O.sortIndex=O.expirationTime,e(p,O);else break;O=i(h)}}function D(L){if(A=!1,I(L),!N)if(i(p)!==null)N=!0,U||(U=!0,j());else{var O=i(h);O!==null&&ie(D,O.startTime-L)}}var U=!1,k=-1,F=5,P=-1;function Y(){return w?!0:!(t.unstable_now()-P<F)}function J(){if(w=!1,U){var L=t.unstable_now();P=L;var O=!0;try{e:{N=!1,A&&(A=!1,M(k),k=-1),_=!0;var oe=x;try{t:{for(I(L),T=i(p);T!==null&&!(T.expirationTime>L&&Y());){var ce=T.callback;if(typeof ce=="function"){T.callback=null,x=T.priorityLevel;var he=ce(T.expirationTime<=L);if(L=t.unstable_now(),typeof he=="function"){T.callback=he,I(L),O=!0;break t}T===i(p)&&l(p),I(L)}else l(p);T=i(p)}if(T!==null)O=!0;else{var R=i(h);R!==null&&ie(D,R.startTime-L),O=!1}}break e}finally{T=null,x=oe,_=!1}O=void 0}}finally{O?j():U=!1}}}var j;if(typeof H=="function")j=function(){H(J)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,q=de.port2;de.port1.onmessage=J,j=function(){q.postMessage(null)}}else j=function(){E(J,0)};function ie(L,O){k=E(function(){L(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(L){switch(x){case 1:case 2:case 3:var O=3;break;default:O=x}var oe=x;x=O;try{return L()}finally{x=oe}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(L,O){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var oe=x;x=L;try{return O()}finally{x=oe}},t.unstable_scheduleCallback=function(L,O,oe){var ce=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ce+oe:ce):oe=ce,L){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=oe+he,L={id:y++,callback:O,priorityLevel:L,startTime:oe,expirationTime:he,sortIndex:-1},oe>ce?(L.sortIndex=oe,e(h,L),i(p)===null&&L===i(h)&&(A?(M(k),k=-1):A=!0,ie(D,oe-ce))):(L.sortIndex=he,e(p,L),N||_||(N=!0,U||(U=!0,j()))),L},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(L){var O=x;return function(){var oe=x;x=O;try{return L.apply(this,arguments)}finally{x=oe}}}})(Of)),Of}var n0;function D_(){return n0||(n0=1,Vf.exports=I_()),Vf.exports}var Ff={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function U_(){if(i0)return an;i0=1;var t=Md();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(p,h,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:p,containerInfo:h,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,an.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,y)},an.flushSync=function(p){var h=c.T,y=l.p;try{if(c.T=null,l.p=2,p)return p()}finally{c.T=h,l.p=y,l.d.f()}},an.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,l.d.C(p,h))},an.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},an.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,T=d(y,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?l.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:_}):y==="script"&&l.d.X(p,{crossOrigin:T,integrity:x,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},an.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=d(h.as,h.crossOrigin);l.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&l.d.M(p)},an.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,T=d(y,h.crossOrigin);l.d.L(p,y,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},an.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=d(h.as,h.crossOrigin);l.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else l.d.m(p)},an.requestFormReset=function(p){l.d.r(p)},an.unstable_batchedUpdates=function(p,h){return p(h)},an.useFormState=function(p,h,y){return c.H.useFormState(p,h,y)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.2.0",an}var o0;function Uv(){if(o0)return Ff.exports;o0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ff.exports=U_(),Ff.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function L_(){if(l0)return Xr;l0=1;var t=D_(),e=Md(),i=Uv();function l(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a(n){var o=n,r=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(r=o.return),n=o.return;while(n)}return o.tag===3?r:null}function c(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function d(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function p(n){if(a(n)!==n)throw Error(l(188))}function h(n){var o=n.alternate;if(!o){if(o=a(n),o===null)throw Error(l(188));return o!==n?null:n}for(var r=n,u=o;;){var g=r.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){r=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===r)return p(g),n;if(v===u)return p(g),o;v=v.sibling}throw Error(l(188))}if(r.return!==u.return)r=g,u=v;else{for(var C=!1,b=g.child;b;){if(b===r){C=!0,r=g,u=v;break}if(b===u){C=!0,u=g,r=v;break}b=b.sibling}if(!C){for(b=v.child;b;){if(b===r){C=!0,r=v,u=g;break}if(b===u){C=!0,u=v,r=g;break}b=b.sibling}if(!C)throw Error(l(189))}}if(r.alternate!==u)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?n:o}function y(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=y(n),o!==null)return o;n=n.sibling}return null}var T=Object.assign,x=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),H=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var de=Symbol.for("react.client.reference");function q(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===de?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case U:return"SuspenseList";case P:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case H:return n.displayName||"Context";case M:return(n._context.displayName||"Context")+".Consumer";case I:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k:return o=n.displayName||null,o!==null?o:q(n.type)||"Memo";case F:o=n._payload,n=n._init;try{return q(n(o))}catch{}}return null}var ie=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},ce=[],he=-1;function R(n){return{current:n}}function B(n){0>he||(n.current=ce[he],ce[he]=null,he--)}function ee(n,o){he++,ce[he]=n.current,n.current=o}var ae=R(null),te=R(null),me=R(null),xe=R(null);function re(n,o){switch(ee(me,o),ee(te,n),ee(ae,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?Tg(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=Tg(o),n=Sg(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}B(ae),ee(ae,n)}function ye(){B(ae),B(te),B(me)}function Ve(n){n.memoizedState!==null&&ee(xe,n);var o=ae.current,r=Sg(o,n.type);o!==r&&(ee(te,n),ee(ae,r))}function Ke(n){te.current===n&&(B(ae),B(te)),xe.current===n&&(B(xe),Or._currentValue=oe)}var Ye,zt;function wt(n){if(Ye===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);Ye=o&&o[1]||"",zt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+n+zt}var Gt=!1;function sn(n,o){if(!n||Gt)return"";Gt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var $=W}Reflect.construct(n,[],se)}else{try{se.call()}catch(W){$=W}n.call(se.prototype)}}else{try{throw Error()}catch(W){$=W}(se=n())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),C=v[0],b=v[1];if(C&&b){var z=C.split(`
`),X=b.split(`
`);for(g=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;g<X.length&&!X[g].includes("DetermineComponentFrameRoot");)g++;if(u===z.length||g===X.length)for(u=z.length-1,g=X.length-1;1<=u&&0<=g&&z[u]!==X[g];)g--;for(;1<=u&&0<=g;u--,g--)if(z[u]!==X[g]){if(u!==1||g!==1)do if(u--,g--,0>g||z[u]!==X[g]){var ne=`
`+z[u].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=u&&0<=g);break}}}finally{Gt=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?wt(r):""}function Ft(n,o){switch(n.tag){case 26:case 27:case 5:return wt(n.type);case 16:return wt("Lazy");case 13:return n.child!==o&&o!==null?wt("Suspense Fallback"):wt("Suspense");case 19:return wt("SuspenseList");case 0:case 15:return sn(n.type,!1);case 11:return sn(n.type.render,!1);case 1:return sn(n.type,!0);case 31:return wt("Activity");default:return""}}function Yt(n){try{var o="",r=null;do o+=Ft(n,r),r=n,n=n.return;while(n);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var jt=Object.prototype.hasOwnProperty,en=t.unstable_scheduleCallback,fn=t.unstable_cancelCallback,Fi=t.unstable_shouldYield,$n=t.unstable_requestPaint,At=t.unstable_now,ve=t.unstable_getCurrentPriorityLevel,Ne=t.unstable_ImmediatePriority,we=t.unstable_UserBlockingPriority,nt=t.unstable_NormalPriority,Z=t.unstable_LowPriority,ue=t.unstable_IdlePriority,Se=t.log,Ge=t.unstable_setDisableYieldValue,Pe=null,Le=null;function Xe(n){if(typeof Se=="function"&&Ge(n),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Pe,n)}catch{}}var Ie=Math.clz32?Math.clz32:Yi,ut=Math.log,Jt=Math.LN2;function Yi(n){return n>>>=0,n===0?32:31-(ut(n)/Jt|0)|0}var yn=256,jo=262144,el=4194304;function ri(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function tl(n,o,r){var u=n.pendingLanes;if(u===0)return 0;var g=0,v=n.suspendedLanes,C=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~v,u!==0?g=ri(u):(C&=b,C!==0?g=ri(C):r||(r=b&~n,r!==0&&(g=ri(r))))):(b=u&~v,b!==0?g=ri(b):C!==0?g=ri(C):r||(r=u&~n,r!==0&&(g=ri(r)))),g===0?0:o!==0&&o!==g&&(o&v)===0&&(v=g&-g,r=o&-o,v>=r||v===32&&(r&4194048)!==0)?o:g}function No(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function nr(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ji(){var n=el;return el<<=1,(el&62914560)===0&&(el=4194304),n}function si(n){for(var o=[],r=0;31>r;r++)o.push(n);return o}function Ki(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function nl(n,o,r,u,g,v){var C=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var b=n.entanglements,z=n.expirationTimes,X=n.hiddenUpdates;for(r=C&~r;0<r;){var ne=31-Ie(r),se=1<<ne;b[ne]=0,z[ne]=-1;var $=X[ne];if($!==null)for(X[ne]=null,ne=0;ne<$.length;ne++){var W=$[ne];W!==null&&(W.lane&=-536870913)}r&=~se}u!==0&&Es(n,u,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(C&~o))}function Es(n,o,r){n.pendingLanes|=o,n.suspendedLanes&=~o;var u=31-Ie(o);n.entangledLanes|=o,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function ge(n,o){var r=n.entangledLanes|=o;for(n=n.entanglements;r;){var u=31-Ie(r),g=1<<u;g&o|n[u]&o&&(n[u]|=o),r&=~g}}function Re(n,o){var r=o&-o;return r=(r&42)!==0?1:ke(r),(r&(n.suspendedLanes|o))!==0?0:r}function ke(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function mt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function tt(){var n=O.p;return n!==0?n:(n=window.event,n===void 0?32:Fg(n.type))}function Rt(n,o){var r=O.p;try{return O.p=n,o()}finally{O.p=r}}var $t=Math.random().toString(36).slice(2),gt="__reactFiber$"+$t,Ut="__reactProps$"+$t,wn="__reactContainer$"+$t,ir="__reactEvents$"+$t,yT="__reactListeners$"+$t,vT="__reactHandles$"+$t,sh="__reactResources$"+$t,or="__reactMarker$"+$t;function Ru(n){delete n[gt],delete n[Ut],delete n[ir],delete n[yT],delete n[vT]}function il(n){var o=n[gt];if(o)return o;for(var r=n.parentNode;r;){if(o=r[wn]||r[gt]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(n=bg(n);n!==null;){if(r=n[gt])return r;n=bg(n)}return o}n=r,r=n.parentNode}return null}function ol(n){if(n=n[gt]||n[wn]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function lr(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(l(33))}function ll(n){var o=n[sh];return o||(o=n[sh]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Qt(n){n[or]=!0}var ah=new Set,uh={};function bo(n,o){rl(n,o),rl(n+"Capture",o)}function rl(n,o){for(uh[n]=o,n=0;n<o.length;n++)ah.add(o[n])}var xT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ch={},fh={};function TT(n){return jt.call(fh,n)?!0:jt.call(ch,n)?!1:xT.test(n)?fh[n]=!0:(ch[n]=!0,!1)}function ws(n,o,r){if(TT(o))if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+r)}}function As(n,o,r){if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+r)}}function vi(n,o,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(o,r,""+u)}}function kn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function dh(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ST(n,o,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(C){r=""+C,v.call(this,C)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(C){r=""+C},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Iu(n){if(!n._valueTracker){var o=dh(n)?"checked":"value";n._valueTracker=ST(n,o,""+n[o])}}function hh(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return n&&(u=dh(n)?n.checked?"true":"false":n.value),n=u,n!==r?(o.setValue(n),!0):!1}function Ns(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var _T=/[\n"\\]/g;function zn(n){return n.replace(_T,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Du(n,o,r,u,g,v,C,b){n.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.type=C:n.removeAttribute("type"),o!=null?C==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+kn(o)):n.value!==""+kn(o)&&(n.value=""+kn(o)):C!=="submit"&&C!=="reset"||n.removeAttribute("value"),o!=null?Uu(n,C,kn(o)):r!=null?Uu(n,C,kn(r)):u!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+kn(b):n.removeAttribute("name")}function ph(n,o,r,u,g,v,C,b){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),o!=null||r!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){Iu(n);return}r=r!=null?""+kn(r):"",o=o!=null?""+kn(o):r,b||o===n.value||(n.value=o),n.defaultValue=o}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(n.name=C),Iu(n)}function Uu(n,o,r){o==="number"&&Ns(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function sl(n,o,r,u){if(n=n.options,o){o={};for(var g=0;g<r.length;g++)o["$"+r[g]]=!0;for(r=0;r<n.length;r++)g=o.hasOwnProperty("$"+n[r].value),n[r].selected!==g&&(n[r].selected=g),g&&u&&(n[r].defaultSelected=!0)}else{for(r=""+kn(r),o=null,g=0;g<n.length;g++){if(n[g].value===r){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function mh(n,o,r){if(o!=null&&(o=""+kn(o),o!==n.value&&(n.value=o),r==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=r!=null?""+kn(r):""}function gh(n,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(l(92));if(ie(u)){if(1<u.length)throw Error(l(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=kn(o),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),Iu(n)}function al(n,o){if(o){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=o;return}}n.textContent=o}var CT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yh(n,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":u?n.setProperty(o,r):typeof r!="number"||r===0||CT.has(o)?o==="float"?n.cssFloat=r:n[o]=(""+r).trim():n[o]=r+"px"}function vh(n,o,r){if(o!=null&&typeof o!="object")throw Error(l(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in o)u=o[g],o.hasOwnProperty(g)&&r[g]!==u&&yh(n,g,u)}else for(var v in o)o.hasOwnProperty(v)&&yh(n,v,o[v])}function Lu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ET=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bs(n){return wT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function xi(){}var Hu=null;function ku(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ul=null,cl=null;function xh(n){var o=ol(n);if(o&&(n=o.stateNode)){var r=n[Ut]||null;e:switch(n=o.stateNode,o.type){case"input":if(Du(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+zn(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==n&&u.form===n.form){var g=u[Ut]||null;if(!g)throw Error(l(90));Du(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===n.form&&hh(u)}break e;case"textarea":mh(n,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&sl(n,!!r.multiple,o,!1)}}}var zu=!1;function Th(n,o,r){if(zu)return n(o,r);zu=!0;try{var u=n(o);return u}finally{if(zu=!1,(ul!==null||cl!==null)&&(ma(),ul&&(o=ul,n=cl,cl=ul=null,xh(o),n)))for(o=0;o<n.length;o++)xh(n[o])}}function rr(n,o){var r=n.stateNode;if(r===null)return null;var u=r[Ut]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(l(231,o,typeof r));return r}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gu=!1;if(Ti)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){Gu=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{Gu=!1}var Xi=null,qu=null,Ms=null;function Sh(){if(Ms)return Ms;var n,o=qu,r=o.length,u,g="value"in Xi?Xi.value:Xi.textContent,v=g.length;for(n=0;n<r&&o[n]===g[n];n++);var C=r-n;for(u=1;u<=C&&o[r-u]===g[v-u];u++);return Ms=g.slice(n,1<u?1-u:void 0)}function Rs(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Is(){return!0}function _h(){return!1}function vn(n){function o(r,u,g,v,C){this._reactName=r,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(r=n[b],this[b]=r?r(v):v[b]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Is:_h,this.isPropagationStopped=_h,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),o}var Mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=vn(Mo),ar=T({},Mo,{view:0,detail:0}),AT=vn(ar),Pu,Bu,ur,Us=T({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ur&&(ur&&n.type==="mousemove"?(Pu=n.screenX-ur.screenX,Bu=n.screenY-ur.screenY):Bu=Pu=0,ur=n),Pu)},movementY:function(n){return"movementY"in n?n.movementY:Bu}}),Ch=vn(Us),NT=T({},Us,{dataTransfer:0}),bT=vn(NT),MT=T({},ar,{relatedTarget:0}),Vu=vn(MT),RT=T({},Mo,{animationName:0,elapsedTime:0,pseudoElement:0}),IT=vn(RT),DT=T({},Mo,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),UT=vn(DT),LT=T({},Mo,{data:0}),Eh=vn(LT),HT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GT(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=zT[n])?!!o[n]:!1}function Ou(){return GT}var qT=T({},ar,{key:function(n){if(n.key){var o=HT[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Rs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?kT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(n){return n.type==="keypress"?Rs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Rs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),PT=vn(qT),BT=T({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wh=vn(BT),VT=T({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),OT=vn(VT),FT=T({},Mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),YT=vn(FT),JT=T({},Us,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),KT=vn(JT),XT=T({},Mo,{newState:0,oldState:0}),$T=vn(XT),QT=[9,13,27,32],Fu=Ti&&"CompositionEvent"in window,cr=null;Ti&&"documentMode"in document&&(cr=document.documentMode);var ZT=Ti&&"TextEvent"in window&&!cr,Ah=Ti&&(!Fu||cr&&8<cr&&11>=cr),Nh=" ",bh=!1;function Mh(n,o){switch(n){case"keyup":return QT.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fl=!1;function WT(n,o){switch(n){case"compositionend":return Rh(o);case"keypress":return o.which!==32?null:(bh=!0,Nh);case"textInput":return n=o.data,n===Nh&&bh?null:n;default:return null}}function jT(n,o){if(fl)return n==="compositionend"||!Fu&&Mh(n,o)?(n=Sh(),Ms=qu=Xi=null,fl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ah&&o.locale!=="ko"?null:o.data;default:return null}}var eS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ih(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!eS[n.type]:o==="textarea"}function Dh(n,o,r,u){ul?cl?cl.push(u):cl=[u]:ul=u,o=_a(o,"onChange"),0<o.length&&(r=new Ds("onChange","change",null,r,u),n.push({event:r,listeners:o}))}var fr=null,dr=null;function tS(n){pg(n,0)}function Ls(n){var o=lr(n);if(hh(o))return n}function Uh(n,o){if(n==="change")return o}var Lh=!1;if(Ti){var Yu;if(Ti){var Ju="oninput"in document;if(!Ju){var Hh=document.createElement("div");Hh.setAttribute("oninput","return;"),Ju=typeof Hh.oninput=="function"}Yu=Ju}else Yu=!1;Lh=Yu&&(!document.documentMode||9<document.documentMode)}function kh(){fr&&(fr.detachEvent("onpropertychange",zh),dr=fr=null)}function zh(n){if(n.propertyName==="value"&&Ls(dr)){var o=[];Dh(o,dr,n,ku(n)),Th(tS,o)}}function nS(n,o,r){n==="focusin"?(kh(),fr=o,dr=r,fr.attachEvent("onpropertychange",zh)):n==="focusout"&&kh()}function iS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ls(dr)}function oS(n,o){if(n==="click")return Ls(o)}function lS(n,o){if(n==="input"||n==="change")return Ls(o)}function rS(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var An=typeof Object.is=="function"?Object.is:rS;function hr(n,o){if(An(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var r=Object.keys(n),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var g=r[u];if(!jt.call(o,g)||!An(n[g],o[g]))return!1}return!0}function Gh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function qh(n,o){var r=Gh(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=o&&u>=o)return{node:r,offset:o-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Gh(r)}}function Ph(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Ph(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Bh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=Ns(n.document);o instanceof n.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)n=o.contentWindow;else break;o=Ns(n.document)}return o}function Ku(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var sS=Ti&&"documentMode"in document&&11>=document.documentMode,dl=null,Xu=null,pr=null,$u=!1;function Vh(n,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$u||dl==null||dl!==Ns(u)||(u=dl,"selectionStart"in u&&Ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),pr&&hr(pr,u)||(pr=u,u=_a(Xu,"onSelect"),0<u.length&&(o=new Ds("onSelect","select",null,o,r),n.push({event:o,listeners:u}),o.target=dl)))}function Ro(n,o){var r={};return r[n.toLowerCase()]=o.toLowerCase(),r["Webkit"+n]="webkit"+o,r["Moz"+n]="moz"+o,r}var hl={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionrun:Ro("Transition","TransitionRun"),transitionstart:Ro("Transition","TransitionStart"),transitioncancel:Ro("Transition","TransitionCancel"),transitionend:Ro("Transition","TransitionEnd")},Qu={},Oh={};Ti&&(Oh=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function Io(n){if(Qu[n])return Qu[n];if(!hl[n])return n;var o=hl[n],r;for(r in o)if(o.hasOwnProperty(r)&&r in Oh)return Qu[n]=o[r];return n}var Fh=Io("animationend"),Yh=Io("animationiteration"),Jh=Io("animationstart"),aS=Io("transitionrun"),uS=Io("transitionstart"),cS=Io("transitioncancel"),Kh=Io("transitionend"),Xh=new Map,Zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zu.push("scrollEnd");function Qn(n,o){Xh.set(n,o),bo(o,[n])}var Hs=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Gn=[],pl=0,Wu=0;function ks(){for(var n=pl,o=Wu=pl=0;o<n;){var r=Gn[o];Gn[o++]=null;var u=Gn[o];Gn[o++]=null;var g=Gn[o];Gn[o++]=null;var v=Gn[o];if(Gn[o++]=null,u!==null&&g!==null){var C=u.pending;C===null?g.next=g:(g.next=C.next,C.next=g),u.pending=g}v!==0&&$h(r,g,v)}}function zs(n,o,r,u){Gn[pl++]=n,Gn[pl++]=o,Gn[pl++]=r,Gn[pl++]=u,Wu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function ju(n,o,r,u){return zs(n,o,r,u),Gs(n)}function Do(n,o){return zs(n,null,null,o),Gs(n)}function $h(n,o,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var g=!1,v=n.return;v!==null;)v.childLanes|=r,u=v.alternate,u!==null&&(u.childLanes|=r),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,g&&o!==null&&(g=31-Ie(r),n=v.hiddenUpdates,u=n[g],u===null?n[g]=[o]:u.push(o),o.lane=r|536870912),v):null}function Gs(n){if(50<kr)throw kr=0,uf=null,Error(l(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var ml={};function fS(n,o,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(n,o,r,u){return new fS(n,o,r,u)}function ec(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Si(n,o){var r=n.alternate;return r===null?(r=Nn(n.tag,o,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=o,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,o=n.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Qh(n,o){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,o=r.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function qs(n,o,r,u,g,v){var C=0;if(u=n,typeof n=="function")ec(n)&&(C=1);else if(typeof n=="string")C=g_(n,r,ae.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case P:return n=Nn(31,r,o,g),n.elementType=P,n.lanes=v,n;case A:return Uo(r.children,g,v,o);case w:C=8,g|=24;break;case E:return n=Nn(12,r,o,g|2),n.elementType=E,n.lanes=v,n;case D:return n=Nn(13,r,o,g),n.elementType=D,n.lanes=v,n;case U:return n=Nn(19,r,o,g),n.elementType=U,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:C=10;break e;case M:C=9;break e;case I:C=11;break e;case k:C=14;break e;case F:C=16,u=null;break e}C=29,r=Error(l(130,n===null?"null":typeof n,"")),u=null}return o=Nn(C,r,o,g),o.elementType=n,o.type=u,o.lanes=v,o}function Uo(n,o,r,u){return n=Nn(7,n,u,o),n.lanes=r,n}function tc(n,o,r){return n=Nn(6,n,null,o),n.lanes=r,n}function Zh(n){var o=Nn(18,null,null,0);return o.stateNode=n,o}function nc(n,o,r){return o=Nn(4,n.children!==null?n.children:[],n.key,o),o.lanes=r,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var Wh=new WeakMap;function qn(n,o){if(typeof n=="object"&&n!==null){var r=Wh.get(n);return r!==void 0?r:(o={value:n,source:o,stack:Yt(o)},Wh.set(n,o),o)}return{value:n,source:o,stack:Yt(o)}}var gl=[],yl=0,Ps=null,mr=0,Pn=[],Bn=0,$i=null,ai=1,ui="";function _i(n,o){gl[yl++]=mr,gl[yl++]=Ps,Ps=n,mr=o}function jh(n,o,r){Pn[Bn++]=ai,Pn[Bn++]=ui,Pn[Bn++]=$i,$i=n;var u=ai;n=ui;var g=32-Ie(u)-1;u&=~(1<<g),r+=1;var v=32-Ie(o)+g;if(30<v){var C=g-g%5;v=(u&(1<<C)-1).toString(32),u>>=C,g-=C,ai=1<<32-Ie(o)+g|r<<g|u,ui=v+n}else ai=1<<v|r<<g|u,ui=n}function ic(n){n.return!==null&&(_i(n,1),jh(n,1,0))}function oc(n){for(;n===Ps;)Ps=gl[--yl],gl[yl]=null,mr=gl[--yl],gl[yl]=null;for(;n===$i;)$i=Pn[--Bn],Pn[Bn]=null,ui=Pn[--Bn],Pn[Bn]=null,ai=Pn[--Bn],Pn[Bn]=null}function ep(n,o){Pn[Bn++]=ai,Pn[Bn++]=ui,Pn[Bn++]=$i,ai=o.id,ui=o.overflow,$i=n}var tn=null,xt=null,je=!1,Qi=null,Vn=!1,lc=Error(l(519));function Zi(n){var o=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gr(qn(o,n)),lc}function tp(n){var o=n.stateNode,r=n.type,u=n.memoizedProps;switch(o[gt]=n,o[Ut]=u,r){case"dialog":Qe("cancel",o),Qe("close",o);break;case"iframe":case"object":case"embed":Qe("load",o);break;case"video":case"audio":for(r=0;r<Gr.length;r++)Qe(Gr[r],o);break;case"source":Qe("error",o);break;case"img":case"image":case"link":Qe("error",o),Qe("load",o);break;case"details":Qe("toggle",o);break;case"input":Qe("invalid",o),ph(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Qe("invalid",o);break;case"textarea":Qe("invalid",o),gh(o,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||vg(o.textContent,r)?(u.popover!=null&&(Qe("beforetoggle",o),Qe("toggle",o)),u.onScroll!=null&&Qe("scroll",o),u.onScrollEnd!=null&&Qe("scrollend",o),u.onClick!=null&&(o.onclick=xi),o=!0):o=!1,o||Zi(n,!0)}function np(n){for(tn=n.return;tn;)switch(tn.tag){case 5:case 31:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:tn=tn.return}}function vl(n){if(n!==tn)return!1;if(!je)return np(n),je=!0,!1;var o=n.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||Ef(n.type,n.memoizedProps)),r=!r),r&&xt&&Zi(n),np(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(l(317));xt=Ng(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(l(317));xt=Ng(n)}else o===27?(o=xt,fo(n.type)?(n=Mf,Mf=null,xt=n):xt=o):xt=tn?Fn(n.stateNode.nextSibling):null;return!0}function Lo(){xt=tn=null,je=!1}function rc(){var n=Qi;return n!==null&&(_n===null?_n=n:_n.push.apply(_n,n),Qi=null),n}function gr(n){Qi===null?Qi=[n]:Qi.push(n)}var sc=R(null),Ho=null,Ci=null;function Wi(n,o,r){ee(sc,o._currentValue),o._currentValue=r}function Ei(n){n._currentValue=sc.current,B(sc)}function ac(n,o,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),n===r)break;n=n.return}}function uc(n,o,r,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var C=g.child;v=v.firstContext;e:for(;v!==null;){var b=v;v=g;for(var z=0;z<o.length;z++)if(b.context===o[z]){v.lanes|=r,b=v.alternate,b!==null&&(b.lanes|=r),ac(v.return,r,n),u||(C=null);break e}v=b.next}}else if(g.tag===18){if(C=g.return,C===null)throw Error(l(341));C.lanes|=r,v=C.alternate,v!==null&&(v.lanes|=r),ac(C,r,n),C=null}else C=g.child;if(C!==null)C.return=g;else for(C=g;C!==null;){if(C===n){C=null;break}if(g=C.sibling,g!==null){g.return=C.return,C=g;break}C=C.return}g=C}}function xl(n,o,r,u){n=null;for(var g=o,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var C=g.alternate;if(C===null)throw Error(l(387));if(C=C.memoizedProps,C!==null){var b=g.type;An(g.pendingProps.value,C.value)||(n!==null?n.push(b):n=[b])}}else if(g===xe.current){if(C=g.alternate,C===null)throw Error(l(387));C.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Or):n=[Or])}g=g.return}n!==null&&uc(o,n,r,u),o.flags|=262144}function Bs(n){for(n=n.firstContext;n!==null;){if(!An(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ko(n){Ho=n,Ci=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return ip(Ho,n)}function Vs(n,o){return Ho===null&&ko(n),ip(n,o)}function ip(n,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},Ci===null){if(n===null)throw Error(l(308));Ci=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else Ci=Ci.next=o;return r}var dS=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){o.aborted=!0,n.forEach(function(r){return r()})}},hS=t.unstable_scheduleCallback,pS=t.unstable_NormalPriority,qt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cc(){return{controller:new dS,data:new Map,refCount:0}}function yr(n){n.refCount--,n.refCount===0&&hS(pS,function(){n.controller.abort()})}var vr=null,fc=0,Tl=0,Sl=null;function mS(n,o){if(vr===null){var r=vr=[];fc=0,Tl=mf(),Sl={status:"pending",value:void 0,then:function(u){r.push(u)}}}return fc++,o.then(op,op),o}function op(){if(--fc===0&&vr!==null){Sl!==null&&(Sl.status="fulfilled");var n=vr;vr=null,Tl=0,Sl=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function gS(n,o){var r=[],u={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return n.then(function(){u.status="fulfilled",u.value=o;for(var g=0;g<r.length;g++)(0,r[g])(o)},function(g){for(u.status="rejected",u.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),u}var lp=L.S;L.S=function(n,o){Vm=At(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&mS(n,o),lp!==null&&lp(n,o)};var zo=R(null);function dc(){var n=zo.current;return n!==null?n:yt.pooledCache}function Os(n,o){o===null?ee(zo,zo.current):ee(zo,o.pool)}function rp(){var n=dc();return n===null?null:{parent:qt._currentValue,pool:n}}var _l=Error(l(460)),hc=Error(l(474)),Fs=Error(l(542)),Ys={then:function(){}};function sp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ap(n,o,r){switch(r=n[r],r===void 0?n.push(o):r!==o&&(o.then(xi,xi),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,cp(n),n;default:if(typeof o.status=="string")o.then(xi,xi);else{if(n=yt,n!==null&&100<n.shellSuspendCounter)throw Error(l(482));n=o,n.status="pending",n.then(function(u){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=u}},function(u){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,cp(n),n}throw qo=o,_l}}function Go(n){try{var o=n._init;return o(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(qo=r,_l):r}}var qo=null;function up(){if(qo===null)throw Error(l(459));var n=qo;return qo=null,n}function cp(n){if(n===_l||n===Fs)throw Error(l(483))}var Cl=null,xr=0;function Js(n){var o=xr;return xr+=1,Cl===null&&(Cl=[]),ap(Cl,n,o)}function Tr(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function Ks(n,o){throw o.$$typeof===x?Error(l(525)):(n=Object.prototype.toString.call(o),Error(l(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function fp(n){function o(V,G){if(n){var K=V.deletions;K===null?(V.deletions=[G],V.flags|=16):K.push(G)}}function r(V,G){if(!n)return null;for(;G!==null;)o(V,G),G=G.sibling;return null}function u(V){for(var G=new Map;V!==null;)V.key!==null?G.set(V.key,V):G.set(V.index,V),V=V.sibling;return G}function g(V,G){return V=Si(V,G),V.index=0,V.sibling=null,V}function v(V,G,K){return V.index=K,n?(K=V.alternate,K!==null?(K=K.index,K<G?(V.flags|=67108866,G):K):(V.flags|=67108866,G)):(V.flags|=1048576,G)}function C(V){return n&&V.alternate===null&&(V.flags|=67108866),V}function b(V,G,K,le){return G===null||G.tag!==6?(G=tc(K,V.mode,le),G.return=V,G):(G=g(G,K),G.return=V,G)}function z(V,G,K,le){var Me=K.type;return Me===A?ne(V,G,K.props.children,le,K.key):G!==null&&(G.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===F&&Go(Me)===G.type)?(G=g(G,K.props),Tr(G,K),G.return=V,G):(G=qs(K.type,K.key,K.props,null,V.mode,le),Tr(G,K),G.return=V,G)}function X(V,G,K,le){return G===null||G.tag!==4||G.stateNode.containerInfo!==K.containerInfo||G.stateNode.implementation!==K.implementation?(G=nc(K,V.mode,le),G.return=V,G):(G=g(G,K.children||[]),G.return=V,G)}function ne(V,G,K,le,Me){return G===null||G.tag!==7?(G=Uo(K,V.mode,le,Me),G.return=V,G):(G=g(G,K),G.return=V,G)}function se(V,G,K){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=tc(""+G,V.mode,K),G.return=V,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case _:return K=qs(G.type,G.key,G.props,null,V.mode,K),Tr(K,G),K.return=V,K;case N:return G=nc(G,V.mode,K),G.return=V,G;case F:return G=Go(G),se(V,G,K)}if(ie(G)||j(G))return G=Uo(G,V.mode,K,null),G.return=V,G;if(typeof G.then=="function")return se(V,Js(G),K);if(G.$$typeof===H)return se(V,Vs(V,G),K);Ks(V,G)}return null}function $(V,G,K,le){var Me=G!==null?G.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Me!==null?null:b(V,G,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _:return K.key===Me?z(V,G,K,le):null;case N:return K.key===Me?X(V,G,K,le):null;case F:return K=Go(K),$(V,G,K,le)}if(ie(K)||j(K))return Me!==null?null:ne(V,G,K,le,null);if(typeof K.then=="function")return $(V,G,Js(K),le);if(K.$$typeof===H)return $(V,G,Vs(V,K),le);Ks(V,K)}return null}function W(V,G,K,le,Me){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return V=V.get(K)||null,b(G,V,""+le,Me);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case _:return V=V.get(le.key===null?K:le.key)||null,z(G,V,le,Me);case N:return V=V.get(le.key===null?K:le.key)||null,X(G,V,le,Me);case F:return le=Go(le),W(V,G,K,le,Me)}if(ie(le)||j(le))return V=V.get(K)||null,ne(G,V,le,Me,null);if(typeof le.then=="function")return W(V,G,K,Js(le),Me);if(le.$$typeof===H)return W(V,G,K,Vs(G,le),Me);Ks(G,le)}return null}function Ee(V,G,K,le){for(var Me=null,it=null,Ae=G,Oe=G=0,We=null;Ae!==null&&Oe<K.length;Oe++){Ae.index>Oe?(We=Ae,Ae=null):We=Ae.sibling;var ot=$(V,Ae,K[Oe],le);if(ot===null){Ae===null&&(Ae=We);break}n&&Ae&&ot.alternate===null&&o(V,Ae),G=v(ot,G,Oe),it===null?Me=ot:it.sibling=ot,it=ot,Ae=We}if(Oe===K.length)return r(V,Ae),je&&_i(V,Oe),Me;if(Ae===null){for(;Oe<K.length;Oe++)Ae=se(V,K[Oe],le),Ae!==null&&(G=v(Ae,G,Oe),it===null?Me=Ae:it.sibling=Ae,it=Ae);return je&&_i(V,Oe),Me}for(Ae=u(Ae);Oe<K.length;Oe++)We=W(Ae,V,Oe,K[Oe],le),We!==null&&(n&&We.alternate!==null&&Ae.delete(We.key===null?Oe:We.key),G=v(We,G,Oe),it===null?Me=We:it.sibling=We,it=We);return n&&Ae.forEach(function(yo){return o(V,yo)}),je&&_i(V,Oe),Me}function De(V,G,K,le){if(K==null)throw Error(l(151));for(var Me=null,it=null,Ae=G,Oe=G=0,We=null,ot=K.next();Ae!==null&&!ot.done;Oe++,ot=K.next()){Ae.index>Oe?(We=Ae,Ae=null):We=Ae.sibling;var yo=$(V,Ae,ot.value,le);if(yo===null){Ae===null&&(Ae=We);break}n&&Ae&&yo.alternate===null&&o(V,Ae),G=v(yo,G,Oe),it===null?Me=yo:it.sibling=yo,it=yo,Ae=We}if(ot.done)return r(V,Ae),je&&_i(V,Oe),Me;if(Ae===null){for(;!ot.done;Oe++,ot=K.next())ot=se(V,ot.value,le),ot!==null&&(G=v(ot,G,Oe),it===null?Me=ot:it.sibling=ot,it=ot);return je&&_i(V,Oe),Me}for(Ae=u(Ae);!ot.done;Oe++,ot=K.next())ot=W(Ae,V,Oe,ot.value,le),ot!==null&&(n&&ot.alternate!==null&&Ae.delete(ot.key===null?Oe:ot.key),G=v(ot,G,Oe),it===null?Me=ot:it.sibling=ot,it=ot);return n&&Ae.forEach(function(N_){return o(V,N_)}),je&&_i(V,Oe),Me}function pt(V,G,K,le){if(typeof K=="object"&&K!==null&&K.type===A&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case _:e:{for(var Me=K.key;G!==null;){if(G.key===Me){if(Me=K.type,Me===A){if(G.tag===7){r(V,G.sibling),le=g(G,K.props.children),le.return=V,V=le;break e}}else if(G.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===F&&Go(Me)===G.type){r(V,G.sibling),le=g(G,K.props),Tr(le,K),le.return=V,V=le;break e}r(V,G);break}else o(V,G);G=G.sibling}K.type===A?(le=Uo(K.props.children,V.mode,le,K.key),le.return=V,V=le):(le=qs(K.type,K.key,K.props,null,V.mode,le),Tr(le,K),le.return=V,V=le)}return C(V);case N:e:{for(Me=K.key;G!==null;){if(G.key===Me)if(G.tag===4&&G.stateNode.containerInfo===K.containerInfo&&G.stateNode.implementation===K.implementation){r(V,G.sibling),le=g(G,K.children||[]),le.return=V,V=le;break e}else{r(V,G);break}else o(V,G);G=G.sibling}le=nc(K,V.mode,le),le.return=V,V=le}return C(V);case F:return K=Go(K),pt(V,G,K,le)}if(ie(K))return Ee(V,G,K,le);if(j(K)){if(Me=j(K),typeof Me!="function")throw Error(l(150));return K=Me.call(K),De(V,G,K,le)}if(typeof K.then=="function")return pt(V,G,Js(K),le);if(K.$$typeof===H)return pt(V,G,Vs(V,K),le);Ks(V,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,G!==null&&G.tag===6?(r(V,G.sibling),le=g(G,K),le.return=V,V=le):(r(V,G),le=tc(K,V.mode,le),le.return=V,V=le),C(V)):r(V,G)}return function(V,G,K,le){try{xr=0;var Me=pt(V,G,K,le);return Cl=null,Me}catch(Ae){if(Ae===_l||Ae===Fs)throw Ae;var it=Nn(29,Ae,null,V.mode);return it.lanes=le,it.return=V,it}finally{}}}var Po=fp(!0),dp=fp(!1),ji=!1;function pc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mc(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function eo(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function to(n,o,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(st&2)!==0){var g=u.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),u.pending=o,o=Gs(n),$h(n,null,r),o}return zs(n,u,o,r),Gs(n)}function Sr(n,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,ge(n,r)}}function gc(n,o){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var g=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var C={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};v===null?g=v=C:v=v.next=C,r=r.next}while(r!==null);v===null?g=v=o:v=v.next=o}else g=v=o;r={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=o:n.next=o,r.lastBaseUpdate=o}var yc=!1;function _r(){if(yc){var n=Sl;if(n!==null)throw n}}function Cr(n,o,r,u){yc=!1;var g=n.updateQueue;ji=!1;var v=g.firstBaseUpdate,C=g.lastBaseUpdate,b=g.shared.pending;if(b!==null){g.shared.pending=null;var z=b,X=z.next;z.next=null,C===null?v=X:C.next=X,C=z;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,b=ne.lastBaseUpdate,b!==C&&(b===null?ne.firstBaseUpdate=X:b.next=X,ne.lastBaseUpdate=z))}if(v!==null){var se=g.baseState;C=0,ne=X=z=null,b=v;do{var $=b.lane&-536870913,W=$!==b.lane;if(W?(Ze&$)===$:(u&$)===$){$!==0&&$===Tl&&(yc=!0),ne!==null&&(ne=ne.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ee=n,De=b;$=o;var pt=r;switch(De.tag){case 1:if(Ee=De.payload,typeof Ee=="function"){se=Ee.call(pt,se,$);break e}se=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=De.payload,$=typeof Ee=="function"?Ee.call(pt,se,$):Ee,$==null)break e;se=T({},se,$);break e;case 2:ji=!0}}$=b.callback,$!==null&&(n.flags|=64,W&&(n.flags|=8192),W=g.callbacks,W===null?g.callbacks=[$]:W.push($))}else W={lane:$,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ne===null?(X=ne=W,z=se):ne=ne.next=W,C|=$;if(b=b.next,b===null){if(b=g.shared.pending,b===null)break;W=b,b=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);ne===null&&(z=se),g.baseState=z,g.firstBaseUpdate=X,g.lastBaseUpdate=ne,v===null&&(g.shared.lanes=0),ro|=C,n.lanes=C,n.memoizedState=se}}function hp(n,o){if(typeof n!="function")throw Error(l(191,n));n.call(o)}function pp(n,o){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)hp(r[n],o)}var El=R(null),Xs=R(0);function mp(n,o){n=Ui,ee(Xs,n),ee(El,o),Ui=n|o.baseLanes}function vc(){ee(Xs,Ui),ee(El,El.current)}function xc(){Ui=Xs.current,B(El),B(Xs)}var bn=R(null),On=null;function no(n){var o=n.alternate;ee(Lt,Lt.current&1),ee(bn,n),On===null&&(o===null||El.current!==null||o.memoizedState!==null)&&(On=n)}function Tc(n){ee(Lt,Lt.current),ee(bn,n),On===null&&(On=n)}function gp(n){n.tag===22?(ee(Lt,Lt.current),ee(bn,n),On===null&&(On=n)):io()}function io(){ee(Lt,Lt.current),ee(bn,bn.current)}function Mn(n){B(bn),On===n&&(On=null),B(Lt)}var Lt=R(0);function $s(n){for(var o=n;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Nf(r)||bf(r)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var wi=0,Be=null,dt=null,Pt=null,Qs=!1,wl=!1,Bo=!1,Zs=0,Er=0,Al=null,yS=0;function It(){throw Error(l(321))}function Sc(n,o){if(o===null)return!1;for(var r=0;r<o.length&&r<n.length;r++)if(!An(n[r],o[r]))return!1;return!0}function _c(n,o,r,u,g,v){return wi=v,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=n===null||n.memoizedState===null?jp:zc,Bo=!1,v=r(u,g),Bo=!1,wl&&(v=vp(o,r,u,g)),yp(n),v}function yp(n){L.H=Nr;var o=dt!==null&&dt.next!==null;if(wi=0,Pt=dt=Be=null,Qs=!1,Er=0,Al=null,o)throw Error(l(300));n===null||Bt||(n=n.dependencies,n!==null&&Bs(n)&&(Bt=!0))}function vp(n,o,r,u){Be=n;var g=0;do{if(wl&&(Al=null),Er=0,wl=!1,25<=g)throw Error(l(301));if(g+=1,Pt=dt=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}L.H=em,v=o(r,u)}while(wl);return v}function vS(){var n=L.H,o=n.useState()[0];return o=typeof o.then=="function"?wr(o):o,n=n.useState()[0],(dt!==null?dt.memoizedState:null)!==n&&(Be.flags|=1024),o}function Cc(){var n=Zs!==0;return Zs=0,n}function Ec(n,o,r){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~r}function wc(n){if(Qs){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Qs=!1}wi=0,Pt=dt=Be=null,wl=!1,Er=Zs=0,Al=null}function dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Be.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Ht(){if(dt===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=dt.next;var o=Pt===null?Be.memoizedState:Pt.next;if(o!==null)Pt=o,dt=n;else{if(n===null)throw Be.alternate===null?Error(l(467)):Error(l(310));dt=n,n={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Pt===null?Be.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function Ws(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wr(n){var o=Er;return Er+=1,Al===null&&(Al=[]),n=ap(Al,n,o),o=Be,(Pt===null?o.memoizedState:Pt.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?jp:zc),n}function js(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return wr(n);if(n.$$typeof===H)return nn(n)}throw Error(l(438,String(n)))}function Ac(n){var o=null,r=Be.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=Be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=Ws(),Be.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(n),u=0;u<n;u++)r[u]=Y;return o.index++,r}function Ai(n,o){return typeof o=="function"?o(n):o}function ea(n){var o=Ht();return Nc(o,dt,n)}function Nc(n,o,r){var u=n.queue;if(u===null)throw Error(l(311));u.lastRenderedReducer=r;var g=n.baseQueue,v=u.pending;if(v!==null){if(g!==null){var C=g.next;g.next=v.next,v.next=C}o.baseQueue=g=v,u.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{o=g.next;var b=C=null,z=null,X=o,ne=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(Ze&se)===se:(wi&se)===se){var $=X.revertLane;if($===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===Tl&&(ne=!0);else if((wi&$)===$){X=X.next,$===Tl&&(ne=!0);continue}else se={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},z===null?(b=z=se,C=v):z=z.next=se,Be.lanes|=$,ro|=$;se=X.action,Bo&&r(v,se),v=X.hasEagerState?X.eagerState:r(v,se)}else $={lane:se,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},z===null?(b=z=$,C=v):z=z.next=$,Be.lanes|=se,ro|=se;X=X.next}while(X!==null&&X!==o);if(z===null?C=v:z.next=b,!An(v,n.memoizedState)&&(Bt=!0,ne&&(r=Sl,r!==null)))throw r;n.memoizedState=v,n.baseState=C,n.baseQueue=z,u.lastRenderedState=v}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function bc(n){var o=Ht(),r=o.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=n;var u=r.dispatch,g=r.pending,v=o.memoizedState;if(g!==null){r.pending=null;var C=g=g.next;do v=n(v,C.action),C=C.next;while(C!==g);An(v,o.memoizedState)||(Bt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),r.lastRenderedState=v}return[v,u]}function xp(n,o,r){var u=Be,g=Ht(),v=je;if(v){if(r===void 0)throw Error(l(407));r=r()}else r=o();var C=!An((dt||g).memoizedState,r);if(C&&(g.memoizedState=r,Bt=!0),g=g.queue,Ic(_p.bind(null,u,g,n),[n]),g.getSnapshot!==o||C||Pt!==null&&Pt.memoizedState.tag&1){if(u.flags|=2048,Nl(9,{destroy:void 0},Sp.bind(null,u,g,r,o),null),yt===null)throw Error(l(349));v||(wi&127)!==0||Tp(u,o,r)}return r}function Tp(n,o,r){n.flags|=16384,n={getSnapshot:o,value:r},o=Be.updateQueue,o===null?(o=Ws(),Be.updateQueue=o,o.stores=[n]):(r=o.stores,r===null?o.stores=[n]:r.push(n))}function Sp(n,o,r,u){o.value=r,o.getSnapshot=u,Cp(o)&&Ep(n)}function _p(n,o,r){return r(function(){Cp(o)&&Ep(n)})}function Cp(n){var o=n.getSnapshot;n=n.value;try{var r=o();return!An(n,r)}catch{return!0}}function Ep(n){var o=Do(n,2);o!==null&&Cn(o,n,2)}function Mc(n){var o=dn();if(typeof n=="function"){var r=n;if(n=r(),Bo){Xe(!0);try{r()}finally{Xe(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:n},o}function wp(n,o,r,u){return n.baseState=r,Nc(n,dt,typeof u=="function"?u:Ai)}function xS(n,o,r,u,g){if(ia(n))throw Error(l(485));if(n=o.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){v.listeners.push(C)}};L.T!==null?r(!0):v.isTransition=!1,u(v),r=o.pending,r===null?(v.next=o.pending=v,Ap(o,v)):(v.next=r.next,o.pending=r.next=v)}}function Ap(n,o){var r=o.action,u=o.payload,g=n.state;if(o.isTransition){var v=L.T,C={};L.T=C;try{var b=r(g,u),z=L.S;z!==null&&z(C,b),Np(n,o,b)}catch(X){Rc(n,o,X)}finally{v!==null&&C.types!==null&&(v.types=C.types),L.T=v}}else try{v=r(g,u),Np(n,o,v)}catch(X){Rc(n,o,X)}}function Np(n,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){bp(n,o,u)},function(u){return Rc(n,o,u)}):bp(n,o,r)}function bp(n,o,r){o.status="fulfilled",o.value=r,Mp(o),n.state=r,o=n.pending,o!==null&&(r=o.next,r===o?n.pending=null:(r=r.next,o.next=r,Ap(n,r)))}function Rc(n,o,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,Mp(o),o=o.next;while(o!==u)}n.action=null}function Mp(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function Rp(n,o){return o}function Ip(n,o){if(je){var r=yt.formState;if(r!==null){e:{var u=Be;if(je){if(xt){t:{for(var g=xt,v=Vn;g.nodeType!==8;){if(!v){g=null;break t}if(g=Fn(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){xt=Fn(g.nextSibling),u=g.data==="F!";break e}}Zi(u)}u=!1}u&&(o=r[0])}}return r=dn(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:o},r.queue=u,r=Qp.bind(null,Be,u),u.dispatch=r,u=Mc(!1),v=kc.bind(null,Be,!1,u.queue),u=dn(),g={state:o,dispatch:null,action:n,pending:null},u.queue=g,r=xS.bind(null,Be,g,v,r),g.dispatch=r,u.memoizedState=n,[o,r,!1]}function Dp(n){var o=Ht();return Up(o,dt,n)}function Up(n,o,r){if(o=Nc(n,o,Rp)[0],n=ea(Ai)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=wr(o)}catch(C){throw C===_l?Fs:C}else u=o;o=Ht();var g=o.queue,v=g.dispatch;return r!==o.memoizedState&&(Be.flags|=2048,Nl(9,{destroy:void 0},TS.bind(null,g,r),null)),[u,v,n]}function TS(n,o){n.action=o}function Lp(n){var o=Ht(),r=dt;if(r!==null)return Up(o,r,n);Ht(),o=o.memoizedState,r=Ht();var u=r.queue.dispatch;return r.memoizedState=n,[o,u,!1]}function Nl(n,o,r,u){return n={tag:n,create:r,deps:u,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Ws(),Be.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,o.lastEffect=n),n}function Hp(){return Ht().memoizedState}function ta(n,o,r,u){var g=dn();Be.flags|=n,g.memoizedState=Nl(1|o,{destroy:void 0},r,u===void 0?null:u)}function na(n,o,r,u){var g=Ht();u=u===void 0?null:u;var v=g.memoizedState.inst;dt!==null&&u!==null&&Sc(u,dt.memoizedState.deps)?g.memoizedState=Nl(o,v,r,u):(Be.flags|=n,g.memoizedState=Nl(1|o,v,r,u))}function kp(n,o){ta(8390656,8,n,o)}function Ic(n,o){na(2048,8,n,o)}function SS(n){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=Ws(),Be.updateQueue=o,o.events=[n];else{var r=o.events;r===null?o.events=[n]:r.push(n)}}function zp(n){var o=Ht().memoizedState;return SS({ref:o,nextImpl:n}),function(){if((st&2)!==0)throw Error(l(440));return o.impl.apply(void 0,arguments)}}function Gp(n,o){return na(4,2,n,o)}function qp(n,o){return na(4,4,n,o)}function Pp(n,o){if(typeof o=="function"){n=n();var r=o(n);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Bp(n,o,r){r=r!=null?r.concat([n]):null,na(4,4,Pp.bind(null,o,n),r)}function Dc(){}function Vp(n,o){var r=Ht();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&Sc(o,u[1])?u[0]:(r.memoizedState=[n,o],n)}function Op(n,o){var r=Ht();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&Sc(o,u[1]))return u[0];if(u=n(),Bo){Xe(!0);try{n()}finally{Xe(!1)}}return r.memoizedState=[u,o],u}function Uc(n,o,r){return r===void 0||(wi&1073741824)!==0&&(Ze&261930)===0?n.memoizedState=o:(n.memoizedState=r,n=Fm(),Be.lanes|=n,ro|=n,r)}function Fp(n,o,r,u){return An(r,o)?r:El.current!==null?(n=Uc(n,r,u),An(n,o)||(Bt=!0),n):(wi&42)===0||(wi&1073741824)!==0&&(Ze&261930)===0?(Bt=!0,n.memoizedState=r):(n=Fm(),Be.lanes|=n,ro|=n,o)}function Yp(n,o,r,u,g){var v=O.p;O.p=v!==0&&8>v?v:8;var C=L.T,b={};L.T=b,kc(n,!1,o,r);try{var z=g(),X=L.S;if(X!==null&&X(b,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ne=gS(z,u);Ar(n,o,ne,Dn(n))}else Ar(n,o,u,Dn(n))}catch(se){Ar(n,o,{then:function(){},status:"rejected",reason:se},Dn())}finally{O.p=v,C!==null&&b.types!==null&&(C.types=b.types),L.T=C}}function _S(){}function Lc(n,o,r,u){if(n.tag!==5)throw Error(l(476));var g=Jp(n).queue;Yp(n,g,o,oe,r===null?_S:function(){return Kp(n),r(u)})}function Jp(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:oe},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:r},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function Kp(n){var o=Jp(n);o.next===null&&(o=n.alternate.memoizedState),Ar(n,o.next.queue,{},Dn())}function Hc(){return nn(Or)}function Xp(){return Ht().memoizedState}function $p(){return Ht().memoizedState}function CS(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var r=Dn();n=eo(r);var u=to(o,n,r);u!==null&&(Cn(u,o,r),Sr(u,o,r)),o={cache:cc()},n.payload=o;return}o=o.return}}function ES(n,o,r){var u=Dn();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ia(n)?Zp(o,r):(r=ju(n,o,r,u),r!==null&&(Cn(r,n,u),Wp(r,o,u)))}function Qp(n,o,r){var u=Dn();Ar(n,o,r,u)}function Ar(n,o,r,u){var g={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ia(n))Zp(o,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var C=o.lastRenderedState,b=v(C,r);if(g.hasEagerState=!0,g.eagerState=b,An(b,C))return zs(n,o,g,0),yt===null&&ks(),!1}catch{}finally{}if(r=ju(n,o,g,u),r!==null)return Cn(r,n,u),Wp(r,o,u),!0}return!1}function kc(n,o,r,u){if(u={lane:2,revertLane:mf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ia(n)){if(o)throw Error(l(479))}else o=ju(n,r,u,2),o!==null&&Cn(o,n,2)}function ia(n){var o=n.alternate;return n===Be||o!==null&&o===Be}function Zp(n,o){wl=Qs=!0;var r=n.pending;r===null?o.next=o:(o.next=r.next,r.next=o),n.pending=o}function Wp(n,o,r){if((r&4194048)!==0){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,ge(n,r)}}var Nr={readContext:nn,use:js,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};Nr.useEffectEvent=It;var jp={readContext:nn,use:js,useCallback:function(n,o){return dn().memoizedState=[n,o===void 0?null:o],n},useContext:nn,useEffect:kp,useImperativeHandle:function(n,o,r){r=r!=null?r.concat([n]):null,ta(4194308,4,Pp.bind(null,o,n),r)},useLayoutEffect:function(n,o){return ta(4194308,4,n,o)},useInsertionEffect:function(n,o){ta(4,2,n,o)},useMemo:function(n,o){var r=dn();o=o===void 0?null:o;var u=n();if(Bo){Xe(!0);try{n()}finally{Xe(!1)}}return r.memoizedState=[u,o],u},useReducer:function(n,o,r){var u=dn();if(r!==void 0){var g=r(o);if(Bo){Xe(!0);try{r(o)}finally{Xe(!1)}}}else g=o;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=ES.bind(null,Be,n),[u.memoizedState,n]},useRef:function(n){var o=dn();return n={current:n},o.memoizedState=n},useState:function(n){n=Mc(n);var o=n.queue,r=Qp.bind(null,Be,o);return o.dispatch=r,[n.memoizedState,r]},useDebugValue:Dc,useDeferredValue:function(n,o){var r=dn();return Uc(r,n,o)},useTransition:function(){var n=Mc(!1);return n=Yp.bind(null,Be,n.queue,!0,!1),dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,r){var u=Be,g=dn();if(je){if(r===void 0)throw Error(l(407));r=r()}else{if(r=o(),yt===null)throw Error(l(349));(Ze&127)!==0||Tp(u,o,r)}g.memoizedState=r;var v={value:r,getSnapshot:o};return g.queue=v,kp(_p.bind(null,u,v,n),[n]),u.flags|=2048,Nl(9,{destroy:void 0},Sp.bind(null,u,v,r,o),null),r},useId:function(){var n=dn(),o=yt.identifierPrefix;if(je){var r=ui,u=ai;r=(u&~(1<<32-Ie(u)-1)).toString(32)+r,o="_"+o+"R_"+r,r=Zs++,0<r&&(o+="H"+r.toString(32)),o+="_"}else r=yS++,o="_"+o+"r_"+r.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:Hc,useFormState:Ip,useActionState:Ip,useOptimistic:function(n){var o=dn();o.memoizedState=o.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=kc.bind(null,Be,!0,r),r.dispatch=o,[n,o]},useMemoCache:Ac,useCacheRefresh:function(){return dn().memoizedState=CS.bind(null,Be)},useEffectEvent:function(n){var o=dn(),r={impl:n};return o.memoizedState=r,function(){if((st&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},zc={readContext:nn,use:js,useCallback:Vp,useContext:nn,useEffect:Ic,useImperativeHandle:Bp,useInsertionEffect:Gp,useLayoutEffect:qp,useMemo:Op,useReducer:ea,useRef:Hp,useState:function(){return ea(Ai)},useDebugValue:Dc,useDeferredValue:function(n,o){var r=Ht();return Fp(r,dt.memoizedState,n,o)},useTransition:function(){var n=ea(Ai)[0],o=Ht().memoizedState;return[typeof n=="boolean"?n:wr(n),o]},useSyncExternalStore:xp,useId:Xp,useHostTransitionStatus:Hc,useFormState:Dp,useActionState:Dp,useOptimistic:function(n,o){var r=Ht();return wp(r,dt,n,o)},useMemoCache:Ac,useCacheRefresh:$p};zc.useEffectEvent=zp;var em={readContext:nn,use:js,useCallback:Vp,useContext:nn,useEffect:Ic,useImperativeHandle:Bp,useInsertionEffect:Gp,useLayoutEffect:qp,useMemo:Op,useReducer:bc,useRef:Hp,useState:function(){return bc(Ai)},useDebugValue:Dc,useDeferredValue:function(n,o){var r=Ht();return dt===null?Uc(r,n,o):Fp(r,dt.memoizedState,n,o)},useTransition:function(){var n=bc(Ai)[0],o=Ht().memoizedState;return[typeof n=="boolean"?n:wr(n),o]},useSyncExternalStore:xp,useId:Xp,useHostTransitionStatus:Hc,useFormState:Lp,useActionState:Lp,useOptimistic:function(n,o){var r=Ht();return dt!==null?wp(r,dt,n,o):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:Ac,useCacheRefresh:$p};em.useEffectEvent=zp;function Gc(n,o,r,u){o=n.memoizedState,r=r(u,o),r=r==null?o:T({},o,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var qc={enqueueSetState:function(n,o,r){n=n._reactInternals;var u=Dn(),g=eo(u);g.payload=o,r!=null&&(g.callback=r),o=to(n,g,u),o!==null&&(Cn(o,n,u),Sr(o,n,u))},enqueueReplaceState:function(n,o,r){n=n._reactInternals;var u=Dn(),g=eo(u);g.tag=1,g.payload=o,r!=null&&(g.callback=r),o=to(n,g,u),o!==null&&(Cn(o,n,u),Sr(o,n,u))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var r=Dn(),u=eo(r);u.tag=2,o!=null&&(u.callback=o),o=to(n,u,r),o!==null&&(Cn(o,n,r),Sr(o,n,r))}};function tm(n,o,r,u,g,v,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,v,C):o.prototype&&o.prototype.isPureReactComponent?!hr(r,u)||!hr(g,v):!0}function nm(n,o,r,u){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==n&&qc.enqueueReplaceState(o,o.state,null)}function Vo(n,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(n=n.defaultProps){r===o&&(r=T({},r));for(var g in n)r[g]===void 0&&(r[g]=n[g])}return r}function im(n){Hs(n)}function om(n){console.error(n)}function lm(n){Hs(n)}function oa(n,o){try{var r=n.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function rm(n,o,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Pc(n,o,r){return r=eo(r),r.tag=3,r.payload={element:null},r.callback=function(){oa(n,o)},r}function sm(n){return n=eo(n),n.tag=3,n}function am(n,o,r,u){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;n.payload=function(){return g(v)},n.callback=function(){rm(o,r,u)}}var C=r.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(n.callback=function(){rm(o,r,u),typeof g!="function"&&(so===null?so=new Set([this]):so.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function wS(n,o,r,u,g){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&xl(o,r,g,!0),r=bn.current,r!==null){switch(r.tag){case 31:case 13:return On===null?ga():r.alternate===null&&Dt===0&&(Dt=3),r.flags&=-257,r.flags|=65536,r.lanes=g,u===Ys?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),df(n,u,g)),!1;case 22:return r.flags|=65536,u===Ys?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),df(n,u,g)),!1}throw Error(l(435,r.tag))}return df(n,u,g),ga(),!1}if(je)return o=bn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,u!==lc&&(n=Error(l(422),{cause:u}),gr(qn(n,r)))):(u!==lc&&(o=Error(l(423),{cause:u}),gr(qn(o,r))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=qn(u,r),g=Pc(n.stateNode,u,g),gc(n,g),Dt!==4&&(Dt=2)),!1;var v=Error(l(520),{cause:u});if(v=qn(v,r),Hr===null?Hr=[v]:Hr.push(v),Dt!==4&&(Dt=2),o===null)return!0;u=qn(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,n=g&-g,r.lanes|=n,n=Pc(r.stateNode,u,n),gc(r,n),!1;case 1:if(o=r.type,v=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(so===null||!so.has(v))))return r.flags|=65536,g&=-g,r.lanes|=g,g=sm(g),am(g,n,r,u),gc(r,g),!1}r=r.return}while(r!==null);return!1}var Bc=Error(l(461)),Bt=!1;function on(n,o,r,u){o.child=n===null?dp(o,null,r,u):Po(o,n.child,r,u)}function um(n,o,r,u,g){r=r.render;var v=o.ref;if("ref"in u){var C={};for(var b in u)b!=="ref"&&(C[b]=u[b])}else C=u;return ko(o),u=_c(n,o,r,C,v,g),b=Cc(),n!==null&&!Bt?(Ec(n,o,g),Ni(n,o,g)):(je&&b&&ic(o),o.flags|=1,on(n,o,u,g),o.child)}function cm(n,o,r,u,g){if(n===null){var v=r.type;return typeof v=="function"&&!ec(v)&&v.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=v,fm(n,o,v,u,g)):(n=qs(r.type,null,u,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(v=n.child,!$c(n,g)){var C=v.memoizedProps;if(r=r.compare,r=r!==null?r:hr,r(C,u)&&n.ref===o.ref)return Ni(n,o,g)}return o.flags|=1,n=Si(v,u),n.ref=o.ref,n.return=o,o.child=n}function fm(n,o,r,u,g){if(n!==null){var v=n.memoizedProps;if(hr(v,u)&&n.ref===o.ref)if(Bt=!1,o.pendingProps=u=v,$c(n,g))(n.flags&131072)!==0&&(Bt=!0);else return o.lanes=n.lanes,Ni(n,o,g)}return Vc(n,o,r,u,g)}function dm(n,o,r,u){var g=u.children,v=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|r:r,n!==null){for(u=o.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,o.child=null;return hm(n,o,v,r,u)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&Os(o,v!==null?v.cachePool:null),v!==null?mp(o,v):vc(),gp(o);else return u=o.lanes=536870912,hm(n,o,v!==null?v.baseLanes|r:r,r,u)}else v!==null?(Os(o,v.cachePool),mp(o,v),io(),o.memoizedState=null):(n!==null&&Os(o,null),vc(),io());return on(n,o,g,r),o.child}function br(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function hm(n,o,r,u,g){var v=dc();return v=v===null?null:{parent:qt._currentValue,pool:v},o.memoizedState={baseLanes:r,cachePool:v},n!==null&&Os(o,null),vc(),gp(o),n!==null&&xl(n,o,u,!0),o.childLanes=g,null}function la(n,o){return o=sa({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function pm(n,o,r){return Po(o,n.child,null,r),n=la(o,o.pendingProps),n.flags|=2,Mn(o),o.memoizedState=null,n}function AS(n,o,r){var u=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(je){if(u.mode==="hidden")return n=la(o,u),o.lanes=536870912,br(null,n);if(Tc(o),(n=xt)?(n=Ag(n,Vn),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:$i!==null?{id:ai,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},r=Zh(n),r.return=o,o.child=r,tn=o,xt=null)):n=null,n===null)throw Zi(o);return o.lanes=536870912,null}return la(o,u)}var v=n.memoizedState;if(v!==null){var C=v.dehydrated;if(Tc(o),g)if(o.flags&256)o.flags&=-257,o=pm(n,o,r);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(l(558));else if(Bt||xl(n,o,r,!1),g=(r&n.childLanes)!==0,Bt||g){if(u=yt,u!==null&&(C=Re(u,r),C!==0&&C!==v.retryLane))throw v.retryLane=C,Do(n,C),Cn(u,n,C),Bc;ga(),o=pm(n,o,r)}else n=v.treeContext,xt=Fn(C.nextSibling),tn=o,je=!0,Qi=null,Vn=!1,n!==null&&ep(o,n),o=la(o,u),o.flags|=4096;return o}return n=Si(n.child,{mode:u.mode,children:u.children}),n.ref=o.ref,o.child=n,n.return=o,n}function ra(n,o){var r=o.ref;if(r===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(n===null||n.ref!==r)&&(o.flags|=4194816)}}function Vc(n,o,r,u,g){return ko(o),r=_c(n,o,r,u,void 0,g),u=Cc(),n!==null&&!Bt?(Ec(n,o,g),Ni(n,o,g)):(je&&u&&ic(o),o.flags|=1,on(n,o,r,g),o.child)}function mm(n,o,r,u,g,v){return ko(o),o.updateQueue=null,r=vp(o,u,r,g),yp(n),u=Cc(),n!==null&&!Bt?(Ec(n,o,v),Ni(n,o,v)):(je&&u&&ic(o),o.flags|=1,on(n,o,r,v),o.child)}function gm(n,o,r,u,g){if(ko(o),o.stateNode===null){var v=ml,C=r.contextType;typeof C=="object"&&C!==null&&(v=nn(C)),v=new r(u,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=qc,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=u,v.state=o.memoizedState,v.refs={},pc(o),C=r.contextType,v.context=typeof C=="object"&&C!==null?nn(C):ml,v.state=o.memoizedState,C=r.getDerivedStateFromProps,typeof C=="function"&&(Gc(o,r,C,u),v.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(C=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),C!==v.state&&qc.enqueueReplaceState(v,v.state,null),Cr(o,u,v,g),_r(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(n===null){v=o.stateNode;var b=o.memoizedProps,z=Vo(r,b);v.props=z;var X=v.context,ne=r.contextType;C=ml,typeof ne=="object"&&ne!==null&&(C=nn(ne));var se=r.getDerivedStateFromProps;ne=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function",b=o.pendingProps!==b,ne||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b||X!==C)&&nm(o,v,u,C),ji=!1;var $=o.memoizedState;v.state=$,Cr(o,u,v,g),_r(),X=o.memoizedState,b||$!==X||ji?(typeof se=="function"&&(Gc(o,r,se,u),X=o.memoizedState),(z=ji||tm(o,r,z,u,$,X,C))?(ne||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=X),v.props=u,v.state=X,v.context=C,u=z):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{v=o.stateNode,mc(n,o),C=o.memoizedProps,ne=Vo(r,C),v.props=ne,se=o.pendingProps,$=v.context,X=r.contextType,z=ml,typeof X=="object"&&X!==null&&(z=nn(X)),b=r.getDerivedStateFromProps,(X=typeof b=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==se||$!==z)&&nm(o,v,u,z),ji=!1,$=o.memoizedState,v.state=$,Cr(o,u,v,g),_r();var W=o.memoizedState;C!==se||$!==W||ji||n!==null&&n.dependencies!==null&&Bs(n.dependencies)?(typeof b=="function"&&(Gc(o,r,b,u),W=o.memoizedState),(ne=ji||tm(o,r,ne,u,$,W,z)||n!==null&&n.dependencies!==null&&Bs(n.dependencies))?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,W,z),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,W,z)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=W),v.props=u,v.state=W,v.context=z,u=ne):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(o.flags|=1024),u=!1)}return v=u,ra(n,o),u=(o.flags&128)!==0,v||u?(v=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,n!==null&&u?(o.child=Po(o,n.child,null,g),o.child=Po(o,null,r,g)):on(n,o,r,g),o.memoizedState=v.state,n=o.child):n=Ni(n,o,g),n}function ym(n,o,r,u){return Lo(),o.flags|=256,on(n,o,r,u),o.child}var Oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fc(n){return{baseLanes:n,cachePool:rp()}}function Yc(n,o,r){return n=n!==null?n.childLanes&~r:0,o&&(n|=In),n}function vm(n,o,r){var u=o.pendingProps,g=!1,v=(o.flags&128)!==0,C;if((C=v)||(C=n!==null&&n.memoizedState===null?!1:(Lt.current&2)!==0),C&&(g=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,n===null){if(je){if(g?no(o):io(),(n=xt)?(n=Ag(n,Vn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:$i!==null?{id:ai,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},r=Zh(n),r.return=o,o.child=r,tn=o,xt=null)):n=null,n===null)throw Zi(o);return bf(n)?o.lanes=32:o.lanes=536870912,null}var b=u.children;return u=u.fallback,g?(io(),g=o.mode,b=sa({mode:"hidden",children:b},g),u=Uo(u,g,r,null),b.return=o,u.return=o,b.sibling=u,o.child=b,u=o.child,u.memoizedState=Fc(r),u.childLanes=Yc(n,C,r),o.memoizedState=Oc,br(null,u)):(no(o),Jc(o,b))}var z=n.memoizedState;if(z!==null&&(b=z.dehydrated,b!==null)){if(v)o.flags&256?(no(o),o.flags&=-257,o=Kc(n,o,r)):o.memoizedState!==null?(io(),o.child=n.child,o.flags|=128,o=null):(io(),b=u.fallback,g=o.mode,u=sa({mode:"visible",children:u.children},g),b=Uo(b,g,r,null),b.flags|=2,u.return=o,b.return=o,u.sibling=b,o.child=u,Po(o,n.child,null,r),u=o.child,u.memoizedState=Fc(r),u.childLanes=Yc(n,C,r),o.memoizedState=Oc,o=br(null,u));else if(no(o),bf(b)){if(C=b.nextSibling&&b.nextSibling.dataset,C)var X=C.dgst;C=X,u=Error(l(419)),u.stack="",u.digest=C,gr({value:u,source:null,stack:null}),o=Kc(n,o,r)}else if(Bt||xl(n,o,r,!1),C=(r&n.childLanes)!==0,Bt||C){if(C=yt,C!==null&&(u=Re(C,r),u!==0&&u!==z.retryLane))throw z.retryLane=u,Do(n,u),Cn(C,n,u),Bc;Nf(b)||ga(),o=Kc(n,o,r)}else Nf(b)?(o.flags|=192,o.child=n.child,o=null):(n=z.treeContext,xt=Fn(b.nextSibling),tn=o,je=!0,Qi=null,Vn=!1,n!==null&&ep(o,n),o=Jc(o,u.children),o.flags|=4096);return o}return g?(io(),b=u.fallback,g=o.mode,z=n.child,X=z.sibling,u=Si(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,X!==null?b=Si(X,b):(b=Uo(b,g,r,null),b.flags|=2),b.return=o,u.return=o,u.sibling=b,o.child=u,br(null,u),u=o.child,b=n.child.memoizedState,b===null?b=Fc(r):(g=b.cachePool,g!==null?(z=qt._currentValue,g=g.parent!==z?{parent:z,pool:z}:g):g=rp(),b={baseLanes:b.baseLanes|r,cachePool:g}),u.memoizedState=b,u.childLanes=Yc(n,C,r),o.memoizedState=Oc,br(n.child,u)):(no(o),r=n.child,n=r.sibling,r=Si(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,n!==null&&(C=o.deletions,C===null?(o.deletions=[n],o.flags|=16):C.push(n)),o.child=r,o.memoizedState=null,r)}function Jc(n,o){return o=sa({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function sa(n,o){return n=Nn(22,n,null,o),n.lanes=0,n}function Kc(n,o,r){return Po(o,n.child,null,r),n=Jc(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function xm(n,o,r){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o),ac(n.return,o,r)}function Xc(n,o,r,u,g,v){var C=n.memoizedState;C===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:g,treeForkCount:v}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=u,C.tail=r,C.tailMode=g,C.treeForkCount=v)}function Tm(n,o,r){var u=o.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var C=Lt.current,b=(C&2)!==0;if(b?(C=C&1|2,o.flags|=128):C&=1,ee(Lt,C),on(n,o,u,r),u=je?mr:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&xm(n,r,o);else if(n.tag===19)xm(n,r,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(r=o.child,g=null;r!==null;)n=r.alternate,n!==null&&$s(n)===null&&(g=r),r=r.sibling;r=g,r===null?(g=o.child,o.child=null):(g=r.sibling,r.sibling=null),Xc(o,!1,g,r,v,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&$s(n)===null){o.child=g;break}n=g.sibling,g.sibling=r,r=g,g=n}Xc(o,!0,r,null,v,u);break;case"together":Xc(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Ni(n,o,r){if(n!==null&&(o.dependencies=n.dependencies),ro|=o.lanes,(r&o.childLanes)===0)if(n!==null){if(xl(n,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(l(153));if(o.child!==null){for(n=o.child,r=Si(n,n.pendingProps),o.child=r,r.return=o;n.sibling!==null;)n=n.sibling,r=r.sibling=Si(n,n.pendingProps),r.return=o;r.sibling=null}return o.child}function $c(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&Bs(n)))}function NS(n,o,r){switch(o.tag){case 3:re(o,o.stateNode.containerInfo),Wi(o,qt,n.memoizedState.cache),Lo();break;case 27:case 5:Ve(o);break;case 4:re(o,o.stateNode.containerInfo);break;case 10:Wi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Tc(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(no(o),o.flags|=128,null):(r&o.child.childLanes)!==0?vm(n,o,r):(no(o),n=Ni(n,o,r),n!==null?n.sibling:null);no(o);break;case 19:var g=(n.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(xl(n,o,r,!1),u=(r&o.childLanes)!==0),g){if(u)return Tm(n,o,r);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ee(Lt,Lt.current),u)break;return null;case 22:return o.lanes=0,dm(n,o,r,o.pendingProps);case 24:Wi(o,qt,n.memoizedState.cache)}return Ni(n,o,r)}function Sm(n,o,r){if(n!==null)if(n.memoizedProps!==o.pendingProps)Bt=!0;else{if(!$c(n,r)&&(o.flags&128)===0)return Bt=!1,NS(n,o,r);Bt=(n.flags&131072)!==0}else Bt=!1,je&&(o.flags&1048576)!==0&&jh(o,mr,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(n=Go(o.elementType),o.type=n,typeof n=="function")ec(n)?(u=Vo(n,u),o.tag=1,o=gm(null,o,n,u,r)):(o.tag=0,o=Vc(null,o,n,u,r));else{if(n!=null){var g=n.$$typeof;if(g===I){o.tag=11,o=um(null,o,n,u,r);break e}else if(g===k){o.tag=14,o=cm(null,o,n,u,r);break e}}throw o=q(n)||n,Error(l(306,o,""))}}return o;case 0:return Vc(n,o,o.type,o.pendingProps,r);case 1:return u=o.type,g=Vo(u,o.pendingProps),gm(n,o,u,g,r);case 3:e:{if(re(o,o.stateNode.containerInfo),n===null)throw Error(l(387));u=o.pendingProps;var v=o.memoizedState;g=v.element,mc(n,o),Cr(o,u,null,r);var C=o.memoizedState;if(u=C.cache,Wi(o,qt,u),u!==v.cache&&uc(o,[qt],r,!0),_r(),u=C.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=ym(n,o,u,r);break e}else if(u!==g){g=qn(Error(l(424)),o),gr(g),o=ym(n,o,u,r);break e}else{switch(n=o.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(xt=Fn(n.firstChild),tn=o,je=!0,Qi=null,Vn=!0,r=dp(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Lo(),u===g){o=Ni(n,o,r);break e}on(n,o,u,r)}o=o.child}return o;case 26:return ra(n,o),n===null?(r=Dg(o.type,null,o.pendingProps,null))?o.memoizedState=r:je||(r=o.type,n=o.pendingProps,u=Ca(me.current).createElement(r),u[gt]=o,u[Ut]=n,ln(u,r,n),Qt(u),o.stateNode=u):o.memoizedState=Dg(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Ve(o),n===null&&je&&(u=o.stateNode=Mg(o.type,o.pendingProps,me.current),tn=o,Vn=!0,g=xt,fo(o.type)?(Mf=g,xt=Fn(u.firstChild)):xt=g),on(n,o,o.pendingProps.children,r),ra(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&je&&((g=u=xt)&&(u=i_(u,o.type,o.pendingProps,Vn),u!==null?(o.stateNode=u,tn=o,xt=Fn(u.firstChild),Vn=!1,g=!0):g=!1),g||Zi(o)),Ve(o),g=o.type,v=o.pendingProps,C=n!==null?n.memoizedProps:null,u=v.children,Ef(g,v)?u=null:C!==null&&Ef(g,C)&&(o.flags|=32),o.memoizedState!==null&&(g=_c(n,o,vS,null,null,r),Or._currentValue=g),ra(n,o),on(n,o,u,r),o.child;case 6:return n===null&&je&&((n=r=xt)&&(r=o_(r,o.pendingProps,Vn),r!==null?(o.stateNode=r,tn=o,xt=null,n=!0):n=!1),n||Zi(o)),null;case 13:return vm(n,o,r);case 4:return re(o,o.stateNode.containerInfo),u=o.pendingProps,n===null?o.child=Po(o,null,u,r):on(n,o,u,r),o.child;case 11:return um(n,o,o.type,o.pendingProps,r);case 7:return on(n,o,o.pendingProps,r),o.child;case 8:return on(n,o,o.pendingProps.children,r),o.child;case 12:return on(n,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,Wi(o,o.type,u.value),on(n,o,u.children,r),o.child;case 9:return g=o.type._context,u=o.pendingProps.children,ko(o),g=nn(g),u=u(g),o.flags|=1,on(n,o,u,r),o.child;case 14:return cm(n,o,o.type,o.pendingProps,r);case 15:return fm(n,o,o.type,o.pendingProps,r);case 19:return Tm(n,o,r);case 31:return AS(n,o,r);case 22:return dm(n,o,r,o.pendingProps);case 24:return ko(o),u=nn(qt),n===null?(g=dc(),g===null&&(g=yt,v=cc(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=r),g=v),o.memoizedState={parent:u,cache:g},pc(o),Wi(o,qt,g)):((n.lanes&r)!==0&&(mc(n,o),Cr(o,null,null,r),_r()),g=n.memoizedState,v=o.memoizedState,g.parent!==u?(g={parent:u,cache:u},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Wi(o,qt,u)):(u=v.cache,Wi(o,qt,u),u!==g.cache&&uc(o,[qt],r,!0))),on(n,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(l(156,o.tag))}function bi(n){n.flags|=4}function Qc(n,o,r,u,g){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Xm())n.flags|=8192;else throw qo=Ys,hc}else n.flags&=-16777217}function _m(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!zg(o))if(Xm())n.flags|=8192;else throw qo=Ys,hc}function aa(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?Ji():536870912,n.lanes|=o,Il|=o)}function Mr(n,o){if(!je)switch(n.tailMode){case"hidden":o=n.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Tt(n){var o=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(o)for(var g=n.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=r,o}function bS(n,o,r){var u=o.pendingProps;switch(oc(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(o),null;case 1:return Tt(o),null;case 3:return r=o.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ei(qt),ye(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(vl(o)?bi(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,rc())),Tt(o),null;case 26:var g=o.type,v=o.memoizedState;return n===null?(bi(o),v!==null?(Tt(o),_m(o,v)):(Tt(o),Qc(o,g,null,u,r))):v?v!==n.memoizedState?(bi(o),Tt(o),_m(o,v)):(Tt(o),o.flags&=-16777217):(n=n.memoizedProps,n!==u&&bi(o),Tt(o),Qc(o,g,n,u,r)),null;case 27:if(Ke(o),r=me.current,g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&bi(o);else{if(!u){if(o.stateNode===null)throw Error(l(166));return Tt(o),null}n=ae.current,vl(o)?tp(o):(n=Mg(g,u,r),o.stateNode=n,bi(o))}return Tt(o),null;case 5:if(Ke(o),g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&bi(o);else{if(!u){if(o.stateNode===null)throw Error(l(166));return Tt(o),null}if(v=ae.current,vl(o))tp(o);else{var C=Ca(me.current);switch(v){case 1:v=C.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=C.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=C.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?C.createElement("select",{is:u.is}):C.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?C.createElement(g,{is:u.is}):C.createElement(g)}}v[gt]=o,v[Ut]=u;e:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)v.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break e;for(;C.sibling===null;){if(C.return===null||C.return===o)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=v;e:switch(ln(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&bi(o)}}return Tt(o),Qc(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,r),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==u&&bi(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(l(166));if(n=me.current,vl(o)){if(n=o.stateNode,r=o.memoizedProps,u=null,g=tn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[gt]=o,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||vg(n.nodeValue,r)),n||Zi(o,!0)}else n=Ca(n).createTextNode(u),n[gt]=o,o.stateNode=n}return Tt(o),null;case 31:if(r=o.memoizedState,n===null||n.memoizedState!==null){if(u=vl(o),r!==null){if(n===null){if(!u)throw Error(l(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(l(557));n[gt]=o}else Lo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Tt(o),n=!1}else r=rc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return o.flags&256?(Mn(o),o):(Mn(o),null);if((o.flags&128)!==0)throw Error(l(558))}return Tt(o),null;case 13:if(u=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=vl(o),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(l(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(l(317));g[gt]=o}else Lo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Tt(o),g=!1}else g=rc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Mn(o),o):(Mn(o),null)}return Mn(o),(o.flags&128)!==0?(o.lanes=r,o):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=o.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),r!==n&&r&&(o.child.flags|=8192),aa(o,o.updateQueue),Tt(o),null);case 4:return ye(),n===null&&xf(o.stateNode.containerInfo),Tt(o),null;case 10:return Ei(o.type),Tt(o),null;case 19:if(B(Lt),u=o.memoizedState,u===null)return Tt(o),null;if(g=(o.flags&128)!==0,v=u.rendering,v===null)if(g)Mr(u,!1);else{if(Dt!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(v=$s(n),v!==null){for(o.flags|=128,Mr(u,!1),n=v.updateQueue,o.updateQueue=n,aa(o,n),o.subtreeFlags=0,n=r,r=o.child;r!==null;)Qh(r,n),r=r.sibling;return ee(Lt,Lt.current&1|2),je&&_i(o,u.treeForkCount),o.child}n=n.sibling}u.tail!==null&&At()>ha&&(o.flags|=128,g=!0,Mr(u,!1),o.lanes=4194304)}else{if(!g)if(n=$s(v),n!==null){if(o.flags|=128,g=!0,n=n.updateQueue,o.updateQueue=n,aa(o,n),Mr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!je)return Tt(o),null}else 2*At()-u.renderingStartTime>ha&&r!==536870912&&(o.flags|=128,g=!0,Mr(u,!1),o.lanes=4194304);u.isBackwards?(v.sibling=o.child,o.child=v):(n=u.last,n!==null?n.sibling=v:o.child=v,u.last=v)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=At(),n.sibling=null,r=Lt.current,ee(Lt,g?r&1|2:r&1),je&&_i(o,u.treeForkCount),n):(Tt(o),null);case 22:case 23:return Mn(o),xc(),u=o.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&(Tt(o),o.subtreeFlags&6&&(o.flags|=8192)):Tt(o),r=o.updateQueue,r!==null&&aa(o,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),n!==null&&B(zo),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),Ei(qt),Tt(o),null;case 25:return null;case 30:return null}throw Error(l(156,o.tag))}function MS(n,o){switch(oc(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Ei(qt),ye(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return Ke(o),null;case 31:if(o.memoizedState!==null){if(Mn(o),o.alternate===null)throw Error(l(340));Lo()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if(Mn(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(l(340));Lo()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return B(Lt),null;case 4:return ye(),null;case 10:return Ei(o.type),null;case 22:case 23:return Mn(o),xc(),n!==null&&B(zo),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return Ei(qt),null;case 25:return null;default:return null}}function Cm(n,o){switch(oc(o),o.tag){case 3:Ei(qt),ye();break;case 26:case 27:case 5:Ke(o);break;case 4:ye();break;case 31:o.memoizedState!==null&&Mn(o);break;case 13:Mn(o);break;case 19:B(Lt);break;case 10:Ei(o.type);break;case 22:case 23:Mn(o),xc(),n!==null&&B(zo);break;case 24:Ei(qt)}}function Rr(n,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var g=u.next;r=g;do{if((r.tag&n)===n){u=void 0;var v=r.create,C=r.inst;u=v(),C.destroy=u}r=r.next}while(r!==g)}}catch(b){ft(o,o.return,b)}}function oo(n,o,r){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&n)===n){var C=u.inst,b=C.destroy;if(b!==void 0){C.destroy=void 0,g=o;var z=r,X=b;try{X()}catch(ne){ft(g,z,ne)}}}u=u.next}while(u!==v)}}catch(ne){ft(o,o.return,ne)}}function Em(n){var o=n.updateQueue;if(o!==null){var r=n.stateNode;try{pp(o,r)}catch(u){ft(n,n.return,u)}}}function wm(n,o,r){r.props=Vo(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){ft(n,o,u)}}function Ir(n,o){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(g){ft(n,o,g)}}function ci(n,o){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(g){ft(n,o,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){ft(n,o,g)}else r.current=null}function Am(n){var o=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(g){ft(n,n.return,g)}}function Zc(n,o,r){try{var u=n.stateNode;ZS(u,n.type,r,o),u[Ut]=o}catch(g){ft(n,n.return,g)}}function Nm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&fo(n.type)||n.tag===4}function Wc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Nm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&fo(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jc(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(n),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=xi));else if(u!==4&&(u===27&&fo(n.type)&&(r=n.stateNode,o=null),n=n.child,n!==null))for(jc(n,o,r),n=n.sibling;n!==null;)jc(n,o,r),n=n.sibling}function ua(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?r.insertBefore(n,o):r.appendChild(n);else if(u!==4&&(u===27&&fo(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(ua(n,o,r),n=n.sibling;n!==null;)ua(n,o,r),n=n.sibling}function bm(n){var o=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);ln(o,u,r),o[gt]=n,o[Ut]=r}catch(v){ft(n,n.return,v)}}var Mi=!1,Vt=!1,ef=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function RS(n,o){if(n=n.containerInfo,_f=Ra,n=Bh(n),Ku(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break e}var C=0,b=-1,z=-1,X=0,ne=0,se=n,$=null;t:for(;;){for(var W;se!==r||g!==0&&se.nodeType!==3||(b=C+g),se!==v||u!==0&&se.nodeType!==3||(z=C+u),se.nodeType===3&&(C+=se.nodeValue.length),(W=se.firstChild)!==null;)$=se,se=W;for(;;){if(se===n)break t;if($===r&&++X===g&&(b=C),$===v&&++ne===u&&(z=C),(W=se.nextSibling)!==null)break;se=$,$=se.parentNode}se=W}r=b===-1||z===-1?null:{start:b,end:z}}else r=null}r=r||{start:0,end:0}}else r=null;for(Cf={focusedElem:n,selectionRange:r},Ra=!1,Zt=o;Zt!==null;)if(o=Zt,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Zt=n;else for(;Zt!==null;){switch(o=Zt,v=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)g=n[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,r=o,g=v.memoizedProps,v=v.memoizedState,u=r.stateNode;try{var Ee=Vo(r.type,g);n=u.getSnapshotBeforeUpdate(Ee,v),u.__reactInternalSnapshotBeforeUpdate=n}catch(De){ft(r,r.return,De)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,r=n.nodeType,r===9)Af(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Af(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(l(163))}if(n=o.sibling,n!==null){n.return=o.return,Zt=n;break}Zt=o.return}}function Rm(n,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Ii(n,r),u&4&&Rr(5,r);break;case 1:if(Ii(n,r),u&4)if(n=r.stateNode,o===null)try{n.componentDidMount()}catch(C){ft(r,r.return,C)}else{var g=Vo(r.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(g,o,n.__reactInternalSnapshotBeforeUpdate)}catch(C){ft(r,r.return,C)}}u&64&&Em(r),u&512&&Ir(r,r.return);break;case 3:if(Ii(n,r),u&64&&(n=r.updateQueue,n!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{pp(n,o)}catch(C){ft(r,r.return,C)}}break;case 27:o===null&&u&4&&bm(r);case 26:case 5:Ii(n,r),o===null&&u&4&&Am(r),u&512&&Ir(r,r.return);break;case 12:Ii(n,r);break;case 31:Ii(n,r),u&4&&Um(n,r);break;case 13:Ii(n,r),u&4&&Lm(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=qS.bind(null,r),l_(n,r))));break;case 22:if(u=r.memoizedState!==null||Mi,!u){o=o!==null&&o.memoizedState!==null||Vt,g=Mi;var v=Vt;Mi=u,(Vt=o)&&!v?Di(n,r,(r.subtreeFlags&8772)!==0):Ii(n,r),Mi=g,Vt=v}break;case 30:break;default:Ii(n,r)}}function Im(n){var o=n.alternate;o!==null&&(n.alternate=null,Im(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&Ru(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Nt=null,xn=!1;function Ri(n,o,r){for(r=r.child;r!==null;)Dm(n,o,r),r=r.sibling}function Dm(n,o,r){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Pe,r)}catch{}switch(r.tag){case 26:Vt||ci(r,o),Ri(n,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Vt||ci(r,o);var u=Nt,g=xn;fo(r.type)&&(Nt=r.stateNode,xn=!1),Ri(n,o,r),Pr(r.stateNode),Nt=u,xn=g;break;case 5:Vt||ci(r,o);case 6:if(u=Nt,g=xn,Nt=null,Ri(n,o,r),Nt=u,xn=g,Nt!==null)if(xn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(r.stateNode)}catch(v){ft(r,o,v)}else try{Nt.removeChild(r.stateNode)}catch(v){ft(r,o,v)}break;case 18:Nt!==null&&(xn?(n=Nt,Eg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),ql(n)):Eg(Nt,r.stateNode));break;case 4:u=Nt,g=xn,Nt=r.stateNode.containerInfo,xn=!0,Ri(n,o,r),Nt=u,xn=g;break;case 0:case 11:case 14:case 15:oo(2,r,o),Vt||oo(4,r,o),Ri(n,o,r);break;case 1:Vt||(ci(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&wm(r,o,u)),Ri(n,o,r);break;case 21:Ri(n,o,r);break;case 22:Vt=(u=Vt)||r.memoizedState!==null,Ri(n,o,r),Vt=u;break;default:Ri(n,o,r)}}function Um(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ql(n)}catch(r){ft(o,o.return,r)}}}function Lm(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ql(n)}catch(r){ft(o,o.return,r)}}function IS(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new Mm),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new Mm),o;default:throw Error(l(435,n.tag))}}function ca(n,o){var r=IS(n);o.forEach(function(u){if(!r.has(u)){r.add(u);var g=PS.bind(null,n,u);u.then(g,g)}})}function Tn(n,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var g=r[u],v=n,C=o,b=C;e:for(;b!==null;){switch(b.tag){case 27:if(fo(b.type)){Nt=b.stateNode,xn=!1;break e}break;case 5:Nt=b.stateNode,xn=!1;break e;case 3:case 4:Nt=b.stateNode.containerInfo,xn=!0;break e}b=b.return}if(Nt===null)throw Error(l(160));Dm(v,C,g),Nt=null,xn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Hm(o,n),o=o.sibling}var Zn=null;function Hm(n,o){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Tn(o,n),Sn(n),u&4&&(oo(3,n,n.return),Rr(3,n),oo(5,n,n.return));break;case 1:Tn(o,n),Sn(n),u&512&&(Vt||r===null||ci(r,r.return)),u&64&&Mi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var g=Zn;if(Tn(o,n),Sn(n),u&512&&(Vt||r===null||ci(r,r.return)),u&4){var v=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[or]||v[gt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),ln(v,u,r),v[gt]=n,Qt(v),u=v;break e;case"link":var C=Hg("link","href",g).get(u+(r.href||""));if(C){for(var b=0;b<C.length;b++)if(v=C[b],v.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&v.getAttribute("rel")===(r.rel==null?null:r.rel)&&v.getAttribute("title")===(r.title==null?null:r.title)&&v.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){C.splice(b,1);break t}}v=g.createElement(u),ln(v,u,r),g.head.appendChild(v);break;case"meta":if(C=Hg("meta","content",g).get(u+(r.content||""))){for(b=0;b<C.length;b++)if(v=C[b],v.getAttribute("content")===(r.content==null?null:""+r.content)&&v.getAttribute("name")===(r.name==null?null:r.name)&&v.getAttribute("property")===(r.property==null?null:r.property)&&v.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&v.getAttribute("charset")===(r.charSet==null?null:r.charSet)){C.splice(b,1);break t}}v=g.createElement(u),ln(v,u,r),g.head.appendChild(v);break;default:throw Error(l(468,u))}v[gt]=n,Qt(v),u=v}n.stateNode=u}else kg(g,n.type,n.stateNode);else n.stateNode=Lg(g,u,n.memoizedProps);else v!==u?(v===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):v.count--,u===null?kg(g,n.type,n.stateNode):Lg(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Zc(n,n.memoizedProps,r.memoizedProps)}break;case 27:Tn(o,n),Sn(n),u&512&&(Vt||r===null||ci(r,r.return)),r!==null&&u&4&&Zc(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Tn(o,n),Sn(n),u&512&&(Vt||r===null||ci(r,r.return)),n.flags&32){g=n.stateNode;try{al(g,"")}catch(Ee){ft(n,n.return,Ee)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,Zc(n,g,r!==null?r.memoizedProps:g)),u&1024&&(ef=!0);break;case 6:if(Tn(o,n),Sn(n),u&4){if(n.stateNode===null)throw Error(l(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(Ee){ft(n,n.return,Ee)}}break;case 3:if(Aa=null,g=Zn,Zn=Ea(o.containerInfo),Tn(o,n),Zn=g,Sn(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{ql(o.containerInfo)}catch(Ee){ft(n,n.return,Ee)}ef&&(ef=!1,km(n));break;case 4:u=Zn,Zn=Ea(n.stateNode.containerInfo),Tn(o,n),Sn(n),Zn=u;break;case 12:Tn(o,n),Sn(n);break;case 31:Tn(o,n),Sn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ca(n,u)));break;case 13:Tn(o,n),Sn(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(da=At()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ca(n,u)));break;case 22:g=n.memoizedState!==null;var z=r!==null&&r.memoizedState!==null,X=Mi,ne=Vt;if(Mi=X||g,Vt=ne||z,Tn(o,n),Vt=ne,Mi=X,Sn(n),u&8192)e:for(o=n.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(r===null||z||Mi||Vt||Oo(n)),r=null,o=n;;){if(o.tag===5||o.tag===26){if(r===null){z=r=o;try{if(v=z.stateNode,g)C=v.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{b=z.stateNode;var se=z.memoizedProps.style,$=se!=null&&se.hasOwnProperty("display")?se.display:null;b.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Ee){ft(z,z.return,Ee)}}}else if(o.tag===6){if(r===null){z=o;try{z.stateNode.nodeValue=g?"":z.memoizedProps}catch(Ee){ft(z,z.return,Ee)}}}else if(o.tag===18){if(r===null){z=o;try{var W=z.stateNode;g?wg(W,!0):wg(z.stateNode,!1)}catch(Ee){ft(z,z.return,Ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,ca(n,r))));break;case 19:Tn(o,n),Sn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ca(n,u)));break;case 30:break;case 21:break;default:Tn(o,n),Sn(n)}}function Sn(n){var o=n.flags;if(o&2){try{for(var r,u=n.return;u!==null;){if(Nm(u)){r=u;break}u=u.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var g=r.stateNode,v=Wc(n);ua(n,v,g);break;case 5:var C=r.stateNode;r.flags&32&&(al(C,""),r.flags&=-33);var b=Wc(n);ua(n,b,C);break;case 3:case 4:var z=r.stateNode.containerInfo,X=Wc(n);jc(n,X,z);break;default:throw Error(l(161))}}catch(ne){ft(n,n.return,ne)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function km(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;km(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function Ii(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Rm(n,o.alternate,o),o=o.sibling}function Oo(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:oo(4,o,o.return),Oo(o);break;case 1:ci(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&wm(o,o.return,r),Oo(o);break;case 27:Pr(o.stateNode);case 26:case 5:ci(o,o.return),Oo(o);break;case 22:o.memoizedState===null&&Oo(o);break;case 30:Oo(o);break;default:Oo(o)}n=n.sibling}}function Di(n,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,g=n,v=o,C=v.flags;switch(v.tag){case 0:case 11:case 15:Di(g,v,r),Rr(4,v);break;case 1:if(Di(g,v,r),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(X){ft(u,u.return,X)}if(u=v,g=u.updateQueue,g!==null){var b=u.stateNode;try{var z=g.shared.hiddenCallbacks;if(z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<z.length;g++)hp(z[g],b)}catch(X){ft(u,u.return,X)}}r&&C&64&&Em(v),Ir(v,v.return);break;case 27:bm(v);case 26:case 5:Di(g,v,r),r&&u===null&&C&4&&Am(v),Ir(v,v.return);break;case 12:Di(g,v,r);break;case 31:Di(g,v,r),r&&C&4&&Um(g,v);break;case 13:Di(g,v,r),r&&C&4&&Lm(g,v);break;case 22:v.memoizedState===null&&Di(g,v,r),Ir(v,v.return);break;case 30:break;default:Di(g,v,r)}o=o.sibling}}function tf(n,o){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&yr(r))}function nf(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&yr(n))}function Wn(n,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)zm(n,o,r,u),o=o.sibling}function zm(n,o,r,u){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Wn(n,o,r,u),g&2048&&Rr(9,o);break;case 1:Wn(n,o,r,u);break;case 3:Wn(n,o,r,u),g&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&yr(n)));break;case 12:if(g&2048){Wn(n,o,r,u),n=o.stateNode;try{var v=o.memoizedProps,C=v.id,b=v.onPostCommit;typeof b=="function"&&b(C,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(z){ft(o,o.return,z)}}else Wn(n,o,r,u);break;case 31:Wn(n,o,r,u);break;case 13:Wn(n,o,r,u);break;case 23:break;case 22:v=o.stateNode,C=o.alternate,o.memoizedState!==null?v._visibility&2?Wn(n,o,r,u):Dr(n,o):v._visibility&2?Wn(n,o,r,u):(v._visibility|=2,bl(n,o,r,u,(o.subtreeFlags&10256)!==0||!1)),g&2048&&tf(C,o);break;case 24:Wn(n,o,r,u),g&2048&&nf(o.alternate,o);break;default:Wn(n,o,r,u)}}function bl(n,o,r,u,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=n,C=o,b=r,z=u,X=C.flags;switch(C.tag){case 0:case 11:case 15:bl(v,C,b,z,g),Rr(8,C);break;case 23:break;case 22:var ne=C.stateNode;C.memoizedState!==null?ne._visibility&2?bl(v,C,b,z,g):Dr(v,C):(ne._visibility|=2,bl(v,C,b,z,g)),g&&X&2048&&tf(C.alternate,C);break;case 24:bl(v,C,b,z,g),g&&X&2048&&nf(C.alternate,C);break;default:bl(v,C,b,z,g)}o=o.sibling}}function Dr(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=n,u=o,g=u.flags;switch(u.tag){case 22:Dr(r,u),g&2048&&tf(u.alternate,u);break;case 24:Dr(r,u),g&2048&&nf(u.alternate,u);break;default:Dr(r,u)}o=o.sibling}}var Ur=8192;function Ml(n,o,r){if(n.subtreeFlags&Ur)for(n=n.child;n!==null;)Gm(n,o,r),n=n.sibling}function Gm(n,o,r){switch(n.tag){case 26:Ml(n,o,r),n.flags&Ur&&n.memoizedState!==null&&y_(r,Zn,n.memoizedState,n.memoizedProps);break;case 5:Ml(n,o,r);break;case 3:case 4:var u=Zn;Zn=Ea(n.stateNode.containerInfo),Ml(n,o,r),Zn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Ur,Ur=16777216,Ml(n,o,r),Ur=u):Ml(n,o,r));break;default:Ml(n,o,r)}}function qm(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Lr(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];Zt=u,Bm(u,n)}qm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Pm(n),n=n.sibling}function Pm(n){switch(n.tag){case 0:case 11:case 15:Lr(n),n.flags&2048&&oo(9,n,n.return);break;case 3:Lr(n);break;case 12:Lr(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,fa(n)):Lr(n);break;default:Lr(n)}}function fa(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];Zt=u,Bm(u,n)}qm(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:oo(8,o,o.return),fa(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,fa(o));break;default:fa(o)}n=n.sibling}}function Bm(n,o){for(;Zt!==null;){var r=Zt;switch(r.tag){case 0:case 11:case 15:oo(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:yr(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,Zt=u;else e:for(r=n;Zt!==null;){u=Zt;var g=u.sibling,v=u.return;if(Im(u),u===r){Zt=null;break e}if(g!==null){g.return=v,Zt=g;break e}Zt=v}}}var DS={getCacheForType:function(n){var o=nn(qt),r=o.data.get(n);return r===void 0&&(r=n(),o.data.set(n,r)),r},cacheSignal:function(){return nn(qt).controller.signal}},US=typeof WeakMap=="function"?WeakMap:Map,st=0,yt=null,$e=null,Ze=0,ct=0,Rn=null,lo=!1,Rl=!1,of=!1,Ui=0,Dt=0,ro=0,Fo=0,lf=0,In=0,Il=0,Hr=null,_n=null,rf=!1,da=0,Vm=0,ha=1/0,pa=null,so=null,Kt=0,ao=null,Dl=null,Li=0,sf=0,af=null,Om=null,kr=0,uf=null;function Dn(){return(st&2)!==0&&Ze!==0?Ze&-Ze:L.T!==null?mf():tt()}function Fm(){if(In===0)if((Ze&536870912)===0||je){var n=jo;jo<<=1,(jo&3932160)===0&&(jo=262144),In=n}else In=536870912;return n=bn.current,n!==null&&(n.flags|=32),In}function Cn(n,o,r){(n===yt&&(ct===2||ct===9)||n.cancelPendingCommit!==null)&&(Ul(n,0),uo(n,Ze,In,!1)),Ki(n,r),((st&2)===0||n!==yt)&&(n===yt&&((st&2)===0&&(Fo|=r),Dt===4&&uo(n,Ze,In,!1)),fi(n))}function Ym(n,o,r){if((st&6)!==0)throw Error(l(327));var u=!r&&(o&127)===0&&(o&n.expiredLanes)===0||No(n,o),g=u?kS(n,o):ff(n,o,!0),v=u;do{if(g===0){Rl&&!u&&uo(n,o,0,!1);break}else{if(r=n.current.alternate,v&&!LS(r)){g=ff(n,o,!1),v=!1;continue}if(g===2){if(v=o,n.errorRecoveryDisabledLanes&v)var C=0;else C=n.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var b=n;g=Hr;var z=b.current.memoizedState.isDehydrated;if(z&&(Ul(b,C).flags|=256),C=ff(b,C,!1),C!==2){if(of&&!z){b.errorRecoveryDisabledLanes|=v,Fo|=v,g=4;break e}v=_n,_n=g,v!==null&&(_n===null?_n=v:_n.push.apply(_n,v))}g=C}if(v=!1,g!==2)continue}}if(g===1){Ul(n,0),uo(n,o,0,!0);break}e:{switch(u=n,v=g,v){case 0:case 1:throw Error(l(345));case 4:if((o&4194048)!==o)break;case 6:uo(u,o,In,!lo);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(l(329))}if((o&62914560)===o&&(g=da+300-At(),10<g)){if(uo(u,o,In,!lo),tl(u,0,!0)!==0)break e;Li=o,u.timeoutHandle=_g(Jm.bind(null,u,r,_n,pa,rf,o,In,Fo,Il,lo,v,"Throttled",-0,0),g);break e}Jm(u,r,_n,pa,rf,o,In,Fo,Il,lo,v,null,-0,0)}}break}while(!0);fi(n)}function Jm(n,o,r,u,g,v,C,b,z,X,ne,se,$,W){if(n.timeoutHandle=-1,se=o.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xi},Gm(o,v,se);var Ee=(v&62914560)===v?da-At():(v&4194048)===v?Vm-At():0;if(Ee=v_(se,Ee),Ee!==null){Li=v,n.cancelPendingCommit=Ee(eg.bind(null,n,o,v,r,u,g,C,b,z,ne,se,null,$,W)),uo(n,v,C,!X);return}}eg(n,o,v,r,u,g,C,b,z)}function LS(n){for(var o=n;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var g=r[u],v=g.getSnapshot;g=g.value;try{if(!An(v(),g))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function uo(n,o,r,u){o&=~lf,o&=~Fo,n.suspendedLanes|=o,n.pingedLanes&=~o,u&&(n.warmLanes|=o),u=n.expirationTimes;for(var g=o;0<g;){var v=31-Ie(g),C=1<<v;u[v]=-1,g&=~C}r!==0&&Es(n,r,o)}function ma(){return(st&6)===0?(zr(0),!1):!0}function cf(){if($e!==null){if(ct===0)var n=$e.return;else n=$e,Ci=Ho=null,wc(n),Cl=null,xr=0,n=$e;for(;n!==null;)Cm(n.alternate,n),n=n.return;$e=null}}function Ul(n,o){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,e_(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Li=0,cf(),yt=n,$e=r=Si(n.current,null),Ze=o,ct=0,Rn=null,lo=!1,Rl=No(n,o),of=!1,Il=In=lf=Fo=ro=Dt=0,_n=Hr=null,rf=!1,(o&8)!==0&&(o|=o&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=o;0<u;){var g=31-Ie(u),v=1<<g;o|=n[g],u&=~v}return Ui=o,ks(),r}function Km(n,o){Be=null,L.H=Nr,o===_l||o===Fs?(o=up(),ct=3):o===hc?(o=up(),ct=4):ct=o===Bc?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Rn=o,$e===null&&(Dt=1,oa(n,qn(o,n.current)))}function Xm(){var n=bn.current;return n===null?!0:(Ze&4194048)===Ze?On===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?n===On:!1}function $m(){var n=L.H;return L.H=Nr,n===null?Nr:n}function Qm(){var n=L.A;return L.A=DS,n}function ga(){Dt=4,lo||(Ze&4194048)!==Ze&&bn.current!==null||(Rl=!0),(ro&134217727)===0&&(Fo&134217727)===0||yt===null||uo(yt,Ze,In,!1)}function ff(n,o,r){var u=st;st|=2;var g=$m(),v=Qm();(yt!==n||Ze!==o)&&(pa=null,Ul(n,o)),o=!1;var C=Dt;e:do try{if(ct!==0&&$e!==null){var b=$e,z=Rn;switch(ct){case 8:cf(),C=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(o=!0);var X=ct;if(ct=0,Rn=null,Ll(n,b,z,X),r&&Rl){C=0;break e}break;default:X=ct,ct=0,Rn=null,Ll(n,b,z,X)}}HS(),C=Dt;break}catch(ne){Km(n,ne)}while(!0);return o&&n.shellSuspendCounter++,Ci=Ho=null,st=u,L.H=g,L.A=v,$e===null&&(yt=null,Ze=0,ks()),C}function HS(){for(;$e!==null;)Zm($e)}function kS(n,o){var r=st;st|=2;var u=$m(),g=Qm();yt!==n||Ze!==o?(pa=null,ha=At()+500,Ul(n,o)):Rl=No(n,o);e:do try{if(ct!==0&&$e!==null){o=$e;var v=Rn;t:switch(ct){case 1:ct=0,Rn=null,Ll(n,o,v,1);break;case 2:case 9:if(sp(v)){ct=0,Rn=null,Wm(o);break}o=function(){ct!==2&&ct!==9||yt!==n||(ct=7),fi(n)},v.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:sp(v)?(ct=0,Rn=null,Wm(o)):(ct=0,Rn=null,Ll(n,o,v,7));break;case 5:var C=null;switch($e.tag){case 26:C=$e.memoizedState;case 5:case 27:var b=$e;if(C?zg(C):b.stateNode.complete){ct=0,Rn=null;var z=b.sibling;if(z!==null)$e=z;else{var X=b.return;X!==null?($e=X,ya(X)):$e=null}break t}}ct=0,Rn=null,Ll(n,o,v,5);break;case 6:ct=0,Rn=null,Ll(n,o,v,6);break;case 8:cf(),Dt=6;break e;default:throw Error(l(462))}}zS();break}catch(ne){Km(n,ne)}while(!0);return Ci=Ho=null,L.H=u,L.A=g,st=r,$e!==null?0:(yt=null,Ze=0,ks(),Dt)}function zS(){for(;$e!==null&&!Fi();)Zm($e)}function Zm(n){var o=Sm(n.alternate,n,Ui);n.memoizedProps=n.pendingProps,o===null?ya(n):$e=o}function Wm(n){var o=n,r=o.alternate;switch(o.tag){case 15:case 0:o=mm(r,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=mm(r,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:wc(o);default:Cm(r,o),o=$e=Qh(o,Ui),o=Sm(r,o,Ui)}n.memoizedProps=n.pendingProps,o===null?ya(n):$e=o}function Ll(n,o,r,u){Ci=Ho=null,wc(o),Cl=null,xr=0;var g=o.return;try{if(wS(n,g,o,r,Ze)){Dt=1,oa(n,qn(r,n.current)),$e=null;return}}catch(v){if(g!==null)throw $e=g,v;Dt=1,oa(n,qn(r,n.current)),$e=null;return}o.flags&32768?(je||u===1?n=!0:Rl||(Ze&536870912)!==0?n=!1:(lo=n=!0,(u===2||u===9||u===3||u===6)&&(u=bn.current,u!==null&&u.tag===13&&(u.flags|=16384))),jm(o,n)):ya(o)}function ya(n){var o=n;do{if((o.flags&32768)!==0){jm(o,lo);return}n=o.return;var r=bS(o.alternate,o,Ui);if(r!==null){$e=r;return}if(o=o.sibling,o!==null){$e=o;return}$e=o=n}while(o!==null);Dt===0&&(Dt=5)}function jm(n,o){do{var r=MS(n.alternate,n);if(r!==null){r.flags&=32767,$e=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(n=n.sibling,n!==null)){$e=n;return}$e=n=r}while(n!==null);Dt=6,$e=null}function eg(n,o,r,u,g,v,C,b,z){n.cancelPendingCommit=null;do va();while(Kt!==0);if((st&6)!==0)throw Error(l(327));if(o!==null){if(o===n.current)throw Error(l(177));if(v=o.lanes|o.childLanes,v|=Wu,nl(n,r,v,C,b,z),n===yt&&($e=yt=null,Ze=0),Dl=o,ao=n,Li=r,sf=v,af=g,Om=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,BS(nt,function(){return lg(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=L.T,L.T=null,g=O.p,O.p=2,C=st,st|=4;try{RS(n,o,r)}finally{st=C,O.p=g,L.T=u}}Kt=1,tg(),ng(),ig()}}function tg(){if(Kt===1){Kt=0;var n=ao,o=Dl,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=L.T,L.T=null;var u=O.p;O.p=2;var g=st;st|=4;try{Hm(o,n);var v=Cf,C=Bh(n.containerInfo),b=v.focusedElem,z=v.selectionRange;if(C!==b&&b&&b.ownerDocument&&Ph(b.ownerDocument.documentElement,b)){if(z!==null&&Ku(b)){var X=z.start,ne=z.end;if(ne===void 0&&(ne=X),"selectionStart"in b)b.selectionStart=X,b.selectionEnd=Math.min(ne,b.value.length);else{var se=b.ownerDocument||document,$=se&&se.defaultView||window;if($.getSelection){var W=$.getSelection(),Ee=b.textContent.length,De=Math.min(z.start,Ee),pt=z.end===void 0?De:Math.min(z.end,Ee);!W.extend&&De>pt&&(C=pt,pt=De,De=C);var V=qh(b,De),G=qh(b,pt);if(V&&G&&(W.rangeCount!==1||W.anchorNode!==V.node||W.anchorOffset!==V.offset||W.focusNode!==G.node||W.focusOffset!==G.offset)){var K=se.createRange();K.setStart(V.node,V.offset),W.removeAllRanges(),De>pt?(W.addRange(K),W.extend(G.node,G.offset)):(K.setEnd(G.node,G.offset),W.addRange(K))}}}}for(se=[],W=b;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<se.length;b++){var le=se[b];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Ra=!!_f,Cf=_f=null}finally{st=g,O.p=u,L.T=r}}n.current=o,Kt=2}}function ng(){if(Kt===2){Kt=0;var n=ao,o=Dl,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=L.T,L.T=null;var u=O.p;O.p=2;var g=st;st|=4;try{Rm(n,o.alternate,o)}finally{st=g,O.p=u,L.T=r}}Kt=3}}function ig(){if(Kt===4||Kt===3){Kt=0,$n();var n=ao,o=Dl,r=Li,u=Om;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Kt=5:(Kt=0,Dl=ao=null,og(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(so=null),mt(r),o=o.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Pe,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=L.T,g=O.p,O.p=2,L.T=null;try{for(var v=n.onRecoverableError,C=0;C<u.length;C++){var b=u[C];v(b.value,{componentStack:b.stack})}}finally{L.T=o,O.p=g}}(Li&3)!==0&&va(),fi(n),g=n.pendingLanes,(r&261930)!==0&&(g&42)!==0?n===uf?kr++:(kr=0,uf=n):kr=0,zr(0)}}function og(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,yr(o)))}function va(){return tg(),ng(),ig(),lg()}function lg(){if(Kt!==5)return!1;var n=ao,o=sf;sf=0;var r=mt(Li),u=L.T,g=O.p;try{O.p=32>r?32:r,L.T=null,r=af,af=null;var v=ao,C=Li;if(Kt=0,Dl=ao=null,Li=0,(st&6)!==0)throw Error(l(331));var b=st;if(st|=4,Pm(v.current),zm(v,v.current,C,r),st=b,zr(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Pe,v)}catch{}return!0}finally{O.p=g,L.T=u,og(n,o)}}function rg(n,o,r){o=qn(r,o),o=Pc(n.stateNode,o,2),n=to(n,o,2),n!==null&&(Ki(n,2),fi(n))}function ft(n,o,r){if(n.tag===3)rg(n,n,r);else for(;o!==null;){if(o.tag===3){rg(o,n,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(so===null||!so.has(u))){n=qn(r,n),r=sm(2),u=to(o,r,2),u!==null&&(am(r,u,o,n),Ki(u,2),fi(u));break}}o=o.return}}function df(n,o,r){var u=n.pingCache;if(u===null){u=n.pingCache=new US;var g=new Set;u.set(o,g)}else g=u.get(o),g===void 0&&(g=new Set,u.set(o,g));g.has(r)||(of=!0,g.add(r),n=GS.bind(null,n,o,r),o.then(n,n))}function GS(n,o,r){var u=n.pingCache;u!==null&&u.delete(o),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,yt===n&&(Ze&r)===r&&(Dt===4||Dt===3&&(Ze&62914560)===Ze&&300>At()-da?(st&2)===0&&Ul(n,0):lf|=r,Il===Ze&&(Il=0)),fi(n)}function sg(n,o){o===0&&(o=Ji()),n=Do(n,o),n!==null&&(Ki(n,o),fi(n))}function qS(n){var o=n.memoizedState,r=0;o!==null&&(r=o.retryLane),sg(n,r)}function PS(n,o){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(r=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(l(314))}u!==null&&u.delete(o),sg(n,r)}function BS(n,o){return en(n,o)}var xa=null,Hl=null,hf=!1,Ta=!1,pf=!1,co=0;function fi(n){n!==Hl&&n.next===null&&(Hl===null?xa=Hl=n:Hl=Hl.next=n),Ta=!0,hf||(hf=!0,OS())}function zr(n,o){if(!pf&&Ta){pf=!0;do for(var r=!1,u=xa;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var C=u.suspendedLanes,b=u.pingedLanes;v=(1<<31-Ie(42|n)+1)-1,v&=g&~(C&~b),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(r=!0,fg(u,v))}else v=Ze,v=tl(u,u===yt?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||No(u,v)||(r=!0,fg(u,v));u=u.next}while(r);pf=!1}}function VS(){ag()}function ag(){Ta=hf=!1;var n=0;co!==0&&jS()&&(n=co);for(var o=At(),r=null,u=xa;u!==null;){var g=u.next,v=ug(u,o);v===0?(u.next=null,r===null?xa=g:r.next=g,g===null&&(Hl=r)):(r=u,(n!==0||(v&3)!==0)&&(Ta=!0)),u=g}Kt!==0&&Kt!==5||zr(n),co!==0&&(co=0)}function ug(n,o){for(var r=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var C=31-Ie(v),b=1<<C,z=g[C];z===-1?((b&r)===0||(b&u)!==0)&&(g[C]=nr(b,o)):z<=o&&(n.expiredLanes|=b),v&=~b}if(o=yt,r=Ze,r=tl(n,n===o?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===o&&(ct===2||ct===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&fn(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||No(n,r)){if(o=r&-r,o===n.callbackPriority)return o;switch(u!==null&&fn(u),mt(r)){case 2:case 8:r=we;break;case 32:r=nt;break;case 268435456:r=ue;break;default:r=nt}return u=cg.bind(null,n),r=en(r,u),n.callbackPriority=o,n.callbackNode=r,o}return u!==null&&u!==null&&fn(u),n.callbackPriority=2,n.callbackNode=null,2}function cg(n,o){if(Kt!==0&&Kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(va()&&n.callbackNode!==r)return null;var u=Ze;return u=tl(n,n===yt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Ym(n,u,o),ug(n,At()),n.callbackNode!=null&&n.callbackNode===r?cg.bind(null,n):null)}function fg(n,o){if(va())return null;Ym(n,o,!0)}function OS(){t_(function(){(st&6)!==0?en(Ne,VS):ag()})}function mf(){if(co===0){var n=Tl;n===0&&(n=yn,yn<<=1,(yn&261888)===0&&(yn=256)),co=n}return co}function dg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:bs(""+n)}function hg(n,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,n.id&&r.setAttribute("form",n.id),o.parentNode.insertBefore(r,o),n=new FormData(n),r.parentNode.removeChild(r),n}function FS(n,o,r,u,g){if(o==="submit"&&r&&r.stateNode===g){var v=dg((g[Ut]||null).action),C=u.submitter;C&&(o=(o=C[Ut]||null)?dg(o.formAction):C.getAttribute("formAction"),o!==null&&(v=o,C=null));var b=new Ds("action","action",null,u,g);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(co!==0){var z=C?hg(g,C):new FormData(g);Lc(r,{pending:!0,data:z,method:g.method,action:v},null,z)}}else typeof v=="function"&&(b.preventDefault(),z=C?hg(g,C):new FormData(g),Lc(r,{pending:!0,data:z,method:g.method,action:v},v,z))},currentTarget:g}]})}}for(var gf=0;gf<Zu.length;gf++){var yf=Zu[gf],YS=yf.toLowerCase(),JS=yf[0].toUpperCase()+yf.slice(1);Qn(YS,"on"+JS)}Qn(Fh,"onAnimationEnd"),Qn(Yh,"onAnimationIteration"),Qn(Jh,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(aS,"onTransitionRun"),Qn(uS,"onTransitionStart"),Qn(cS,"onTransitionCancel"),Qn(Kh,"onTransitionEnd"),rl("onMouseEnter",["mouseout","mouseover"]),rl("onMouseLeave",["mouseout","mouseover"]),rl("onPointerEnter",["pointerout","pointerover"]),rl("onPointerLeave",["pointerout","pointerover"]),bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bo("onBeforeInput",["compositionend","keypress","textInput","paste"]),bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gr));function pg(n,o){o=(o&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],g=u.event;u=u.listeners;e:{var v=void 0;if(o)for(var C=u.length-1;0<=C;C--){var b=u[C],z=b.instance,X=b.currentTarget;if(b=b.listener,z!==v&&g.isPropagationStopped())break e;v=b,g.currentTarget=X;try{v(g)}catch(ne){Hs(ne)}g.currentTarget=null,v=z}else for(C=0;C<u.length;C++){if(b=u[C],z=b.instance,X=b.currentTarget,b=b.listener,z!==v&&g.isPropagationStopped())break e;v=b,g.currentTarget=X;try{v(g)}catch(ne){Hs(ne)}g.currentTarget=null,v=z}}}}function Qe(n,o){var r=o[ir];r===void 0&&(r=o[ir]=new Set);var u=n+"__bubble";r.has(u)||(mg(o,n,2,!1),r.add(u))}function vf(n,o,r){var u=0;o&&(u|=4),mg(r,n,u,o)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function xf(n){if(!n[Sa]){n[Sa]=!0,ah.forEach(function(r){r!=="selectionchange"&&(KS.has(r)||vf(r,!1,n),vf(r,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Sa]||(o[Sa]=!0,vf("selectionchange",!1,o))}}function mg(n,o,r,u){switch(Fg(o)){case 2:var g=S_;break;case 8:g=__;break;default:g=Lf}r=g.bind(null,o,r,n),g=void 0,!Gu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(o,r,{capture:!0,passive:g}):n.addEventListener(o,r,!0):g!==void 0?n.addEventListener(o,r,{passive:g}):n.addEventListener(o,r,!1)}function Tf(n,o,r,u,g){var v=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var b=u.stateNode.containerInfo;if(b===g)break;if(C===4)for(C=u.return;C!==null;){var z=C.tag;if((z===3||z===4)&&C.stateNode.containerInfo===g)return;C=C.return}for(;b!==null;){if(C=il(b),C===null)return;if(z=C.tag,z===5||z===6||z===26||z===27){u=v=C;continue e}b=b.parentNode}}u=u.return}Th(function(){var X=v,ne=ku(r),se=[];e:{var $=Xh.get(n);if($!==void 0){var W=Ds,Ee=n;switch(n){case"keypress":if(Rs(r)===0)break e;case"keydown":case"keyup":W=PT;break;case"focusin":Ee="focus",W=Vu;break;case"focusout":Ee="blur",W=Vu;break;case"beforeblur":case"afterblur":W=Vu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Ch;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=bT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=OT;break;case Fh:case Yh:case Jh:W=IT;break;case Kh:W=YT;break;case"scroll":case"scrollend":W=AT;break;case"wheel":W=KT;break;case"copy":case"cut":case"paste":W=UT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=wh;break;case"toggle":case"beforetoggle":W=$T}var De=(o&4)!==0,pt=!De&&(n==="scroll"||n==="scrollend"),V=De?$!==null?$+"Capture":null:$;De=[];for(var G=X,K;G!==null;){var le=G;if(K=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||K===null||V===null||(le=rr(G,V),le!=null&&De.push(qr(G,le,K))),pt)break;G=G.return}0<De.length&&($=new W($,Ee,null,r,ne),se.push({event:$,listeners:De}))}}if((o&7)===0){e:{if($=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",$&&r!==Hu&&(Ee=r.relatedTarget||r.fromElement)&&(il(Ee)||Ee[wn]))break e;if((W||$)&&($=ne.window===ne?ne:($=ne.ownerDocument)?$.defaultView||$.parentWindow:window,W?(Ee=r.relatedTarget||r.toElement,W=X,Ee=Ee?il(Ee):null,Ee!==null&&(pt=a(Ee),De=Ee.tag,Ee!==pt||De!==5&&De!==27&&De!==6)&&(Ee=null)):(W=null,Ee=X),W!==Ee)){if(De=Ch,le="onMouseLeave",V="onMouseEnter",G="mouse",(n==="pointerout"||n==="pointerover")&&(De=wh,le="onPointerLeave",V="onPointerEnter",G="pointer"),pt=W==null?$:lr(W),K=Ee==null?$:lr(Ee),$=new De(le,G+"leave",W,r,ne),$.target=pt,$.relatedTarget=K,le=null,il(ne)===X&&(De=new De(V,G+"enter",Ee,r,ne),De.target=K,De.relatedTarget=pt,le=De),pt=le,W&&Ee)t:{for(De=XS,V=W,G=Ee,K=0,le=V;le;le=De(le))K++;le=0;for(var Me=G;Me;Me=De(Me))le++;for(;0<K-le;)V=De(V),K--;for(;0<le-K;)G=De(G),le--;for(;K--;){if(V===G||G!==null&&V===G.alternate){De=V;break t}V=De(V),G=De(G)}De=null}else De=null;W!==null&&gg(se,$,W,De,!1),Ee!==null&&pt!==null&&gg(se,pt,Ee,De,!0)}}e:{if($=X?lr(X):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var it=Uh;else if(Ih($))if(Lh)it=lS;else{it=iS;var Ae=nS}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?X&&Lu(X.elementType)&&(it=Uh):it=oS;if(it&&(it=it(n,X))){Dh(se,it,r,ne);break e}Ae&&Ae(n,$,X),n==="focusout"&&X&&$.type==="number"&&X.memoizedProps.value!=null&&Uu($,"number",$.value)}switch(Ae=X?lr(X):window,n){case"focusin":(Ih(Ae)||Ae.contentEditable==="true")&&(dl=Ae,Xu=X,pr=null);break;case"focusout":pr=Xu=dl=null;break;case"mousedown":$u=!0;break;case"contextmenu":case"mouseup":case"dragend":$u=!1,Vh(se,r,ne);break;case"selectionchange":if(sS)break;case"keydown":case"keyup":Vh(se,r,ne)}var Oe;if(Fu)e:{switch(n){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else fl?Mh(n,r)&&(We="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(We="onCompositionStart");We&&(Ah&&r.locale!=="ko"&&(fl||We!=="onCompositionStart"?We==="onCompositionEnd"&&fl&&(Oe=Sh()):(Xi=ne,qu="value"in Xi?Xi.value:Xi.textContent,fl=!0)),Ae=_a(X,We),0<Ae.length&&(We=new Eh(We,n,null,r,ne),se.push({event:We,listeners:Ae}),Oe?We.data=Oe:(Oe=Rh(r),Oe!==null&&(We.data=Oe)))),(Oe=ZT?WT(n,r):jT(n,r))&&(We=_a(X,"onBeforeInput"),0<We.length&&(Ae=new Eh("onBeforeInput","beforeinput",null,r,ne),se.push({event:Ae,listeners:We}),Ae.data=Oe)),FS(se,n,X,r,ne)}pg(se,o)})}function qr(n,o,r){return{instance:n,listener:o,currentTarget:r}}function _a(n,o){for(var r=o+"Capture",u=[];n!==null;){var g=n,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=rr(n,r),g!=null&&u.unshift(qr(n,g,v)),g=rr(n,o),g!=null&&u.push(qr(n,g,v))),n.tag===3)return u;n=n.return}return[]}function XS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function gg(n,o,r,u,g){for(var v=o._reactName,C=[];r!==null&&r!==u;){var b=r,z=b.alternate,X=b.stateNode;if(b=b.tag,z!==null&&z===u)break;b!==5&&b!==26&&b!==27||X===null||(z=X,g?(X=rr(r,v),X!=null&&C.unshift(qr(r,X,z))):g||(X=rr(r,v),X!=null&&C.push(qr(r,X,z)))),r=r.return}C.length!==0&&n.push({event:o,listeners:C})}var $S=/\r\n?/g,QS=/\u0000|\uFFFD/g;function yg(n){return(typeof n=="string"?n:""+n).replace($S,`
`).replace(QS,"")}function vg(n,o){return o=yg(o),yg(n)===o}function ht(n,o,r,u,g,v){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||al(n,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&al(n,""+u);break;case"className":As(n,"class",u);break;case"tabIndex":As(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":As(n,r,u);break;case"style":vh(n,u,v);break;case"data":if(o!=="object"){As(n,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=bs(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(r==="formAction"?(o!=="input"&&ht(n,o,"name",g.name,g,null),ht(n,o,"formEncType",g.formEncType,g,null),ht(n,o,"formMethod",g.formMethod,g,null),ht(n,o,"formTarget",g.formTarget,g,null)):(ht(n,o,"encType",g.encType,g,null),ht(n,o,"method",g.method,g,null),ht(n,o,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=bs(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=xi);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(l(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(l(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=bs(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),ws(n,"popover",u);break;case"xlinkActuate":vi(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":vi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":vi(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":vi(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":vi(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":vi(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":vi(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":vi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":vi(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ws(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=ET.get(r)||r,ws(n,r,u))}}function Sf(n,o,r,u,g,v){switch(r){case"style":vh(n,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(l(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(l(60));n.innerHTML=r}}break;case"children":typeof u=="string"?al(n,u):(typeof u=="number"||typeof u=="bigint")&&al(n,""+u);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uh.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),o=r.slice(2,g?r.length-7:void 0),v=n[Ut]||null,v=v!=null?v[r]:null,typeof v=="function"&&n.removeEventListener(o,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(o,u,g);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):ws(n,r,u)}}}function ln(n,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var u=!1,g=!1,v;for(v in r)if(r.hasOwnProperty(v)){var C=r[v];if(C!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,o));default:ht(n,o,v,C,r,null)}}g&&ht(n,o,"srcSet",r.srcSet,r,null),u&&ht(n,o,"src",r.src,r,null);return;case"input":Qe("invalid",n);var b=v=C=g=null,z=null,X=null;for(u in r)if(r.hasOwnProperty(u)){var ne=r[u];if(ne!=null)switch(u){case"name":g=ne;break;case"type":C=ne;break;case"checked":z=ne;break;case"defaultChecked":X=ne;break;case"value":v=ne;break;case"defaultValue":b=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(l(137,o));break;default:ht(n,o,u,ne,r,null)}}ph(n,v,b,z,X,C,g,!1);return;case"select":Qe("invalid",n),u=C=v=null;for(g in r)if(r.hasOwnProperty(g)&&(b=r[g],b!=null))switch(g){case"value":v=b;break;case"defaultValue":C=b;break;case"multiple":u=b;default:ht(n,o,g,b,r,null)}o=v,r=C,n.multiple=!!u,o!=null?sl(n,!!u,o,!1):r!=null&&sl(n,!!u,r,!0);return;case"textarea":Qe("invalid",n),v=g=u=null;for(C in r)if(r.hasOwnProperty(C)&&(b=r[C],b!=null))switch(C){case"value":u=b;break;case"defaultValue":g=b;break;case"children":v=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(l(91));break;default:ht(n,o,C,b,r,null)}gh(n,u,g,v);return;case"option":for(z in r)if(r.hasOwnProperty(z)&&(u=r[z],u!=null))switch(z){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ht(n,o,z,u,r,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(u=0;u<Gr.length;u++)Qe(Gr[u],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in r)if(r.hasOwnProperty(X)&&(u=r[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,o));default:ht(n,o,X,u,r,null)}return;default:if(Lu(o)){for(ne in r)r.hasOwnProperty(ne)&&(u=r[ne],u!==void 0&&Sf(n,o,ne,u,r,void 0));return}}for(b in r)r.hasOwnProperty(b)&&(u=r[b],u!=null&&ht(n,o,b,u,r,null))}function ZS(n,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,C=null,b=null,z=null,X=null,ne=null;for(W in r){var se=r[W];if(r.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":z=se;default:u.hasOwnProperty(W)||ht(n,o,W,null,u,se)}}for(var $ in u){var W=u[$];if(se=r[$],u.hasOwnProperty($)&&(W!=null||se!=null))switch($){case"type":v=W;break;case"name":g=W;break;case"checked":X=W;break;case"defaultChecked":ne=W;break;case"value":C=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(l(137,o));break;default:W!==se&&ht(n,o,$,W,u,se)}}Du(n,C,b,z,X,ne,v,g);return;case"select":W=C=b=$=null;for(v in r)if(z=r[v],r.hasOwnProperty(v)&&z!=null)switch(v){case"value":break;case"multiple":W=z;default:u.hasOwnProperty(v)||ht(n,o,v,null,u,z)}for(g in u)if(v=u[g],z=r[g],u.hasOwnProperty(g)&&(v!=null||z!=null))switch(g){case"value":$=v;break;case"defaultValue":b=v;break;case"multiple":C=v;default:v!==z&&ht(n,o,g,v,u,z)}o=b,r=C,u=W,$!=null?sl(n,!!r,$,!1):!!u!=!!r&&(o!=null?sl(n,!!r,o,!0):sl(n,!!r,r?[]:"",!1));return;case"textarea":W=$=null;for(b in r)if(g=r[b],r.hasOwnProperty(b)&&g!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ht(n,o,b,null,u,g)}for(C in u)if(g=u[C],v=r[C],u.hasOwnProperty(C)&&(g!=null||v!=null))switch(C){case"value":$=g;break;case"defaultValue":W=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(l(91));break;default:g!==v&&ht(n,o,C,g,u,v)}mh(n,$,W);return;case"option":for(var Ee in r)if($=r[Ee],r.hasOwnProperty(Ee)&&$!=null&&!u.hasOwnProperty(Ee))switch(Ee){case"selected":n.selected=!1;break;default:ht(n,o,Ee,null,u,$)}for(z in u)if($=u[z],W=r[z],u.hasOwnProperty(z)&&$!==W&&($!=null||W!=null))switch(z){case"selected":n.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ht(n,o,z,$,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in r)$=r[De],r.hasOwnProperty(De)&&$!=null&&!u.hasOwnProperty(De)&&ht(n,o,De,null,u,$);for(X in u)if($=u[X],W=r[X],u.hasOwnProperty(X)&&$!==W&&($!=null||W!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(l(137,o));break;default:ht(n,o,X,$,u,W)}return;default:if(Lu(o)){for(var pt in r)$=r[pt],r.hasOwnProperty(pt)&&$!==void 0&&!u.hasOwnProperty(pt)&&Sf(n,o,pt,void 0,u,$);for(ne in u)$=u[ne],W=r[ne],!u.hasOwnProperty(ne)||$===W||$===void 0&&W===void 0||Sf(n,o,ne,$,u,W);return}}for(var V in r)$=r[V],r.hasOwnProperty(V)&&$!=null&&!u.hasOwnProperty(V)&&ht(n,o,V,null,u,$);for(se in u)$=u[se],W=r[se],!u.hasOwnProperty(se)||$===W||$==null&&W==null||ht(n,o,se,$,u,W)}function xg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function WS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var g=r[u],v=g.transferSize,C=g.initiatorType,b=g.duration;if(v&&b&&xg(C)){for(C=0,b=g.responseEnd,u+=1;u<r.length;u++){var z=r[u],X=z.startTime;if(X>b)break;var ne=z.transferSize,se=z.initiatorType;ne&&xg(se)&&(z=z.responseEnd,C+=ne*(z<b?1:(b-X)/(z-X)))}if(--u,o+=8*(v+C)/(g.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var _f=null,Cf=null;function Ca(n){return n.nodeType===9?n:n.ownerDocument}function Tg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sg(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function Ef(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var wf=null;function jS(){var n=window.event;return n&&n.type==="popstate"?n===wf?!1:(wf=n,!0):(wf=null,!1)}var _g=typeof setTimeout=="function"?setTimeout:void 0,e_=typeof clearTimeout=="function"?clearTimeout:void 0,Cg=typeof Promise=="function"?Promise:void 0,t_=typeof queueMicrotask=="function"?queueMicrotask:typeof Cg<"u"?function(n){return Cg.resolve(null).then(n).catch(n_)}:_g;function n_(n){setTimeout(function(){throw n})}function fo(n){return n==="head"}function Eg(n,o){var r=o,u=0;do{var g=r.nextSibling;if(n.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(g),ql(o);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Pr(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Pr(r);for(var v=r.firstChild;v;){var C=v.nextSibling,b=v.nodeName;v[or]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||r.removeChild(v),v=C}}else r==="body"&&Pr(n.ownerDocument.body);r=g}while(r);ql(o)}function wg(n,o){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?o?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(o?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function Af(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Af(r),Ru(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function i_(n,o,r,u){for(;n.nodeType===1;){var g=r;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[or])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=Fn(n.nextSibling),n===null)break}return null}function o_(n,o,r){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Fn(n.nextSibling),n===null))return null;return n}function Ag(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Fn(n.nextSibling),n===null))return null;return n}function Nf(n){return n.data==="$?"||n.data==="$~"}function bf(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function l_(n,o){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||r.readyState!=="loading")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Fn(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var Mf=null;function Ng(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(o===0)return Fn(n.nextSibling);o--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||o++}n=n.nextSibling}return null}function bg(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(o===0)return n;o--}else r!=="/$"&&r!=="/&"||o++}n=n.previousSibling}return null}function Mg(n,o,r){switch(o=Ca(r),n){case"html":if(n=o.documentElement,!n)throw Error(l(452));return n;case"head":if(n=o.head,!n)throw Error(l(453));return n;case"body":if(n=o.body,!n)throw Error(l(454));return n;default:throw Error(l(451))}}function Pr(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);Ru(n)}var Yn=new Map,Rg=new Set;function Ea(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Hi=O.d;O.d={f:r_,r:s_,D:a_,C:u_,L:c_,m:f_,X:h_,S:d_,M:p_};function r_(){var n=Hi.f(),o=ma();return n||o}function s_(n){var o=ol(n);o!==null&&o.tag===5&&o.type==="form"?Kp(o):Hi.r(n)}var kl=typeof document>"u"?null:document;function Ig(n,o,r){var u=kl;if(u&&typeof o=="string"&&o){var g=zn(o);g='link[rel="'+n+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),Rg.has(g)||(Rg.add(g),n={rel:n,crossOrigin:r,href:o},u.querySelector(g)===null&&(o=u.createElement("link"),ln(o,"link",n),Qt(o),u.head.appendChild(o)))}}function a_(n){Hi.D(n),Ig("dns-prefetch",n,null)}function u_(n,o){Hi.C(n,o),Ig("preconnect",n,o)}function c_(n,o,r){Hi.L(n,o,r);var u=kl;if(u&&n&&o){var g='link[rel="preload"][as="'+zn(o)+'"]';o==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+zn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+zn(r.imageSizes)+'"]')):g+='[href="'+zn(n)+'"]';var v=g;switch(o){case"style":v=zl(n);break;case"script":v=Gl(n)}Yn.has(v)||(n=T({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:n,as:o},r),Yn.set(v,n),u.querySelector(g)!==null||o==="style"&&u.querySelector(Br(v))||o==="script"&&u.querySelector(Vr(v))||(o=u.createElement("link"),ln(o,"link",n),Qt(o),u.head.appendChild(o)))}}function f_(n,o){Hi.m(n,o);var r=kl;if(r&&n){var u=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+zn(u)+'"][href="'+zn(n)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Gl(n)}if(!Yn.has(v)&&(n=T({rel:"modulepreload",href:n},o),Yn.set(v,n),r.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Vr(v)))return}u=r.createElement("link"),ln(u,"link",n),Qt(u),r.head.appendChild(u)}}}function d_(n,o,r){Hi.S(n,o,r);var u=kl;if(u&&n){var g=ll(u).hoistableStyles,v=zl(n);o=o||"default";var C=g.get(v);if(!C){var b={loading:0,preload:null};if(C=u.querySelector(Br(v)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":o},r),(r=Yn.get(v))&&Rf(n,r);var z=C=u.createElement("link");Qt(z),ln(z,"link",n),z._p=new Promise(function(X,ne){z.onload=X,z.onerror=ne}),z.addEventListener("load",function(){b.loading|=1}),z.addEventListener("error",function(){b.loading|=2}),b.loading|=4,wa(C,o,u)}C={type:"stylesheet",instance:C,count:1,state:b},g.set(v,C)}}}function h_(n,o){Hi.X(n,o);var r=kl;if(r&&n){var u=ll(r).hoistableScripts,g=Gl(n),v=u.get(g);v||(v=r.querySelector(Vr(g)),v||(n=T({src:n,async:!0},o),(o=Yn.get(g))&&If(n,o),v=r.createElement("script"),Qt(v),ln(v,"link",n),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function p_(n,o){Hi.M(n,o);var r=kl;if(r&&n){var u=ll(r).hoistableScripts,g=Gl(n),v=u.get(g);v||(v=r.querySelector(Vr(g)),v||(n=T({src:n,async:!0,type:"module"},o),(o=Yn.get(g))&&If(n,o),v=r.createElement("script"),Qt(v),ln(v,"link",n),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function Dg(n,o,r,u){var g=(g=me.current)?Ea(g):null;if(!g)throw Error(l(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=zl(r.href),r=ll(g).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=zl(r.href);var v=ll(g).hoistableStyles,C=v.get(n);if(C||(g=g.ownerDocument||g,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,C),(v=g.querySelector(Br(n)))&&!v._p&&(C.instance=v,C.state.loading=5),Yn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Yn.set(n,r),v||m_(g,n,r,C.state))),o&&u===null)throw Error(l(528,""));return C}if(o&&u!==null)throw Error(l(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Gl(r),r=ll(g).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,n))}}function zl(n){return'href="'+zn(n)+'"'}function Br(n){return'link[rel="stylesheet"]['+n+"]"}function Ug(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function m_(n,o,r,u){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=n.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),ln(o,"link",r),Qt(o),n.head.appendChild(o))}function Gl(n){return'[src="'+zn(n)+'"]'}function Vr(n){return"script[async]"+n}function Lg(n,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=n.querySelector('style[data-href~="'+zn(r.href)+'"]');if(u)return o.instance=u,Qt(u),u;var g=T({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Qt(u),ln(u,"style",g),wa(u,r.precedence,n),o.instance=u;case"stylesheet":g=zl(r.href);var v=n.querySelector(Br(g));if(v)return o.state.loading|=4,o.instance=v,Qt(v),v;u=Ug(r),(g=Yn.get(g))&&Rf(u,g),v=(n.ownerDocument||n).createElement("link"),Qt(v);var C=v;return C._p=new Promise(function(b,z){C.onload=b,C.onerror=z}),ln(v,"link",u),o.state.loading|=4,wa(v,r.precedence,n),o.instance=v;case"script":return v=Gl(r.src),(g=n.querySelector(Vr(v)))?(o.instance=g,Qt(g),g):(u=r,(g=Yn.get(v))&&(u=T({},r),If(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),Qt(g),ln(g,"link",u),n.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(l(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,wa(u,r.precedence,n));return o.instance}function wa(n,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,C=0;C<u.length;C++){var b=u[C];if(b.dataset.precedence===o)v=b;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(n,o.firstChild))}function Rf(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function If(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var Aa=null;function Hg(n,o,r){if(Aa===null){var u=new Map,g=Aa=new Map;g.set(r,u)}else g=Aa,u=g.get(r),u||(u=new Map,g.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),g=0;g<r.length;g++){var v=r[g];if(!(v[or]||v[gt]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var C=v.getAttribute(o)||"";C=n+C;var b=u.get(C);b?b.push(v):u.set(C,[v])}}return u}function kg(n,o,r){n=n.ownerDocument||n,n.head.insertBefore(r,o==="title"?n.querySelector("head > title"):null)}function g_(n,o,r){if(r===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function zg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function y_(n,o,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=zl(u.href),v=o.querySelector(Br(g));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=Na.bind(n),o.then(n,n)),r.state.loading|=4,r.instance=v,Qt(v);return}v=o.ownerDocument||o,u=Ug(u),(g=Yn.get(g))&&Rf(u,g),v=v.createElement("link"),Qt(v);var C=v;C._p=new Promise(function(b,z){C.onload=b,C.onerror=z}),ln(v,"link",u),r.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=Na.bind(n),o.addEventListener("load",r),o.addEventListener("error",r))}}var Df=0;function v_(n,o){return n.stylesheets&&n.count===0&&Ma(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&Ma(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+o);0<n.imgBytes&&Df===0&&(Df=62500*WS());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ma(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>Df?50:800)+o);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Na(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ma(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ba=null;function Ma(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ba=new Map,o.forEach(x_,n),ba=null,Na.call(n))}function x_(n,o){if(!(o.state.loading&4)){var r=ba.get(n);if(r)var u=r.get(null);else{r=new Map,ba.set(n,r);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var C=g[v];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(r.set(C.dataset.precedence,C),u=C)}u&&r.set(null,u)}g=o.instance,C=g.getAttribute("data-precedence"),v=r.get(C)||u,v===u&&r.set(null,g),r.set(C,g),this.count++,u=Na.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),o.state.loading|=4}}var Or={$$typeof:H,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function T_(n,o,r,u,g,v,C,b,z){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.hiddenUpdates=si(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Gg(n,o,r,u,g,v,C,b,z,X,ne,se){return n=new T_(n,o,r,C,z,X,ne,se,b),o=1,v===!0&&(o|=24),v=Nn(3,null,null,o),n.current=v,v.stateNode=n,o=cc(),o.refCount++,n.pooledCache=o,o.refCount++,v.memoizedState={element:u,isDehydrated:r,cache:o},pc(v),n}function qg(n){return n?(n=ml,n):ml}function Pg(n,o,r,u,g,v){g=qg(g),u.context===null?u.context=g:u.pendingContext=g,u=eo(o),u.payload={element:r},v=v===void 0?null:v,v!==null&&(u.callback=v),r=to(n,u,o),r!==null&&(Cn(r,n,o),Sr(r,n,o))}function Bg(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<o?r:o}}function Uf(n,o){Bg(n,o),(n=n.alternate)&&Bg(n,o)}function Vg(n){if(n.tag===13||n.tag===31){var o=Do(n,67108864);o!==null&&Cn(o,n,67108864),Uf(n,67108864)}}function Og(n){if(n.tag===13||n.tag===31){var o=Dn();o=ke(o);var r=Do(n,o);r!==null&&Cn(r,n,o),Uf(n,o)}}var Ra=!0;function S_(n,o,r,u){var g=L.T;L.T=null;var v=O.p;try{O.p=2,Lf(n,o,r,u)}finally{O.p=v,L.T=g}}function __(n,o,r,u){var g=L.T;L.T=null;var v=O.p;try{O.p=8,Lf(n,o,r,u)}finally{O.p=v,L.T=g}}function Lf(n,o,r,u){if(Ra){var g=Hf(u);if(g===null)Tf(n,o,u,Ia,r),Yg(n,u);else if(E_(g,n,o,r,u))u.stopPropagation();else if(Yg(n,u),o&4&&-1<C_.indexOf(n)){for(;g!==null;){var v=ol(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var C=ri(v.pendingLanes);if(C!==0){var b=v;for(b.pendingLanes|=2,b.entangledLanes|=2;C;){var z=1<<31-Ie(C);b.entanglements[1]|=z,C&=~z}fi(v),(st&6)===0&&(ha=At()+500,zr(0))}}break;case 31:case 13:b=Do(v,2),b!==null&&Cn(b,v,2),ma(),Uf(v,2)}if(v=Hf(u),v===null&&Tf(n,o,u,Ia,r),v===g)break;g=v}g!==null&&u.stopPropagation()}else Tf(n,o,u,null,r)}}function Hf(n){return n=ku(n),kf(n)}var Ia=null;function kf(n){if(Ia=null,n=il(n),n!==null){var o=a(n);if(o===null)n=null;else{var r=o.tag;if(r===13){if(n=c(o),n!==null)return n;n=null}else if(r===31){if(n=d(o),n!==null)return n;n=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Ia=n,null}function Fg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case Ne:return 2;case we:return 8;case nt:case Z:return 32;case ue:return 268435456;default:return 32}default:return 32}}var zf=!1,ho=null,po=null,mo=null,Fr=new Map,Yr=new Map,go=[],C_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yg(n,o){switch(n){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":Fr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(o.pointerId)}}function Jr(n,o,r,u,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},o!==null&&(o=ol(o),o!==null&&Vg(o)),n):(n.eventSystemFlags|=u,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function E_(n,o,r,u,g){switch(o){case"focusin":return ho=Jr(ho,n,o,r,u,g),!0;case"dragenter":return po=Jr(po,n,o,r,u,g),!0;case"mouseover":return mo=Jr(mo,n,o,r,u,g),!0;case"pointerover":var v=g.pointerId;return Fr.set(v,Jr(Fr.get(v)||null,n,o,r,u,g)),!0;case"gotpointercapture":return v=g.pointerId,Yr.set(v,Jr(Yr.get(v)||null,n,o,r,u,g)),!0}return!1}function Jg(n){var o=il(n.target);if(o!==null){var r=a(o);if(r!==null){if(o=r.tag,o===13){if(o=c(r),o!==null){n.blockedOn=o,Rt(n.priority,function(){Og(r)});return}}else if(o===31){if(o=d(r),o!==null){n.blockedOn=o,Rt(n.priority,function(){Og(r)});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Da(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var r=Hf(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);Hu=u,r.target.dispatchEvent(u),Hu=null}else return o=ol(r),o!==null&&Vg(o),n.blockedOn=r,!1;o.shift()}return!0}function Kg(n,o,r){Da(n)&&r.delete(o)}function w_(){zf=!1,ho!==null&&Da(ho)&&(ho=null),po!==null&&Da(po)&&(po=null),mo!==null&&Da(mo)&&(mo=null),Fr.forEach(Kg),Yr.forEach(Kg)}function Ua(n,o){n.blockedOn===o&&(n.blockedOn=null,zf||(zf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,w_)))}var La=null;function Xg(n){La!==n&&(La=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){La===n&&(La=null);for(var o=0;o<n.length;o+=3){var r=n[o],u=n[o+1],g=n[o+2];if(typeof u!="function"){if(kf(u||r)===null)continue;break}var v=ol(r);v!==null&&(n.splice(o,3),o-=3,Lc(v,{pending:!0,data:g,method:r.method,action:u},u,g))}}))}function ql(n){function o(z){return Ua(z,n)}ho!==null&&Ua(ho,n),po!==null&&Ua(po,n),mo!==null&&Ua(mo,n),Fr.forEach(o),Yr.forEach(o);for(var r=0;r<go.length;r++){var u=go[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<go.length&&(r=go[0],r.blockedOn===null);)Jg(r),r.blockedOn===null&&go.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var g=r[u],v=r[u+1],C=g[Ut]||null;if(typeof v=="function")C||Xg(r);else if(C){var b=null;if(v&&v.hasAttribute("formAction")){if(g=v,C=v[Ut]||null)b=C.formAction;else if(kf(g)!==null)continue}else b=C.action;typeof b=="function"?r[u+1]=b:(r.splice(u,3),u-=3),Xg(r)}}}function $g(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(C){return g=C})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function Gf(n){this._internalRoot=n}Ha.prototype.render=Gf.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(l(409));var r=o.current,u=Dn();Pg(r,u,n,o,null,null)},Ha.prototype.unmount=Gf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Pg(n.current,2,null,n,null,null),ma(),o[wn]=null}};function Ha(n){this._internalRoot=n}Ha.prototype.unstable_scheduleHydration=function(n){if(n){var o=tt();n={blockedOn:null,target:n,priority:o};for(var r=0;r<go.length&&o!==0&&o<go[r].priority;r++);go.splice(r,0,n),r===0&&Jg(n)}};var Qg=e.version;if(Qg!=="19.2.0")throw Error(l(527,Qg,"19.2.0"));O.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(l(188)):(n=Object.keys(n).join(","),Error(l(268,n)));return n=h(o),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var A_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ka.isDisabled&&ka.supportsFiber)try{Pe=ka.inject(A_),Le=ka}catch{}}return Xr.createRoot=function(n,o){if(!s(n))throw Error(l(299));var r=!1,u="",g=im,v=om,C=lm;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=Gg(n,1,!1,null,null,r,u,null,g,v,C,$g),n[wn]=o.current,xf(n),new Gf(o)},Xr.hydrateRoot=function(n,o,r){if(!s(n))throw Error(l(299));var u=!1,g="",v=im,C=om,b=lm,z=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(C=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.formState!==void 0&&(z=r.formState)),o=Gg(n,1,!0,o,r??null,u,g,z,v,C,b,$g),o.context=qg(null),r=o.current,u=Dn(),u=ke(u),g=eo(u),g.callback=null,to(r,g,u),r=u,o.current.lanes=r,Ki(o,r),fi(o),n[wn]=o.current,xf(n),new Ha(o)},Xr.version="19.2.0",Xr}var r0;function H_(){if(r0)return Bf.exports;r0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bf.exports=L_(),Bf.exports}var k_=H_();const z_=bd(k_),rn=[];for(let t=0;t<256;++t)rn.push((t+256).toString(16).slice(1));function G_(t,e=0){return(rn[t[e+0]]+rn[t[e+1]]+rn[t[e+2]]+rn[t[e+3]]+"-"+rn[t[e+4]]+rn[t[e+5]]+"-"+rn[t[e+6]]+rn[t[e+7]]+"-"+rn[t[e+8]]+rn[t[e+9]]+"-"+rn[t[e+10]]+rn[t[e+11]]+rn[t[e+12]]+rn[t[e+13]]+rn[t[e+14]]+rn[t[e+15]]).toLowerCase()}let Yf;const q_=new Uint8Array(16);function P_(){if(!Yf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yf=crypto.getRandomValues.bind(crypto)}return Yf(q_)}const B_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),s0={randomUUID:B_};function V_(t,e,i){var s;t=t||{};const l=t.random??((s=t.rng)==null?void 0:s.call(t))??P_();if(l.length<16)throw new Error("Random bytes length must be >= 16");return l[6]=l[6]&15|64,l[8]=l[8]&63|128,G_(l)}function Ue(t,e,i){return s0.randomUUID&&!t?s0.randomUUID():V_(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let O_,F_;function Y_(){return{geminiUrl:O_,vertexUrl:F_}}function J_(t,e,i,l){var s,a;if(!(t!=null&&t.baseUrl)){const c=Y_();return e?(s=c.vertexUrl)!==null&&s!==void 0?s:i:(a=c.geminiUrl)!==null&&a!==void 0?a:l}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vi{}function _e(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(l,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function m(t,e,i){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in t))if(Array.isArray(i))t[d]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[d])){const p=t[d];if(Array.isArray(i))for(let h=0;h<p.length;h++){const y=p[h];m(y,e.slice(a+1),i[h])}else for(const h of p)m(h,e.slice(a+1),i)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in t||(t[d]=[{}]);const p=t[d];m(p[0],e.slice(a+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const l=e[e.length-1],s=t[l];if(s!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===s)return;if(typeof s=="object"&&typeof i=="object"&&s!==null&&i!==null)Object.assign(s,i);else throw new Error(`Cannot set value for an existing key. Key: ${l}`)}else l==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[l]=i}function f(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let l=0;l<e.length;l++){if(typeof t!="object"||t===null)return i;const s=e[l];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const c=t[a];return Array.isArray(c)?c.map(d=>f(d,e.slice(l+1),i)):i}else return i}else t=t[s]}return t}catch(l){if(l instanceof TypeError)return i;throw l}}function K_(t,e){for(const[i,l]of Object.entries(e)){const s=i.split("."),a=l.split("."),c=new Set;let d=-1;for(let p=0;p<s.length;p++)if(s[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}id(t,s,a,0,c)}}function id(t,e,i,l,s){if(l>=e.length||typeof t!="object"||t===null)return;const a=e[l];if(a.endsWith("[]")){const c=a.slice(0,-2),d=t;if(c in d&&Array.isArray(d[c]))for(const p of d[c])id(p,e,i,l+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,d=Object.keys(c).filter(h=>!h.startsWith("_")&&!s.has(h)),p={};for(const h of d)p[h]=c[h];for(const[h,y]of Object.entries(p)){const T=[];for(const x of i.slice(l))x==="*"?T.push(h):T.push(x);m(c,T,y)}for(const h of d)delete c[h]}}else{const c=t;a in c&&id(c[a],e,i,l+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X_(t){const e={},i=f(t,["operationName"]);i!=null&&m(e,["operationName"],i);const l=f(t,["resourceName"]);return l!=null&&m(e,["_url","resourceName"],l),e}function $_(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["metadata"]);l!=null&&m(e,["metadata"],l);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const c=f(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],Z_(c)),e}function Q_(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["metadata"]);l!=null&&m(e,["metadata"],l);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const c=f(t,["response"]);return c!=null&&m(e,["response"],W_(c)),e}function Z_(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>j_(c))),m(e,["generatedVideos"],a)}const l=f(t,["raiMediaFilteredCount"]);l!=null&&m(e,["raiMediaFilteredCount"],l);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function W_(t){const e={},i=f(t,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>eC(c))),m(e,["generatedVideos"],a)}const l=f(t,["raiMediaFilteredCount"]);l!=null&&m(e,["raiMediaFilteredCount"],l);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function j_(t){const e={},i=f(t,["video"]);return i!=null&&m(e,["video"],rC(i)),e}function eC(t){const e={},i=f(t,["_self"]);return i!=null&&m(e,["video"],sC(i)),e}function tC(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function nC(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function iC(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["metadata"]);l!=null&&m(e,["metadata"],l);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const c=f(t,["response"]);return c!=null&&m(e,["response"],oC(c)),e}function oC(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["parent"]);l!=null&&m(e,["parent"],l);const s=f(t,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function Lv(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["metadata"]);l!=null&&m(e,["metadata"],l);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const c=f(t,["response"]);return c!=null&&m(e,["response"],lC(c)),e}function lC(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["parent"]);l!=null&&m(e,["parent"],l);const s=f(t,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function rC(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const l=f(t,["encodedVideo"]);l!=null&&m(e,["videoBytes"],Rd(l));const s=f(t,["encoding"]);return s!=null&&m(e,["mimeType"],s),e}function sC(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const l=f(t,["bytesBase64Encoded"]);l!=null&&m(e,["videoBytes"],Rd(l));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var a0;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(a0||(a0={}));var u0;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(u0||(u0={}));var c0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(c0||(c0={}));var _t;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(_t||(_t={}));var f0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(f0||(f0={}));var d0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(d0||(d0={}));var h0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(h0||(h0={}));var p0;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(p0||(p0={}));var m0;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(m0||(m0={}));var g0;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(g0||(g0={}));var y0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(y0||(y0={}));var v0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(v0||(v0={}));var x0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(x0||(x0={}));var T0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(T0||(T0={}));var S0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(S0||(S0={}));var _0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_0||(_0={}));var C0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(C0||(C0={}));var E0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(E0||(E0={}));var w0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(w0||(w0={}));var tu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(tu||(tu={}));var A0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(A0||(A0={}));var N0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(N0||(N0={}));var b0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(b0||(b0={}));var od;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(od||(od={}));var M0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(M0||(M0={}));var R0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(R0||(R0={}));var I0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(I0||(I0={}));var D0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(D0||(D0={}));var U0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(U0||(U0={}));var L0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(L0||(L0={}));var H0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(H0||(H0={}));var k0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(k0||(k0={}));var z0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(z0||(z0={}));var G0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(G0||(G0={}));var q0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(q0||(q0={}));var P0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(P0||(P0={}));var B0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(B0||(B0={}));var V0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(V0||(V0={}));var O0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(O0||(O0={}));var F0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(F0||(F0={}));var Y0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Y0||(Y0={}));var J0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(J0||(J0={}));var K0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(K0||(K0={}));var X0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(X0||(X0={}));var $0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})($0||($0={}));var Q0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Q0||(Q0={}));var Z0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Z0||(Z0={}));var W0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(W0||(W0={}));var j0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(j0||(j0={}));var ey;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ey||(ey={}));var ty;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ty||(ty={}));var ny;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ny||(ny={}));var iy;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iy||(iy={}));var oy;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(oy||(oy={}));var Vl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Vl||(Vl={}));class ld{constructor(e){const i={};for(const l of e.headers.entries())i[l[0]]=l[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class $r{get text(){var e,i,l,s,a,c,d,p;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const T=[];for(const x of(p=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[_,N]of Object.entries(x))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(N!==null||N!==void 0)&&T.push(_);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;y=!0,h+=x.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,i,l,s,a,c,d,p;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const T of(p=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[x,_]of Object.entries(T))x!=="inlineData"&&(_!==null||_!==void 0)&&y.push(x);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,l,s,a,c,d,p;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,i,l,s,a,c,d,p,h;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,l,s,a,c,d,p,h;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class ly{}class ry{}class aC{}class uC{}class cC{}class fC{}class sy{}class ay{}class uy{}class dC{}class nu{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const l=new nu;let s;const a=e;return i?s=Q_(a):s=$_(a),Object.assign(l,s),l}}class cy{}class fy{}class dy{}class hC{}class pC{}class mC{}class Id{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const l=new Id,a=iC(e);return Object.assign(l,a),l}}class gC{}class yC{}class vC{}class hy{}class xC{get text(){var e,i,l;let s="",a=!1;const c=[];for(const d of(l=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&l!==void 0?l:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,s+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,i,l;let s="";const a=[];for(const c of(l=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&l!==void 0?l:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&a.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(s+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class TC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Dd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const l=new Dd,a=Lv(e);return Object.assign(l,a),l}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Hv(t,e){const i=lt(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function kv(t){return Array.isArray(t)?t.map(e=>iu(e)):[iu(t)]}function iu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function zv(t){const e=iu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gv(t){const e=iu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function py(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function qv(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>py(e)):[py(t)]}function rd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function my(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function gy(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function un(t){if(t==null)throw new Error("ContentUnion is required");return rd(t)?t:{role:"user",parts:qv(t)}}function Ud(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const l=un(i);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]});if(t.isVertexAI()){const i=un(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>un(i)):[un(e)]}function Kn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(my(t)||gy(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[un(t)]}const e=[],i=[],l=rd(t[0]);for(const s of t){const a=rd(s);if(a!=l)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(my(s)||gy(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(s)}}return l||e.push({role:"user",parts:qv(i)}),e}function SC(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(l=>l!=="null");if(i.length===1)e.type=Object.values(_t).includes(i[0].toUpperCase())?i[0].toUpperCase():_t.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const l of i)e.anyOf.push({type:Object.values(_t).includes(l.toUpperCase())?l.toUpperCase():_t.TYPE_UNSPECIFIED})}}function Ol(t){const e={},i=["items"],l=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&SC(t.type,e);for(const[c,d]of Object.entries(t))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(_t).includes(d.toUpperCase())?d.toUpperCase():_t.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=Ol(d);else if(l.includes(c)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(Ol(h))}e[c]=p}else if(s.includes(c)){const p={};for(const[h,y]of Object.entries(d))p[h]=Ol(y);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Ld(t){return Ol(t)}function Hd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function kd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Zl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ol(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ol(e.response));return t}function Wl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function _C(t,e,i,l=1){const s=!e.startsWith(`${i}/`)&&e.split("/").length===l;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:s?`${i}/${e}`:e}function Oi(t,e){if(typeof e!="string")throw new Error("name must be a string");return _C(t,e,"cachedContents")}function Pv(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Co(t){return Rd(t)}function CC(t){return t!=null&&typeof t=="object"&&"name"in t}function EC(t){return t!=null&&typeof t=="object"&&"video"in t}function wC(t){return t!=null&&typeof t=="object"&&"uri"in t}function Bv(t){var e;let i;if(CC(t)&&(i=t.name),!(wC(t)&&(i=t.uri,i===void 0))&&!(EC(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const s=i.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${i}`);i=s[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function Vv(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Ov(t){for(const e of["models","tunedModels","publisherModels"])if(AC(t,e))return t[e];return[]}function AC(t,e){return t!==null&&typeof t=="object"&&e in t}function NC(t,e={}){const i=t,l={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(l.responseJsonSchema=i.outputSchema),e.behavior&&(l.behavior=e.behavior),{functionDeclarations:[l]}}function bC(t,e={}){const i=[],l=new Set;for(const s of t){const a=s.name;if(l.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);l.add(a);const c=NC(s,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function Fv(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const l=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,s=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||l!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(l>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function MC(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Yv(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const s=i.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const c of s){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function jl(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Jv(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RC(t){const e={},i=f(t,["responsesFile"]);i!=null&&m(e,["fileName"],i);const l=f(t,["inlinedResponses","inlinedResponses"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>cE(c))),m(e,["inlinedResponses"],a)}const s=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["inlinedEmbedContentResponses"],a)}return e}function IC(t){const e={},i=f(t,["predictionsFormat"]);i!=null&&m(e,["format"],i);const l=f(t,["gcsDestination","outputUriPrefix"]);l!=null&&m(e,["gcsUri"],l);const s=f(t,["bigqueryDestination","outputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function DC(t){const e={},i=f(t,["format"]);i!=null&&m(e,["predictionsFormat"],i);const l=f(t,["gcsUri"]);l!=null&&m(e,["gcsDestination","outputUriPrefix"],l);const s=f(t,["bigqueryUri"]);if(s!=null&&m(e,["bigqueryDestination","outputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ka(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["metadata","displayName"]);l!=null&&m(e,["displayName"],l);const s=f(t,["metadata","state"]);s!=null&&m(e,["state"],Jv(s));const a=f(t,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const c=f(t,["metadata","endTime"]);c!=null&&m(e,["endTime"],c);const d=f(t,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(t,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(t,["metadata","output"]);return h!=null&&m(e,["dest"],RC(Yv(h))),e}function sd(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["displayName"]);l!=null&&m(e,["displayName"],l);const s=f(t,["state"]);s!=null&&m(e,["state"],Jv(s));const a=f(t,["error"]);a!=null&&m(e,["error"],a);const c=f(t,["createTime"]);c!=null&&m(e,["createTime"],c);const d=f(t,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const y=f(t,["model"]);y!=null&&m(e,["model"],y);const T=f(t,["inputConfig"]);T!=null&&m(e,["src"],UC(T));const x=f(t,["outputConfig"]);x!=null&&m(e,["dest"],IC(Yv(x)));const _=f(t,["completionStats"]);return _!=null&&m(e,["completionStats"],_),e}function UC(t){const e={},i=f(t,["instancesFormat"]);i!=null&&m(e,["format"],i);const l=f(t,["gcsSource","uris"]);l!=null&&m(e,["gcsUri"],l);const s=f(t,["bigquerySource","inputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function LC(t,e){const i={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const l=f(e,["fileName"]);l!=null&&m(i,["fileName"],l);const s=f(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>uE(t,c))),m(i,["requests","requests"],a)}return i}function HC(t){const e={},i=f(t,["format"]);i!=null&&m(e,["instancesFormat"],i);const l=f(t,["gcsUri"]);l!=null&&m(e,["gcsSource","uris"],l);const s=f(t,["bigqueryUri"]);if(s!=null&&m(e,["bigquerySource","inputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function kC(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function zC(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],jl(t,l)),i}function GC(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],jl(t,l)),i}function qC(t){const e={},i=f(t,["content"]);i!=null&&m(e,["content"],i);const l=f(t,["citationMetadata"]);l!=null&&m(e,["citationMetadata"],PC(l));const s=f(t,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const a=f(t,["finishReason"]);a!=null&&m(e,["finishReason"],a);const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=f(t,["safetyRatings"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(_=>_)),m(e,["safetyRatings"],x)}const T=f(t,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function PC(t){const e={},i=f(t,["citationSources"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>s)),m(e,["citations"],l)}return e}function Kv(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>yE(a))),m(e,["parts"],s)}const l=f(t,["role"]);return l!=null&&m(e,["role"],l),e}function BC(t,e){const i={},l=f(t,["displayName"]);if(e!==void 0&&l!=null&&m(e,["batch","displayName"],l),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function VC(t,e){const i={},l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const s=f(t,["dest"]);return e!==void 0&&s!=null&&m(e,["outputConfig"],DC(MC(s))),i}function yy(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["src"]);s!=null&&m(i,["batch","inputConfig"],LC(t,Fv(t,s)));const a=f(e,["config"]);return a!=null&&BC(a,i),i}function OC(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["model"],lt(t,l));const s=f(e,["src"]);s!=null&&m(i,["inputConfig"],HC(Fv(t,s)));const a=f(e,["config"]);return a!=null&&VC(a,i),i}function FC(t,e){const i={},l=f(t,["displayName"]);return e!==void 0&&l!=null&&m(e,["batch","displayName"],l),i}function YC(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["src"]);s!=null&&m(i,["batch","inputConfig"],WC(t,s));const a=f(e,["config"]);return a!=null&&FC(a,i),i}function JC(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],jl(t,l)),i}function KC(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],jl(t,l)),i}function XC(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["name"]);l!=null&&m(e,["name"],l);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);return a!=null&&m(e,["error"],a),e}function $C(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["name"]);l!=null&&m(e,["name"],l);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);return a!=null&&m(e,["error"],a),e}function QC(t,e){const i={},l=f(e,["contents"]);if(l!=null){let a=Ud(t,l);Array.isArray(a)&&(a=a.map(c=>c)),m(i,["requests[]","request","content"],a)}const s=f(e,["config"]);return s!=null&&(m(i,["_self"],ZC(s,i)),K_(i,{"requests[].*":"requests[].request.*"})),i}function ZC(t,e){const i={},l=f(t,["taskType"]);e!==void 0&&l!=null&&m(e,["requests[]","taskType"],l);const s=f(t,["title"]);e!==void 0&&s!=null&&m(e,["requests[]","title"],s);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function WC(t,e){const i={},l=f(e,["fileName"]);l!=null&&m(i,["file_name"],l);const s=f(e,["inlinedRequests"]);return s!=null&&m(i,["requests"],QC(t,s)),i}function jC(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function eE(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const l=f(t,["args"]);l!=null&&m(e,["args"],l);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tE(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const l=f(t,["allowedFunctionNames"]);if(l!=null&&m(e,["allowedFunctionNames"],l),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nE(t,e,i){const l={},s=f(e,["systemInstruction"]);i!==void 0&&s!=null&&m(i,["systemInstruction"],Kv(un(s)));const a=f(e,["temperature"]);a!=null&&m(l,["temperature"],a);const c=f(e,["topP"]);c!=null&&m(l,["topP"],c);const d=f(e,["topK"]);d!=null&&m(l,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(l,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(l,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(l,["stopSequences"],y);const T=f(e,["responseLogprobs"]);T!=null&&m(l,["responseLogprobs"],T);const x=f(e,["logprobs"]);x!=null&&m(l,["logprobs"],x);const _=f(e,["presencePenalty"]);_!=null&&m(l,["presencePenalty"],_);const N=f(e,["frequencyPenalty"]);N!=null&&m(l,["frequencyPenalty"],N);const A=f(e,["seed"]);A!=null&&m(l,["seed"],A);const w=f(e,["responseMimeType"]);w!=null&&m(l,["responseMimeType"],w);const E=f(e,["responseSchema"]);E!=null&&m(l,["responseSchema"],Ld(E));const M=f(e,["responseJsonSchema"]);if(M!=null&&m(l,["responseJsonSchema"],M),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=f(e,["safetySettings"]);if(i!==void 0&&H!=null){let j=H;Array.isArray(j)&&(j=j.map(de=>vE(de))),m(i,["safetySettings"],j)}const I=f(e,["tools"]);if(i!==void 0&&I!=null){let j=Wl(I);Array.isArray(j)&&(j=j.map(de=>TE(Zl(de)))),m(i,["tools"],j)}const D=f(e,["toolConfig"]);if(i!==void 0&&D!=null&&m(i,["toolConfig"],xE(D)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=f(e,["cachedContent"]);i!==void 0&&U!=null&&m(i,["cachedContent"],Oi(t,U));const k=f(e,["responseModalities"]);k!=null&&m(l,["responseModalities"],k);const F=f(e,["mediaResolution"]);F!=null&&m(l,["mediaResolution"],F);const P=f(e,["speechConfig"]);if(P!=null&&m(l,["speechConfig"],Hd(P)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Y=f(e,["thinkingConfig"]);Y!=null&&m(l,["thinkingConfig"],Y);const J=f(e,["imageConfig"]);return J!=null&&m(l,["imageConfig"],aE(J)),l}function iE(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["candidates"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(h=>qC(h))),m(e,["candidates"],p)}const s=f(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const a=f(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const c=f(t,["responseId"]);c!=null&&m(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function oE(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],jl(t,l)),i}function lE(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],jl(t,l)),i}function rE(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function sE(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function aE(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const l=f(t,["imageSize"]);if(l!=null&&m(e,["imageSize"],l),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function uE(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["request","model"],lt(t,l));const s=f(e,["contents"]);if(s!=null){let d=Kn(s);Array.isArray(d)&&(d=d.map(p=>Kv(p))),m(i,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&m(i,["metadata"],a);const c=f(e,["config"]);return c!=null&&m(i,["request","generationConfig"],nE(t,c,f(i,["request"],{}))),i}function cE(t){const e={},i=f(t,["response"]);i!=null&&m(e,["response"],iE(i));const l=f(t,["error"]);return l!=null&&m(e,["error"],l),e}function fE(t,e){const i={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&m(e,["_query","pageSize"],l);const s=f(t,["pageToken"]);if(e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function dE(t,e){const i={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&m(e,["_query","pageSize"],l);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const a=f(t,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),i}function hE(t){const e={},i=f(t,["config"]);return i!=null&&fE(i,e),e}function pE(t){const e={},i=f(t,["config"]);return i!=null&&dE(i,e),e}function mE(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["nextPageToken"]);l!=null&&m(e,["nextPageToken"],l);const s=f(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>Ka(c))),m(e,["batchJobs"],a)}return e}function gE(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["nextPageToken"]);l!=null&&m(e,["nextPageToken"],l);const s=f(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>sd(c))),m(e,["batchJobs"],a)}return e}function yE(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const l=f(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],jC(a));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],eE(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],kC(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const T=f(t,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const x=f(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function vE(t){const e={},i=f(t,["category"]);if(i!=null&&m(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const l=f(t,["threshold"]);return l!=null&&m(e,["threshold"],l),e}function xE(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],tE(i));const l=f(t,["retrievalConfig"]);return l!=null&&m(e,["retrievalConfig"],l),e}function TE(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(T=>T)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],rE(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],sE(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Pi||(Pi={}));class Zo{constructor(e,i,l,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,l,s)}init(e,i,l){var s,a;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!l||Object.keys(l).length===0?c={config:{}}:typeof l=="object"?c=Object.assign({},l):c=l,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(s=c.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SE extends Vi{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new Zo(Pi.PAGED_ITEM_BATCH_JOBS,l=>this.listInternal(l),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=yy(this.apiClient,e),l=i._url,s=_e("{model}:batchGenerateContent",l),d=i.batch.inputConfig.requests,p=d.requests,h=[];for(const y of p){const T=Object.assign({},y);if(T.systemInstruction){const x=T.systemInstruction;delete T.systemInstruction;const _=T.request;_.systemInstruction=x,T.request=_}h.push(T)}return d.requests=h,delete i.config,delete i._url,delete i._query,{path:s,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const l=i?Object.assign({},i):{},s=Date.now().toString();if(l.displayName||(l.displayName=`genaiBatchJob_${s}`),l.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?l.dest=`${a.slice(0,-6)}/dest`:l.dest=`${a}_dest_${s}`;else if(c)l.dest=`${c}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return l}async createInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=OC(this.apiClient,e);return d=_e("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>sd(y))}else{const h=yy(this.apiClient,e);return d=_e("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>Ka(y))}}async createEmbeddingsInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=YC(this.apiClient,e);return a=_e("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>Ka(p))}}async get(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=lE(this.apiClient,e);return d=_e("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>sd(y))}else{const h=oE(this.apiClient,e);return d=_e("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>Ka(y))}}async cancel(e){var i,l,s,a;let c="",d={};if(this.apiClient.isVertexAI()){const p=GC(this.apiClient,e);c=_e("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}else{const p=zC(this.apiClient,e);c=_e("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=pE(e);return d=_e("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=gE(y),x=new hy;return Object.assign(x,T),x})}else{const h=hE(e);return d=_e("batches",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=mE(y),x=new hy;return Object.assign(x,T),x})}}async delete(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=KC(this.apiClient,e);return d=_e("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>$C(y))}else{const h=JC(this.apiClient,e);return d=_e("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>XC(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _E(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function vy(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>YE(a))),m(e,["parts"],s)}const l=f(t,["role"]);return l!=null&&m(e,["role"],l),e}function CE(t,e){const i={},l=f(t,["ttl"]);e!==void 0&&l!=null&&m(e,["ttl"],l);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const a=f(t,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let y=Kn(c);Array.isArray(y)&&(y=y.map(T=>vy(T))),m(e,["contents"],y)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],vy(un(d)));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(T=>KE(T))),m(e,["tools"],y)}const h=f(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],JE(h)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function EE(t,e){const i={},l=f(t,["ttl"]);e!==void 0&&l!=null&&m(e,["ttl"],l);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const a=f(t,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let T=Kn(c);Array.isArray(T)&&(T=T.map(x=>x)),m(e,["contents"],T)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],un(d));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(x=>XE(x))),m(e,["tools"],T)}const h=f(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const y=f(t,["kmsKeyName"]);return e!==void 0&&y!=null&&m(e,["encryption_spec","kmsKeyName"],y),i}function wE(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["model"],Hv(t,l));const s=f(e,["config"]);return s!=null&&CE(s,i),i}function AE(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["model"],Hv(t,l));const s=f(e,["config"]);return s!=null&&EE(s,i),i}function NE(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],Oi(t,l)),i}function bE(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],Oi(t,l)),i}function ME(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function RE(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function IE(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function DE(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const l=f(t,["args"]);l!=null&&m(e,["args"],l);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UE(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const l=f(t,["allowedFunctionNames"]);if(l!=null&&m(e,["allowedFunctionNames"],l),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function LE(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const l=f(t,["name"]);l!=null&&m(e,["name"],l);const s=f(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function HE(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],Oi(t,l)),i}function kE(t,e){const i={},l=f(e,["name"]);return l!=null&&m(i,["_url","name"],Oi(t,l)),i}function zE(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function GE(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function qE(t,e){const i={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&m(e,["_query","pageSize"],l);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),i}function PE(t,e){const i={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&m(e,["_query","pageSize"],l);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),i}function BE(t){const e={},i=f(t,["config"]);return i!=null&&qE(i,e),e}function VE(t){const e={},i=f(t,["config"]);return i!=null&&PE(i,e),e}function OE(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["nextPageToken"]);l!=null&&m(e,["nextPageToken"],l);const s=f(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["cachedContents"],a)}return e}function FE(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["nextPageToken"]);l!=null&&m(e,["nextPageToken"],l);const s=f(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["cachedContents"],a)}return e}function YE(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const l=f(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],IE(a));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],DE(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],_E(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const T=f(t,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const x=f(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function JE(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],UE(i));const l=f(t,["retrievalConfig"]);return l!=null&&m(e,["retrievalConfig"],l),e}function KE(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(T=>T)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],zE(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],GE(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function XE(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let T=i;Array.isArray(T)&&(T=T.map(x=>LE(x))),m(e,["functionDeclarations"],T)}const l=f(t,["retrieval"]);l!=null&&m(e,["retrieval"],l);const s=f(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const a=f(t,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function $E(t,e){const i={},l=f(t,["ttl"]);e!==void 0&&l!=null&&m(e,["ttl"],l);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),i}function QE(t,e){const i={},l=f(t,["ttl"]);e!==void 0&&l!=null&&m(e,["ttl"],l);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),i}function ZE(t,e){const i={},l=f(e,["name"]);l!=null&&m(i,["_url","name"],Oi(t,l));const s=f(e,["config"]);return s!=null&&$E(s,i),i}function WE(t,e){const i={},l=f(e,["name"]);l!=null&&m(i,["_url","name"],Oi(t,l));const s=f(e,["config"]);return s!=null&&QE(s,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jE extends Vi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Zo(Pi.PAGED_ITEM_CACHED_CONTENTS,l=>this.listInternal(l),await this.listInternal(i),i)}async create(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=AE(this.apiClient,e);return d=_e("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=wE(this.apiClient,e);return d=_e("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async get(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=kE(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=HE(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async delete(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=bE(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=RE(y),x=new fy;return Object.assign(x,T),x})}else{const h=NE(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=ME(y),x=new fy;return Object.assign(x,T),x})}}async update(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=WE(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=ZE(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async listInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=VE(e);return d=_e("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=FE(y),x=new dy;return Object.assign(x,T),x})}else{const h=BE(e);return d=_e("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=OE(y),x=new dy;return Object.assign(x,T),x})}}}function xy(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],l=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&l>=t.length&&(t=void 0),{value:t&&t[l++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(t){return this instanceof St?(this.v=t,this):new St(t)}function Fl(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=i.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),s[Symbol.asyncIterator]=function(){return this},s;function c(_){return function(N){return Promise.resolve(N).then(_,T)}}function d(_,N){l[_]&&(s[_]=function(A){return new Promise(function(w,E){a.push([_,A,w,E])>1||p(_,A)})},N&&(s[_]=N(s[_])))}function p(_,N){try{h(l[_](N))}catch(A){x(a[0][3],A)}}function h(_){_.value instanceof St?Promise.resolve(_.value.v).then(y,T):x(a[0][2],_)}function y(_){p("next",_)}function T(_){p("throw",_)}function x(_,N){_(N),a.shift(),a.length&&p(a[0][0],a[0][1])}}function ts(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof xy=="function"?xy(t):t[Symbol.iterator](),i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i);function l(a){i[a]=t[a]&&function(c){return new Promise(function(d,p){c=t[a](c),s(d,p,c.done,c.value)})}}function s(a,c,d,p){Promise.resolve(p).then(function(h){a({value:h,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ew(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:Xv(i)}function Xv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function tw(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ty(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let l=0;for(;l<i;)if(t[l].role==="user")e.push(t[l]),l++;else{const s=[];let a=!0;for(;l<i&&t[l].role==="model";)s.push(t[l]),a&&!Xv(t[l])&&(a=!1),l++;a?e.push(...s):e.pop()}return e}class nw{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new iw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class iw{constructor(e,i,l,s={},a=[]){this.apiClient=e,this.modelsModule=i,this.model=l,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),tw(a)}async sendMessage(e){var i;await this.sendPromise;const l=un(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(l),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var a,c,d;const p=await s,h=(c=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,y=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let x=[];y!=null&&(x=(d=y.slice(T))!==null&&d!==void 0?d:[]);const _=h?[h]:[];this.recordHistory(l,_,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var i;await this.sendPromise;const l=un(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(l),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,l)}getHistory(e=!1){const i=e?Ty(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var l,s;return Fl(this,arguments,function*(){var c,d,p,h;const y=[];try{for(var T=!0,x=ts(e),_;_=yield St(x.next()),c=_.done,!c;T=!0){h=_.value,T=!1;const N=h;if(ew(N)){const A=(s=(l=N.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content;A!==void 0&&y.push(A)}yield yield St(N)}}catch(N){d={error:N}}finally{try{!T&&!c&&(p=x.return)&&(yield St(p.call(x)))}finally{if(d)throw d.error}}this.recordHistory(i,y)})}recordHistory(e,i,l){let s=[];i.length>0&&i.every(a=>a.role!==void 0)?s=i:s.push({role:"model",parts:[]}),l&&l.length>0?this.history.push(...Ty(l)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ow(t){const e={},i=f(t,["file"]);return i!=null&&m(e,["file"],i),e}function lw(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function rw(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],Bv(i)),e}function sw(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function aw(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],Bv(i)),e}function uw(t,e){const i={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&m(e,["_query","pageSize"],l);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),i}function cw(t){const e={},i=f(t,["config"]);return i!=null&&uw(i,e),e}function fw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["nextPageToken"]);l!=null&&m(e,["nextPageToken"],l);const s=f(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dw extends Vi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Zo(Pi.PAGED_ITEM_FILES,l=>this.listInternal(l),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cw(e);return a=_e("files",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const h=fw(p),y=new gC;return Object.assign(y,h),y})}}async createInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ow(e);return a=_e("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>{const h=lw(p),y=new yC;return Object.assign(y,h),y})}}async get(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aw(e);return a=_e("files/{file}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rw(e);return a=_e("files/{file}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const h=sw(p),y=new vC;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xa(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function hw(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Mw(a))),m(e,["parts"],s)}const l=f(t,["role"]);return l!=null&&m(e,["role"],l),e}function pw(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function mw(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const l=f(t,["args"]);l!=null&&m(e,["args"],l);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gw(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const l=f(t,["name"]);l!=null&&m(e,["name"],l);const s=f(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function yw(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const l=f(t,["responseJsonSchema"]);l!=null&&m(e,["responseJsonSchema"],l);const s=f(t,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const a=f(t,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const c=f(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=f(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const T=f(t,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const x=f(t,["responseLogprobs"]);x!=null&&m(e,["responseLogprobs"],x);const _=f(t,["responseMimeType"]);_!=null&&m(e,["responseMimeType"],_);const N=f(t,["responseModalities"]);N!=null&&m(e,["responseModalities"],N);const A=f(t,["responseSchema"]);A!=null&&m(e,["responseSchema"],A);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const E=f(t,["seed"]);E!=null&&m(e,["seed"],E);const M=f(t,["speechConfig"]);M!=null&&m(e,["speechConfig"],$v(M));const H=f(t,["stopSequences"]);H!=null&&m(e,["stopSequences"],H);const I=f(t,["temperature"]);I!=null&&m(e,["temperature"],I);const D=f(t,["thinkingConfig"]);D!=null&&m(e,["thinkingConfig"],D);const U=f(t,["topK"]);U!=null&&m(e,["topK"],U);const k=f(t,["topP"]);if(k!=null&&m(e,["topP"],k),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vw(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function xw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function Tw(t,e){const i={},l=f(t,["generationConfig"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig"],l);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=f(t,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],kd(T));const x=f(t,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const _=f(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],_);const N=f(t,["systemInstruction"]);e!==void 0&&N!=null&&m(e,["setup","systemInstruction"],hw(un(N)));const A=f(t,["tools"]);if(e!==void 0&&A!=null){let U=Wl(A);Array.isArray(U)&&(U=U.map(k=>Iw(Zl(k)))),m(e,["setup","tools"],U)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],Rw(w));const E=f(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&m(e,["setup","inputAudioTranscription"],E);const M=f(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&m(e,["setup","outputAudioTranscription"],M);const H=f(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const I=f(t,["contextWindowCompression"]);e!==void 0&&I!=null&&m(e,["setup","contextWindowCompression"],I);const D=f(t,["proactivity"]);return e!==void 0&&D!=null&&m(e,["setup","proactivity"],D),i}function Sw(t,e){const i={},l=f(t,["generationConfig"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig"],yw(l));const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=f(t,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],$v(kd(T)));const x=f(t,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const _=f(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],_);const N=f(t,["systemInstruction"]);e!==void 0&&N!=null&&m(e,["setup","systemInstruction"],un(N));const A=f(t,["tools"]);if(e!==void 0&&A!=null){let U=Wl(A);Array.isArray(U)&&(U=U.map(k=>Dw(Zl(k)))),m(e,["setup","tools"],U)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],w);const E=f(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&m(e,["setup","inputAudioTranscription"],E);const M=f(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&m(e,["setup","outputAudioTranscription"],M);const H=f(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const I=f(t,["contextWindowCompression"]);e!==void 0&&I!=null&&m(e,["setup","contextWindowCompression"],I);const D=f(t,["proactivity"]);return e!==void 0&&D!=null&&m(e,["setup","proactivity"],D),i}function _w(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["setup","model"],lt(t,l));const s=f(e,["config"]);return s!=null&&m(i,["config"],Tw(s,i)),i}function Cw(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["setup","model"],lt(t,l));const s=f(e,["config"]);return s!=null&&m(i,["config"],Sw(s,i)),i}function Ew(t){const e={},i=f(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],i),e}function ww(t){const e={},i=f(t,["weightedPrompts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>s)),m(e,["weightedPrompts"],l)}return e}function Aw(t){const e={},i=f(t,["media"]);if(i!=null){let h=kv(i);Array.isArray(h)&&(h=h.map(y=>Xa(y))),m(e,["mediaChunks"],h)}const l=f(t,["audio"]);l!=null&&m(e,["audio"],Xa(Gv(l)));const s=f(t,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const a=f(t,["video"]);a!=null&&m(e,["video"],Xa(zv(a)));const c=f(t,["text"]);c!=null&&m(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Nw(t){const e={},i=f(t,["media"]);if(i!=null){let h=kv(i);Array.isArray(h)&&(h=h.map(y=>y)),m(e,["mediaChunks"],h)}const l=f(t,["audio"]);l!=null&&m(e,["audio"],Gv(l));const s=f(t,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const a=f(t,["video"]);a!=null&&m(e,["video"],zv(a));const c=f(t,["text"]);c!=null&&m(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function bw(t){const e={},i=f(t,["setupComplete"]);i!=null&&m(e,["setupComplete"],i);const l=f(t,["serverContent"]);l!=null&&m(e,["serverContent"],l);const s=f(t,["toolCall"]);s!=null&&m(e,["toolCall"],s);const a=f(t,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const c=f(t,["usageMetadata"]);c!=null&&m(e,["usageMetadata"],Uw(c));const d=f(t,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(t,["sessionResumptionUpdate"]);return p!=null&&m(e,["sessionResumptionUpdate"],p),e}function Mw(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const l=f(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],pw(a));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],mw(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],Xa(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const T=f(t,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const x=f(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function Rw(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $v(t){const e={},i=f(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const l=f(t,["voiceConfig"]);if(l!=null&&m(e,["voiceConfig"],l),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Iw(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(T=>T)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],vw(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],xw(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Dw(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let T=i;Array.isArray(T)&&(T=T.map(x=>gw(x))),m(e,["functionDeclarations"],T)}const l=f(t,["retrieval"]);l!=null&&m(e,["retrieval"],l);const s=f(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const a=f(t,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function Uw(t){const e={},i=f(t,["promptTokenCount"]);i!=null&&m(e,["promptTokenCount"],i);const l=f(t,["cachedContentTokenCount"]);l!=null&&m(e,["cachedContentTokenCount"],l);const s=f(t,["candidatesTokenCount"]);s!=null&&m(e,["responseTokenCount"],s);const a=f(t,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const c=f(t,["thoughtsTokenCount"]);c!=null&&m(e,["thoughtsTokenCount"],c);const d=f(t,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(t,["promptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(N=>N)),m(e,["promptTokensDetails"],_)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(N=>N)),m(e,["cacheTokensDetails"],_)}const y=f(t,["candidatesTokensDetails"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(N=>N)),m(e,["responseTokensDetails"],_)}const T=f(t,["toolUsePromptTokensDetails"]);if(T!=null){let _=T;Array.isArray(_)&&(_=_.map(N=>N)),m(e,["toolUsePromptTokensDetails"],_)}const x=f(t,["trafficType"]);return x!=null&&m(e,["trafficType"],x),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lw(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function Hw(t){const e={},i=f(t,["content"]);i!=null&&m(e,["content"],i);const l=f(t,["citationMetadata"]);l!=null&&m(e,["citationMetadata"],kw(l));const s=f(t,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const a=f(t,["finishReason"]);a!=null&&m(e,["finishReason"],a);const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=f(t,["safetyRatings"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(_=>_)),m(e,["safetyRatings"],x)}const T=f(t,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function kw(t){const e={},i=f(t,["citationSources"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>s)),m(e,["citations"],l)}return e}function zw(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["contents"]);if(s!=null){let a=Kn(s);Array.isArray(a)&&(a=a.map(c=>c)),m(i,["contents"],a)}return i}function Gw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["tokensInfo"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(a=>a)),m(e,["tokensInfo"],s)}return e}function qw(t){const e={},i=f(t,["values"]);i!=null&&m(e,["values"],i);const l=f(t,["statistics"]);return l!=null&&m(e,["statistics"],Pw(l)),e}function Pw(t){const e={},i=f(t,["truncated"]);i!=null&&m(e,["truncated"],i);const l=f(t,["token_count"]);return l!=null&&m(e,["tokenCount"],l),e}function vu(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>$A(a))),m(e,["parts"],s)}const l=f(t,["role"]);return l!=null&&m(e,["role"],l),e}function Bw(t){const e={},i=f(t,["controlType"]);i!=null&&m(e,["controlType"],i);const l=f(t,["enableControlImageComputation"]);return l!=null&&m(e,["computeControl"],l),e}function Vw(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Ow(t,e){const i={},l=f(t,["systemInstruction"]);e!==void 0&&l!=null&&m(e,["systemInstruction"],un(l));const s=f(t,["tools"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>ex(d))),m(e,["tools"],c)}const a=f(t,["generationConfig"]);return e!==void 0&&a!=null&&m(e,["generationConfig"],LA(a)),i}function Fw(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["contents"]);if(s!=null){let c=Kn(s);Array.isArray(c)&&(c=c.map(d=>vu(d))),m(i,["contents"],c)}const a=f(e,["config"]);return a!=null&&Vw(a),i}function Yw(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["contents"]);if(s!=null){let c=Kn(s);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["contents"],c)}const a=f(e,["config"]);return a!=null&&Ow(a,i),i}function Jw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["totalTokens"]);l!=null&&m(e,["totalTokens"],l);const s=f(t,["cachedContentTokenCount"]);return s!=null&&m(e,["cachedContentTokenCount"],s),e}function Kw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["totalTokens"]);return l!=null&&m(e,["totalTokens"],l),e}function Xw(t,e){const i={},l=f(e,["model"]);return l!=null&&m(i,["_url","name"],lt(t,l)),i}function $w(t,e){const i={},l=f(e,["model"]);return l!=null&&m(i,["_url","name"],lt(t,l)),i}function Qw(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function Zw(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function Ww(t,e){const i={},l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&m(e,["parameters","negativePrompt"],s);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const T=f(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const x=f(t,["includeRaiReason"]);e!==void 0&&x!=null&&m(e,["parameters","includeRaiReason"],x);const _=f(t,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const N=f(t,["outputMimeType"]);e!==void 0&&N!=null&&m(e,["parameters","outputOptions","mimeType"],N);const A=f(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&m(e,["parameters","outputOptions","compressionQuality"],A);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const E=f(t,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const M=f(t,["editMode"]);e!==void 0&&M!=null&&m(e,["parameters","editMode"],M);const H=f(t,["baseSteps"]);return e!==void 0&&H!=null&&m(e,["parameters","editConfig","baseSteps"],H),i}function jw(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["prompt"]);s!=null&&m(i,["instances[0]","prompt"],s);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>t1(p))),m(i,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&Ww(c,i),i}function eA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["predictions"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(a=>xu(a))),m(e,["generatedImages"],s)}return e}function tA(t,e){const i={},l=f(t,["taskType"]);e!==void 0&&l!=null&&m(e,["requests[]","taskType"],l);const s=f(t,["title"]);e!==void 0&&s!=null&&m(e,["requests[]","title"],s);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function nA(t,e){const i={},l=f(t,["taskType"]);e!==void 0&&l!=null&&m(e,["instances[]","task_type"],l);const s=f(t,["title"]);e!==void 0&&s!=null&&m(e,["instances[]","title"],s);const a=f(t,["outputDimensionality"]);e!==void 0&&a!=null&&m(e,["parameters","outputDimensionality"],a);const c=f(t,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),i}function iA(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["contents"]);if(s!=null){let d=Ud(t,s);Array.isArray(d)&&(d=d.map(p=>p)),m(i,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&tA(a,i);const c=f(e,["model"]);return c!==void 0&&m(i,["requests[]","model"],lt(t,c)),i}function oA(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["contents"]);if(s!=null){let c=Ud(t,s);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["instances[]","content"],c)}const a=f(e,["config"]);return a!=null&&nA(a,i),i}function lA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["embeddings"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["embeddings"],a)}const s=f(t,["metadata"]);return s!=null&&m(e,["metadata"],s),e}function rA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["predictions[]","embeddings"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>qw(c))),m(e,["embeddings"],a)}const s=f(t,["metadata"]);return s!=null&&m(e,["metadata"],s),e}function sA(t){const e={},i=f(t,["endpoint"]);i!=null&&m(e,["name"],i);const l=f(t,["deployedModelId"]);return l!=null&&m(e,["deployedModelId"],l),e}function aA(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function uA(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const l=f(t,["args"]);l!=null&&m(e,["args"],l);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cA(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const l=f(t,["allowedFunctionNames"]);if(l!=null&&m(e,["allowedFunctionNames"],l),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fA(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const l=f(t,["name"]);l!=null&&m(e,["name"],l);const s=f(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function dA(t,e,i){const l={},s=f(e,["systemInstruction"]);i!==void 0&&s!=null&&m(i,["systemInstruction"],vu(un(s)));const a=f(e,["temperature"]);a!=null&&m(l,["temperature"],a);const c=f(e,["topP"]);c!=null&&m(l,["topP"],c);const d=f(e,["topK"]);d!=null&&m(l,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(l,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(l,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(l,["stopSequences"],y);const T=f(e,["responseLogprobs"]);T!=null&&m(l,["responseLogprobs"],T);const x=f(e,["logprobs"]);x!=null&&m(l,["logprobs"],x);const _=f(e,["presencePenalty"]);_!=null&&m(l,["presencePenalty"],_);const N=f(e,["frequencyPenalty"]);N!=null&&m(l,["frequencyPenalty"],N);const A=f(e,["seed"]);A!=null&&m(l,["seed"],A);const w=f(e,["responseMimeType"]);w!=null&&m(l,["responseMimeType"],w);const E=f(e,["responseSchema"]);E!=null&&m(l,["responseSchema"],Ld(E));const M=f(e,["responseJsonSchema"]);if(M!=null&&m(l,["responseJsonSchema"],M),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=f(e,["safetySettings"]);if(i!==void 0&&H!=null){let j=H;Array.isArray(j)&&(j=j.map(de=>n1(de))),m(i,["safetySettings"],j)}const I=f(e,["tools"]);if(i!==void 0&&I!=null){let j=Wl(I);Array.isArray(j)&&(j=j.map(de=>u1(Zl(de)))),m(i,["tools"],j)}const D=f(e,["toolConfig"]);if(i!==void 0&&D!=null&&m(i,["toolConfig"],a1(D)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=f(e,["cachedContent"]);i!==void 0&&U!=null&&m(i,["cachedContent"],Oi(t,U));const k=f(e,["responseModalities"]);k!=null&&m(l,["responseModalities"],k);const F=f(e,["mediaResolution"]);F!=null&&m(l,["mediaResolution"],F);const P=f(e,["speechConfig"]);if(P!=null&&m(l,["speechConfig"],Hd(P)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Y=f(e,["thinkingConfig"]);Y!=null&&m(l,["thinkingConfig"],Y);const J=f(e,["imageConfig"]);return J!=null&&m(l,["imageConfig"],qA(J)),l}function hA(t,e,i){const l={},s=f(e,["systemInstruction"]);i!==void 0&&s!=null&&m(i,["systemInstruction"],un(s));const a=f(e,["temperature"]);a!=null&&m(l,["temperature"],a);const c=f(e,["topP"]);c!=null&&m(l,["topP"],c);const d=f(e,["topK"]);d!=null&&m(l,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(l,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(l,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(l,["stopSequences"],y);const T=f(e,["responseLogprobs"]);T!=null&&m(l,["responseLogprobs"],T);const x=f(e,["logprobs"]);x!=null&&m(l,["logprobs"],x);const _=f(e,["presencePenalty"]);_!=null&&m(l,["presencePenalty"],_);const N=f(e,["frequencyPenalty"]);N!=null&&m(l,["frequencyPenalty"],N);const A=f(e,["seed"]);A!=null&&m(l,["seed"],A);const w=f(e,["responseMimeType"]);w!=null&&m(l,["responseMimeType"],w);const E=f(e,["responseSchema"]);E!=null&&m(l,["responseSchema"],Ld(E));const M=f(e,["responseJsonSchema"]);M!=null&&m(l,["responseJsonSchema"],M);const H=f(e,["routingConfig"]);H!=null&&m(l,["routingConfig"],H);const I=f(e,["modelSelectionConfig"]);I!=null&&m(l,["modelConfig"],I);const D=f(e,["safetySettings"]);if(i!==void 0&&D!=null){let L=D;Array.isArray(L)&&(L=L.map(O=>O)),m(i,["safetySettings"],L)}const U=f(e,["tools"]);if(i!==void 0&&U!=null){let L=Wl(U);Array.isArray(L)&&(L=L.map(O=>ex(Zl(O)))),m(i,["tools"],L)}const k=f(e,["toolConfig"]);i!==void 0&&k!=null&&m(i,["toolConfig"],k);const F=f(e,["labels"]);i!==void 0&&F!=null&&m(i,["labels"],F);const P=f(e,["cachedContent"]);i!==void 0&&P!=null&&m(i,["cachedContent"],Oi(t,P));const Y=f(e,["responseModalities"]);Y!=null&&m(l,["responseModalities"],Y);const J=f(e,["mediaResolution"]);J!=null&&m(l,["mediaResolution"],J);const j=f(e,["speechConfig"]);j!=null&&m(l,["speechConfig"],jv(Hd(j)));const de=f(e,["audioTimestamp"]);de!=null&&m(l,["audioTimestamp"],de);const q=f(e,["thinkingConfig"]);q!=null&&m(l,["thinkingConfig"],q);const ie=f(e,["imageConfig"]);return ie!=null&&m(l,["imageConfig"],PA(ie)),l}function Sy(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["contents"]);if(s!=null){let c=Kn(s);Array.isArray(c)&&(c=c.map(d=>vu(d))),m(i,["contents"],c)}const a=f(e,["config"]);return a!=null&&m(i,["generationConfig"],dA(t,a,i)),i}function _y(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["contents"]);if(s!=null){let c=Kn(s);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["contents"],c)}const a=f(e,["config"]);return a!=null&&m(i,["generationConfig"],hA(t,a,i)),i}function Cy(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["candidates"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(h=>Hw(h))),m(e,["candidates"],p)}const s=f(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const a=f(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const c=f(t,["responseId"]);c!=null&&m(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function Ey(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["candidates"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(y=>y)),m(e,["candidates"],h)}const s=f(t,["createTime"]);s!=null&&m(e,["createTime"],s);const a=f(t,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const c=f(t,["promptFeedback"]);c!=null&&m(e,["promptFeedback"],c);const d=f(t,["responseId"]);d!=null&&m(e,["responseId"],d);const p=f(t,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function pA(t,e){const i={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const s=f(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const a=f(t,["guidanceScale"]);if(e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const y=f(t,["language"]);e!==void 0&&y!=null&&m(e,["parameters","language"],y);const T=f(t,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const x=f(t,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=f(t,["imageSize"]);if(e!==void 0&&_!=null&&m(e,["parameters","sampleImageSize"],_),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function mA(t,e){const i={},l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&m(e,["parameters","negativePrompt"],s);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const T=f(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const x=f(t,["includeRaiReason"]);e!==void 0&&x!=null&&m(e,["parameters","includeRaiReason"],x);const _=f(t,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const N=f(t,["outputMimeType"]);e!==void 0&&N!=null&&m(e,["parameters","outputOptions","mimeType"],N);const A=f(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&m(e,["parameters","outputOptions","compressionQuality"],A);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const E=f(t,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const M=f(t,["imageSize"]);e!==void 0&&M!=null&&m(e,["parameters","sampleImageSize"],M);const H=f(t,["enhancePrompt"]);return e!==void 0&&H!=null&&m(e,["parameters","enhancePrompt"],H),i}function gA(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["prompt"]);s!=null&&m(i,["instances[0]","prompt"],s);const a=f(e,["config"]);return a!=null&&pA(a,i),i}function yA(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["prompt"]);s!=null&&m(i,["instances[0]","prompt"],s);const a=f(e,["config"]);return a!=null&&mA(a,i),i}function vA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["predictions"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>RA(c))),m(e,["generatedImages"],a)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&m(e,["positivePromptSafetyAttributes"],Zv(s)),e}function xA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["predictions"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>xu(c))),m(e,["generatedImages"],a)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&m(e,["positivePromptSafetyAttributes"],Wv(s)),e}function TA(t,e){const i={},l=f(t,["numberOfVideos"]);if(e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=f(t,["durationSeconds"]);if(e!==void 0&&s!=null&&m(e,["parameters","durationSeconds"],s),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const c=f(t,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=f(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=f(t,["lastFrame"]);e!==void 0&&y!=null&&m(e,["instances[0]","lastFrame"],Tu(y));const T=f(t,["referenceImages"]);if(e!==void 0&&T!=null){let x=T;Array.isArray(x)&&(x=x.map(_=>_1(_))),m(e,["instances[0]","referenceImages"],x)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function SA(t,e){const i={},l=f(t,["numberOfVideos"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const a=f(t,["fps"]);e!==void 0&&a!=null&&m(e,["parameters","fps"],a);const c=f(t,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const d=f(t,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=f(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const T=f(t,["pubsubTopic"]);e!==void 0&&T!=null&&m(e,["parameters","pubsubTopic"],T);const x=f(t,["negativePrompt"]);e!==void 0&&x!=null&&m(e,["parameters","negativePrompt"],x);const _=f(t,["enhancePrompt"]);e!==void 0&&_!=null&&m(e,["parameters","enhancePrompt"],_);const N=f(t,["generateAudio"]);e!==void 0&&N!=null&&m(e,["parameters","generateAudio"],N);const A=f(t,["lastFrame"]);e!==void 0&&A!=null&&m(e,["instances[0]","lastFrame"],ii(A));const w=f(t,["referenceImages"]);if(e!==void 0&&w!=null){let H=w;Array.isArray(H)&&(H=H.map(I=>C1(I))),m(e,["instances[0]","referenceImages"],H)}const E=f(t,["mask"]);e!==void 0&&E!=null&&m(e,["instances[0]","mask"],S1(E));const M=f(t,["compressionQuality"]);return e!==void 0&&M!=null&&m(e,["parameters","compressionQuality"],M),i}function _A(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["metadata"]);l!=null&&m(e,["metadata"],l);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const c=f(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],AA(c)),e}function CA(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["metadata"]);l!=null&&m(e,["metadata"],l);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const c=f(t,["response"]);return c!=null&&m(e,["response"],NA(c)),e}function EA(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["prompt"]);s!=null&&m(i,["instances[0]","prompt"],s);const a=f(e,["image"]);a!=null&&m(i,["instances[0]","image"],Tu(a));const c=f(e,["video"]);c!=null&&m(i,["instances[0]","video"],tx(c));const d=f(e,["source"]);d!=null&&bA(d,i);const p=f(e,["config"]);return p!=null&&TA(p,i),i}function wA(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["prompt"]);s!=null&&m(i,["instances[0]","prompt"],s);const a=f(e,["image"]);a!=null&&m(i,["instances[0]","image"],ii(a));const c=f(e,["video"]);c!=null&&m(i,["instances[0]","video"],nx(c));const d=f(e,["source"]);d!=null&&MA(d,i);const p=f(e,["config"]);return p!=null&&SA(p,i),i}function AA(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>DA(c))),m(e,["generatedVideos"],a)}const l=f(t,["raiMediaFilteredCount"]);l!=null&&m(e,["raiMediaFilteredCount"],l);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function NA(t){const e={},i=f(t,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>UA(c))),m(e,["generatedVideos"],a)}const l=f(t,["raiMediaFilteredCount"]);l!=null&&m(e,["raiMediaFilteredCount"],l);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function bA(t,e){const i={},l=f(t,["prompt"]);e!==void 0&&l!=null&&m(e,["instances[0]","prompt"],l);const s=f(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],Tu(s));const a=f(t,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],tx(a)),i}function MA(t,e){const i={},l=f(t,["prompt"]);e!==void 0&&l!=null&&m(e,["instances[0]","prompt"],l);const s=f(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],ii(s));const a=f(t,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],nx(a)),i}function RA(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["image"],BA(i));const l=f(t,["raiFilteredReason"]);l!=null&&m(e,["raiFilteredReason"],l);const s=f(t,["_self"]);return s!=null&&m(e,["safetyAttributes"],Zv(s)),e}function xu(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["image"],Qv(i));const l=f(t,["raiFilteredReason"]);l!=null&&m(e,["raiFilteredReason"],l);const s=f(t,["_self"]);s!=null&&m(e,["safetyAttributes"],Wv(s));const a=f(t,["prompt"]);return a!=null&&m(e,["enhancedPrompt"],a),e}function IA(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["mask"],Qv(i));const l=f(t,["labels"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(a=>a)),m(e,["labels"],s)}return e}function DA(t){const e={},i=f(t,["video"]);return i!=null&&m(e,["video"],x1(i)),e}function UA(t){const e={},i=f(t,["_self"]);return i!=null&&m(e,["video"],T1(i)),e}function LA(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const l=f(t,["responseJsonSchema"]);l!=null&&m(e,["responseJsonSchema"],l);const s=f(t,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const a=f(t,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const c=f(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=f(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const T=f(t,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const x=f(t,["responseLogprobs"]);x!=null&&m(e,["responseLogprobs"],x);const _=f(t,["responseMimeType"]);_!=null&&m(e,["responseMimeType"],_);const N=f(t,["responseModalities"]);N!=null&&m(e,["responseModalities"],N);const A=f(t,["responseSchema"]);A!=null&&m(e,["responseSchema"],A);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const E=f(t,["seed"]);E!=null&&m(e,["seed"],E);const M=f(t,["speechConfig"]);M!=null&&m(e,["speechConfig"],jv(M));const H=f(t,["stopSequences"]);H!=null&&m(e,["stopSequences"],H);const I=f(t,["temperature"]);I!=null&&m(e,["temperature"],I);const D=f(t,["thinkingConfig"]);D!=null&&m(e,["thinkingConfig"],D);const U=f(t,["topK"]);U!=null&&m(e,["topK"],U);const k=f(t,["topP"]);if(k!=null&&m(e,["topP"],k),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function HA(t,e){const i={},l=f(e,["model"]);return l!=null&&m(i,["_url","name"],lt(t,l)),i}function kA(t,e){const i={},l=f(e,["model"]);return l!=null&&m(i,["_url","name"],lt(t,l)),i}function zA(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function GA(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function qA(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const l=f(t,["imageSize"]);if(l!=null&&m(e,["imageSize"],l),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function PA(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const l=f(t,["imageSize"]);l!=null&&m(e,["imageSize"],l);const s=f(t,["outputMimeType"]);s!=null&&m(e,["imageOutputOptions","mimeType"],s);const a=f(t,["outputCompressionQuality"]);return a!=null&&m(e,["imageOutputOptions","compressionQuality"],a),e}function BA(t){const e={},i=f(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Co(i));const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function Qv(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const l=f(t,["bytesBase64Encoded"]);l!=null&&m(e,["imageBytes"],Co(l));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Tu(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Co(i));const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function ii(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const l=f(t,["imageBytes"]);l!=null&&m(e,["bytesBase64Encoded"],Co(l));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function VA(t,e,i){const l={},s=f(e,["pageSize"]);i!==void 0&&s!=null&&m(i,["_query","pageSize"],s);const a=f(e,["pageToken"]);i!==void 0&&a!=null&&m(i,["_query","pageToken"],a);const c=f(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&m(i,["_url","models_url"],Vv(t,d)),l}function OA(t,e,i){const l={},s=f(e,["pageSize"]);i!==void 0&&s!=null&&m(i,["_query","pageSize"],s);const a=f(e,["pageToken"]);i!==void 0&&a!=null&&m(i,["_query","pageToken"],a);const c=f(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&m(i,["_url","models_url"],Vv(t,d)),l}function FA(t,e){const i={},l=f(e,["config"]);return l!=null&&VA(t,l,i),i}function YA(t,e){const i={},l=f(e,["config"]);return l!=null&&OA(t,l,i),i}function JA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["nextPageToken"]);l!=null&&m(e,["nextPageToken"],l);const s=f(t,["_self"]);if(s!=null){let a=Ov(s);Array.isArray(a)&&(a=a.map(c=>ad(c))),m(e,["models"],a)}return e}function KA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["nextPageToken"]);l!=null&&m(e,["nextPageToken"],l);const s=f(t,["_self"]);if(s!=null){let a=Ov(s);Array.isArray(a)&&(a=a.map(c=>ud(c))),m(e,["models"],a)}return e}function XA(t){const e={},i=f(t,["maskMode"]);i!=null&&m(e,["maskMode"],i);const l=f(t,["segmentationClasses"]);l!=null&&m(e,["maskClasses"],l);const s=f(t,["maskDilation"]);return s!=null&&m(e,["dilation"],s),e}function ad(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["displayName"]);l!=null&&m(e,["displayName"],l);const s=f(t,["description"]);s!=null&&m(e,["description"],s);const a=f(t,["version"]);a!=null&&m(e,["version"],a);const c=f(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],c1(c));const d=f(t,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=f(t,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=f(t,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const y=f(t,["temperature"]);y!=null&&m(e,["temperature"],y);const T=f(t,["maxTemperature"]);T!=null&&m(e,["maxTemperature"],T);const x=f(t,["topP"]);x!=null&&m(e,["topP"],x);const _=f(t,["topK"]);_!=null&&m(e,["topK"],_);const N=f(t,["thinking"]);return N!=null&&m(e,["thinking"],N),e}function ud(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["displayName"]);l!=null&&m(e,["displayName"],l);const s=f(t,["description"]);s!=null&&m(e,["description"],s);const a=f(t,["versionId"]);a!=null&&m(e,["version"],a);const c=f(t,["deployedModels"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(x=>sA(x))),m(e,["endpoints"],T)}const d=f(t,["labels"]);d!=null&&m(e,["labels"],d);const p=f(t,["_self"]);p!=null&&m(e,["tunedModelInfo"],f1(p));const h=f(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const y=f(t,["checkpoints"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(x=>x)),m(e,["checkpoints"],T)}return e}function $A(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const l=f(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],aA(a));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],uA(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],Lw(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const T=f(t,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const x=f(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function QA(t){const e={},i=f(t,["productImage"]);return i!=null&&m(e,["image"],ii(i)),e}function ZA(t,e){const i={},l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const s=f(t,["baseSteps"]);e!==void 0&&s!=null&&m(e,["parameters","baseSteps"],s);const a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(t,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const y=f(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const T=f(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T);const x=f(t,["enhancePrompt"]);e!==void 0&&x!=null&&m(e,["parameters","enhancePrompt"],x);const _=f(t,["labels"]);return e!==void 0&&_!=null&&m(e,["labels"],_),i}function WA(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["source"]);s!=null&&e1(s,i);const a=f(e,["config"]);return a!=null&&ZA(a,i),i}function jA(t){const e={},i=f(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>xu(s))),m(e,["generatedImages"],l)}return e}function e1(t,e){const i={},l=f(t,["prompt"]);e!==void 0&&l!=null&&m(e,["instances[0]","prompt"],l);const s=f(t,["personImage"]);e!==void 0&&s!=null&&m(e,["instances[0]","personImage","image"],ii(s));const a=f(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>QA(d))),m(e,["instances[0]","productImages"],c)}return i}function t1(t){const e={},i=f(t,["referenceImage"]);i!=null&&m(e,["referenceImage"],ii(i));const l=f(t,["referenceId"]);l!=null&&m(e,["referenceId"],l);const s=f(t,["referenceType"]);s!=null&&m(e,["referenceType"],s);const a=f(t,["maskImageConfig"]);a!=null&&m(e,["maskImageConfig"],XA(a));const c=f(t,["controlImageConfig"]);c!=null&&m(e,["controlImageConfig"],Bw(c));const d=f(t,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=f(t,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function Zv(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const l=f(t,["safetyAttributes","scores"]);l!=null&&m(e,["scores"],l);const s=f(t,["contentType"]);return s!=null&&m(e,["contentType"],s),e}function Wv(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const l=f(t,["safetyAttributes","scores"]);l!=null&&m(e,["scores"],l);const s=f(t,["contentType"]);return s!=null&&m(e,["contentType"],s),e}function n1(t){const e={},i=f(t,["category"]);if(i!=null&&m(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const l=f(t,["threshold"]);return l!=null&&m(e,["threshold"],l),e}function i1(t){const e={},i=f(t,["image"]);return i!=null&&m(e,["image"],ii(i)),e}function o1(t,e){const i={},l=f(t,["mode"]);e!==void 0&&l!=null&&m(e,["parameters","mode"],l);const s=f(t,["maxPredictions"]);e!==void 0&&s!=null&&m(e,["parameters","maxPredictions"],s);const a=f(t,["confidenceThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","confidenceThreshold"],a);const c=f(t,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=f(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),i}function l1(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["source"]);s!=null&&s1(s,i);const a=f(e,["config"]);return a!=null&&o1(a,i),i}function r1(t){const e={},i=f(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>IA(s))),m(e,["generatedMasks"],l)}return e}function s1(t,e){const i={},l=f(t,["prompt"]);e!==void 0&&l!=null&&m(e,["instances[0]","prompt"],l);const s=f(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],ii(s));const a=f(t,["scribbleImage"]);return e!==void 0&&a!=null&&m(e,["instances[0]","scribble"],i1(a)),i}function jv(t){const e={},i=f(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const l=f(t,["voiceConfig"]);if(l!=null&&m(e,["voiceConfig"],l),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function a1(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],cA(i));const l=f(t,["retrievalConfig"]);return l!=null&&m(e,["retrievalConfig"],l),e}function u1(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(T=>T)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],zA(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],GA(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function ex(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let T=i;Array.isArray(T)&&(T=T.map(x=>fA(x))),m(e,["functionDeclarations"],T)}const l=f(t,["retrieval"]);l!=null&&m(e,["retrieval"],l);const s=f(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const a=f(t,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function c1(t){const e={},i=f(t,["baseModel"]);i!=null&&m(e,["baseModel"],i);const l=f(t,["createTime"]);l!=null&&m(e,["createTime"],l);const s=f(t,["updateTime"]);return s!=null&&m(e,["updateTime"],s),e}function f1(t){const e={},i=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(e,["baseModel"],i);const l=f(t,["createTime"]);l!=null&&m(e,["createTime"],l);const s=f(t,["updateTime"]);return s!=null&&m(e,["updateTime"],s),e}function d1(t,e){const i={},l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const s=f(t,["description"]);e!==void 0&&s!=null&&m(e,["description"],s);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),i}function h1(t,e){const i={},l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const s=f(t,["description"]);e!==void 0&&s!=null&&m(e,["description"],s);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),i}function p1(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","name"],lt(t,l));const s=f(e,["config"]);return s!=null&&d1(s,i),i}function m1(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["config"]);return s!=null&&h1(s,i),i}function g1(t,e){const i={},l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const s=f(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&m(e,["parameters","safetySetting"],s);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const c=f(t,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=f(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=f(t,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=f(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const T=f(t,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const x=f(t,["numberOfImages"]);e!==void 0&&x!=null&&m(e,["parameters","sampleCount"],x);const _=f(t,["mode"]);return e!==void 0&&_!=null&&m(e,["parameters","mode"],_),i}function y1(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["_url","model"],lt(t,l));const s=f(e,["image"]);s!=null&&m(i,["instances[0]","image"],ii(s));const a=f(e,["upscaleFactor"]);a!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],a);const c=f(e,["config"]);return c!=null&&g1(c,i),i}function v1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["predictions"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(a=>xu(a))),m(e,["generatedImages"],s)}return e}function x1(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const l=f(t,["encodedVideo"]);l!=null&&m(e,["videoBytes"],Co(l));const s=f(t,["encoding"]);return s!=null&&m(e,["mimeType"],s),e}function T1(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const l=f(t,["bytesBase64Encoded"]);l!=null&&m(e,["videoBytes"],Co(l));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function S1(t){const e={},i=f(t,["image"]);i!=null&&m(e,["_self"],ii(i));const l=f(t,["maskMode"]);return l!=null&&m(e,["maskMode"],l),e}function _1(t){const e={},i=f(t,["image"]);i!=null&&m(e,["image"],Tu(i));const l=f(t,["referenceType"]);return l!=null&&m(e,["referenceType"],l),e}function C1(t){const e={},i=f(t,["image"]);i!=null&&m(e,["image"],ii(i));const l=f(t,["referenceType"]);return l!=null&&m(e,["referenceType"],l),e}function tx(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const l=f(t,["videoBytes"]);l!=null&&m(e,["encodedVideo"],Co(l));const s=f(t,["mimeType"]);return s!=null&&m(e,["encoding"],s),e}function nx(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["gcsUri"],i);const l=f(t,["videoBytes"]);l!=null&&m(e,["bytesBase64Encoded"],Co(l));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E1="Content-Type",w1="X-Server-Timeout",A1="User-Agent",cd="x-goog-api-client",N1="1.30.0",b1=`google-genai-sdk/${N1}`,M1="v1beta1",R1="v1beta",wy=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class I1{constructor(e){var i,l;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:M1,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:R1,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const l=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&l.push(e.apiVersion),l.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,l){const s=[this.getRequestUrlInternal(i)];return l&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const l=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,i,l);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))s.searchParams.append(c,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,i,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,i){const l=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(i))typeof a=="object"?l[s]=Object.assign(Object.assign({},l[s]),a):a!==void 0&&(l[s]=a);return l}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const l=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,i,l);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,i,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,l,s){if(i&&i.timeout||s){const a=new AbortController,c=a.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const d=setTimeout(()=>a.abort(),i.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=c}return i&&i.extraBody!==null&&D1(e,i.extraBody),e.headers=await this.getHeadersInternal(i,l),e}async unaryApiCall(e,i,l){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:l})).then(async s=>(await Ay(s),new ld(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,i,l){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:l})).then(async s=>(await Ay(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var i;return Fl(this,arguments,function*(){const s=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield St(s.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(p,{stream:!0});try{const T=JSON.parse(h);if("error"in T){const x=JSON.parse(JSON.stringify(T.error)),_=x.status,N=x.code,A=`got status: ${_}. ${JSON.stringify(T)}`;if(N>=400&&N<600)throw new yu({message:A,status:N})}}catch(T){if(T.name==="ApiError")throw T}c+=h;let y=c.match(wy);for(;y;){const T=y[1];try{const x=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield St(new ld(x)),c=c.slice(y[0].length),y=c.match(wy)}catch(x){throw new Error(`exception parsing stream chunk ${T}. ${x}`)}}}}finally{s.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(l=>{throw new Error(`exception ${l} sending request`)})}getDefaultHeaders(){const e={},i=b1+" "+this.clientOptions.userAgentExtra;return e[A1]=i,e[cd]=i,e[E1]="application/json",e}async getHeadersInternal(e,i){const l=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))l.append(s,a);e.timeout&&e.timeout>0&&l.append(w1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(l,i),l}getFileName(e){var i;let l="";return typeof e=="string"&&(l=e.replace(/[/\\]+$/,""),l=(i=l.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),l}async uploadFile(e,i){var l;const s={};i!=null&&(s.mimeType=i.mimeType,s.name=i.name,s.displayName=i.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);s.sizeBytes=String(c.size);const d=(l=i==null?void 0:i.mimeType)!==null&&l!==void 0?l:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const p={file:s},h=this.getFileName(e),y=_e("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,p,i==null?void 0:i.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,i,l){var s;const a=this.clientOptions.uploader,c=await a.stat(i),d=String(c.size),p=(s=l==null?void 0:l.mimeType)!==null&&s!==void 0?s:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(i),T={};l!=null&&l.customMetadata&&(T.customMetadata=l.customMetadata),l!=null&&l.chunkingConfig&&(T.chunkingConfig=l.chunkingConfig);const x=await this.fetchUploadUrl(h,d,p,y,T,l==null?void 0:l.httpOptions);return a.uploadToFileSearchStore(i,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,l,s,a,c){var d;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${l}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function Ay(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let l;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?l=await t.json():l={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(l);throw i>=400&&i<600?new yu({message:s,status:i}):new Error(s)}}function D1(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))i=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function l(a,c){const d=Object.assign({},a);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const h=c[p],y=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?d[p]=l(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const s=l(i,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U1="mcp_used/unknown";let L1=!1;function ix(t){for(const e of t)if(H1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return L1}function ox(t){var e;const i=(e=t[cd])!==null&&e!==void 0?e:"";t[cd]=(i+` ${U1}`).trimStart()}function H1(t){return t!==null&&typeof t=="object"&&t instanceof zd}function k1(t,e=100){return Fl(this,arguments,function*(){let l,s=0;for(;s<e;){const a=yield St(t.listTools({cursor:l}));for(const c of a.tools)yield yield St(c),s++;if(!a.nextCursor)break;l=a.nextCursor}})}class zd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new zd(e,i)}async initialize(){var e,i,l,s;if(this.mcpTools.length>0)return;const a={},c=[];for(const y of this.mcpClients)try{for(var d=!0,p=(i=void 0,ts(k1(y))),h;h=await p.next(),e=h.done,!e;d=!0){s=h.value,d=!1;const T=s;c.push(T);const x=T.name;if(a[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);a[x]=y}}catch(T){i={error:T}}finally{try{!d&&!e&&(l=p.return)&&await l.call(p)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),bC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const l of e)if(l.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[l.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await s.callTool({name:l.name,arguments:l.args},void 0,a);i.push({functionResponse:{name:l.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function z1(t,e,i){const l=new TC;let s;i.data instanceof Blob?s=JSON.parse(await i.data.text()):s=JSON.parse(i.data),Object.assign(l,s),e(l)}class G1{constructor(e,i,l){this.apiClient=e,this.auth=i,this.webSocketFactory=l}async connect(e){var i,l;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=B1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const y=new Promise(H=>{h=H}),T=e.callbacks,x=function(){h({})},_=this.apiClient,N={onopen:x,onmessage:H=>{z1(_,T.onmessage,H)},onerror:(i=T==null?void 0:T.onerror)!==null&&i!==void 0?i:function(H){},onclose:(l=T==null?void 0:T.onclose)!==null&&l!==void 0?l:function(H){}},A=this.webSocketFactory.create(p,P1(c),N);A.connect(),await y;const M={setup:{model:lt(this.apiClient,e.model)}};return A.send(JSON.stringify(M)),new q1(A,this.apiClient)}}class q1{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=ww(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=Ew(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Vl.PLAY)}pause(){this.sendPlaybackControl(Vl.PAUSE)}stop(){this.sendPlaybackControl(Vl.STOP)}resetContext(){this.sendPlaybackControl(Vl.RESET_CONTEXT)}close(){this.conn.close()}}function P1(t){const e={};return t.forEach((i,l)=>{e[l]=i}),e}function B1(t){const e=new Headers;for(const[i,l]of Object.entries(t))e.append(i,l);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function O1(t,e,i){const l=new xC;let s;i.data instanceof Blob?s=await i.data.text():i.data instanceof ArrayBuffer?s=new TextDecoder().decode(i.data):s=i.data;const a=JSON.parse(s);if(t.isVertexAI()){const c=bw(a);Object.assign(l,c)}else Object.assign(l,a);e(l)}class F1{constructor(e,i,l){this.apiClient=e,this.auth=i,this.webSocketFactory=l,this.music=new G1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,l,s,a,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&ix(e.config.tools)&&ox(T);const x=X1(T);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,y);else{const P=this.apiClient.getApiKey();let Y="BidiGenerateContent",J="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Y="BidiGenerateContentConstrained",J="access_token"),y=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${Y}?${J}=${P}`}let _=()=>{};const N=new Promise(P=>{_=P}),A=e.callbacks,w=function(){var P;(P=A==null?void 0:A.onopen)===null||P===void 0||P.call(A),_({})},E=this.apiClient,M={onopen:w,onmessage:P=>{O1(E,A.onmessage,P)},onerror:(i=A==null?void 0:A.onerror)!==null&&i!==void 0?i:function(P){},onclose:(l=A==null?void 0:A.onclose)!==null&&l!==void 0?l:function(P){}},H=this.webSocketFactory.create(y,K1(x),M);H.connect(),await N;let I=lt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const P=this.apiClient.getProject(),Y=this.apiClient.getLocation();I=`projects/${P}/locations/${Y}/`+I}let D={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[tu.AUDIO]}:e.config.responseModalities=[tu.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],k=[];for(const P of U)if(this.isCallableTool(P)){const Y=P;k.push(await Y.tool())}else k.push(P);k.length>0&&(e.config.tools=k);const F={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=Cw(this.apiClient,F):D=_w(this.apiClient,F),delete D.config,H.send(JSON.stringify(D)),new J1(H,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Y1={turnComplete:!0};class J1{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let l=[];try{l=Kn(i.turns),e.isVertexAI()||(l=l.map(s=>vu(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:l,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let l=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?l=i.functionResponses:l=[i.functionResponses],l.length===0)throw new Error("functionResponses is required.");for(const a of l){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(V1)}return{toolResponse:{functionResponses:l}}}sendClientContent(e){e=Object.assign(Object.assign({},Y1),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:Nw(e)}:i={realtimeInput:Aw(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function K1(t){const e={};return t.forEach((i,l)=>{e[l]=i}),e}function X1(t){const e=new Headers;for(const[i,l]of Object.entries(t))e.append(i,l);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ny=10;function by(t){var e,i,l;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(Yl(c)){s=!0;break}if(!s)return!0;const a=(l=t==null?void 0:t.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Yl(t){return"callTool"in t&&typeof t.callTool=="function"}function $1(t){var e,i,l;return(l=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(s=>Yl(s)))!==null&&l!==void 0?l:!1}function My(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((l,s)=>{if(Yl(l))return;const a=l;a.functionDeclarations&&a.functionDeclarations.length>0&&i.push(s)}),i}function Ry(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q1 extends Vi{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var l,s,a,c,d;const p=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!$1(i)||by(i.config))return await this.generateContentInternal(p);const h=My(i);if(h.length>0){const A=h.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let y,T;const x=Kn(p.contents),_=(a=(s=(l=p.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Ny;let N=0;for(;N<_&&(y=await this.generateContentInternal(p),!(!y.functionCalls||y.functionCalls.length===0));){const A=y.candidates[0].content,w=[];for(const E of(d=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Yl(E)){const H=await E.callTool(y.functionCalls);w.push(...H)}N++,T={role:"user",parts:w},p.contents=Kn(p.contents),p.contents.push(A),p.contents.push(T),Ry(p.config)&&(x.push(A),x.push(T))}return Ry(p.config)&&(y.automaticFunctionCallingHistory=x),y},this.generateContentStream=async i=>{var l,s,a,c,d;if(this.maybeMoveToResponseJsonSchem(i),by(i.config)){const T=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(T)}const p=My(i);if(p.length>0){const T=p.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(s=(l=i==null?void 0:i.config)===null||l===void 0?void 0:l.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,y=(d=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(l=>{var s;let a;const c=[];if(l!=null&&l.generatedImages)for(const p of l.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((s=p==null?void 0:p.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:c.push(p);let d;return a?d={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:l.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:l.sdkHttpResponse},d}),this.list=async i=>{var l;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((l=c.config)===null||l===void 0)&&l.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Zo(Pi.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async i=>{const l={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(l.referenceImages=i.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(l)},this.upscaleImage=async i=>{let l={numberOfImages:1,mode:"upscale"};i.config&&(l=Object.assign(Object.assign({},l),i.config));const s={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:l};return await this.upscaleImageInternal(s)},this.generateVideos=async i=>{var l,s,a,c,d,p;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((l=i.video)===null||l===void 0)&&l.uri&&(!((s=i.video)===null||s===void 0)&&s.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(a=i.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((p=(d=i.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,l,s;const a=(i=e.config)===null||i===void 0?void 0:i.tools;if(!a)return e;const c=await Promise.all(a.map(async p=>Yl(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&ix(e.config.tools)){const p=(s=(l=e.config.httpOptions)===null||l===void 0?void 0:l.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),ox(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var i,l,s;const a=new Map;for(const c of(l=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&l!==void 0?l:[])if(Yl(c)){const d=c,p=await d.tool();for(const h of(s=p.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var i,l,s;const a=(s=(l=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&s!==void 0?s:Ny;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,y,T){var x,_;return Fl(this,arguments,function*(){for(var N,A,w,E;d<a;){c&&(d++,c=!1);const D=yield St(h.processParamsMaybeAddMcpUsage(T)),U=yield St(h.generateContentStreamInternal(D)),k=[],F=[];try{for(var M=!0,H=(A=void 0,ts(U)),I;I=yield St(H.next()),N=I.done,!N;M=!0){E=I.value,M=!1;const P=E;if(yield yield St(P),P.candidates&&(!((x=P.candidates[0])===null||x===void 0)&&x.content)){F.push(P.candidates[0].content);for(const Y of(_=P.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(d<a&&Y.functionCall){if(!Y.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(Y.functionCall.name)){const J=yield St(y.get(Y.functionCall.name).callTool([Y.functionCall]));k.push(...J)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${Y.functionCall.name}`)}}}}catch(P){A={error:P}}finally{try{!M&&!N&&(w=H.return)&&(yield St(w.call(H)))}finally{if(A)throw A.error}}if(k.length>0){c=!0;const P=new $r;P.candidates=[{content:{role:"user",parts:k}}],yield yield St(P);const Y=[];Y.push(...F),Y.push({role:"user",parts:k});const J=Kn(T.contents).concat(Y);T.contents=J}else break}})})(this,p,e)}async generateContentInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=_y(this.apiClient,e);return d=_e("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=Ey(y),x=new $r;return Object.assign(x,T),x})}else{const h=Sy(this.apiClient,e);return d=_e("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=Cy(y),x=new $r;return Object.assign(x,T),x})}}async generateContentStreamInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=_y(this.apiClient,e);return d=_e("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(T){return Fl(this,arguments,function*(){var x,_,N,A;try{for(var w=!0,E=ts(T),M;M=yield St(E.next()),x=M.done,!x;w=!0){A=M.value,w=!1;const H=A,I=Ey(yield St(H.json()));I.sdkHttpResponse={headers:H.headers};const D=new $r;Object.assign(D,I),yield yield St(D)}}catch(H){_={error:H}}finally{try{!w&&!x&&(N=E.return)&&(yield St(N.call(E)))}finally{if(_)throw _.error}}})})}else{const h=Sy(this.apiClient,e);return d=_e("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(T){return Fl(this,arguments,function*(){var x,_,N,A;try{for(var w=!0,E=ts(T),M;M=yield St(E.next()),x=M.done,!x;w=!0){A=M.value,w=!1;const H=A,I=Cy(yield St(H.json()));I.sdkHttpResponse={headers:H.headers};const D=new $r;Object.assign(D,I),yield yield St(D)}}catch(H){_={error:H}}finally{try{!w&&!x&&(N=E.return)&&(yield St(N.call(E)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=oA(this.apiClient,e);return d=_e("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=rA(y),x=new ly;return Object.assign(x,T),x})}else{const h=iA(this.apiClient,e);return d=_e("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=lA(y),x=new ly;return Object.assign(x,T),x})}}async generateImagesInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=yA(this.apiClient,e);return d=_e("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=xA(y),x=new ry;return Object.assign(x,T),x})}else{const h=gA(this.apiClient,e);return d=_e("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=vA(y),x=new ry;return Object.assign(x,T),x})}}async editImageInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=jw(this.apiClient,e);return a=_e("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const h=eA(p),y=new aC;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=y1(this.apiClient,e);return a=_e("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const h=v1(p),y=new uC;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=WA(this.apiClient,e);return a=_e("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>{const h=jA(p),y=new cC;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=l1(this.apiClient,e);return a=_e("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>{const h=r1(p),y=new fC;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=kA(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>ud(y))}else{const h=HA(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>ad(y))}}async listInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=YA(this.apiClient,e);return d=_e("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=KA(y),x=new sy;return Object.assign(x,T),x})}else{const h=FA(this.apiClient,e);return d=_e("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=JA(y),x=new sy;return Object.assign(x,T),x})}}async update(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=m1(this.apiClient,e);return d=_e("{model}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>ud(y))}else{const h=p1(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>ad(y))}}async delete(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=$w(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=Zw(y),x=new ay;return Object.assign(x,T),x})}else{const h=Xw(this.apiClient,e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=Qw(y),x=new ay;return Object.assign(x,T),x})}}async countTokens(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Yw(this.apiClient,e);return d=_e("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=Kw(y),x=new uy;return Object.assign(x,T),x})}else{const h=Fw(this.apiClient,e);return d=_e("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=Jw(y),x=new uy;return Object.assign(x,T),x})}}async computeTokens(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=zw(this.apiClient,e);return a=_e("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const h=Gw(p),y=new dC;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=wA(this.apiClient,e);return d=_e("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const T=CA(y),x=new nu;return Object.assign(x,T),x})}else{const h=EA(this.apiClient,e);return d=_e("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>{const T=_A(y),x=new nu;return Object.assign(x,T),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z1 extends Vi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,l=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=i.name.split("/operations/")[0];let a;l&&"httpOptions"in l&&(a=l.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:s,config:{httpOptions:a}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:i.name,config:l});return i._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const i=e.operation,l=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=i.name.split("/operations/")[0];let a;l&&"httpOptions"in l&&(a=l.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:s,config:{httpOptions:a}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:i.name,config:l});return i._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=nC(e);return d=_e("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c}else{const h=tC(e);return d=_e("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c}}async fetchPredictVideosOperationInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=X_(e);return a=_e("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W1(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function j1(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>aN(a))),m(e,["parts"],s)}const l=f(t,["role"]);return l!=null&&m(e,["role"],l),e}function eN(t,e,i){const l={},s=f(e,["expireTime"]);i!==void 0&&s!=null&&m(i,["expireTime"],s);const a=f(e,["newSessionExpireTime"]);i!==void 0&&a!=null&&m(i,["newSessionExpireTime"],a);const c=f(e,["uses"]);i!==void 0&&c!=null&&m(i,["uses"],c);const d=f(e,["liveConnectConstraints"]);i!==void 0&&d!=null&&m(i,["bidiGenerateContentSetup"],sN(t,d));const p=f(e,["lockAdditionalFields"]);return i!==void 0&&p!=null&&m(i,["fieldMask"],p),l}function tN(t,e){const i={},l=f(e,["config"]);return l!=null&&m(i,["config"],eN(t,l,i)),i}function nN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const l=f(t,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function iN(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const l=f(t,["args"]);l!=null&&m(e,["args"],l);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function oN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function lN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function rN(t,e){const i={},l=f(t,["generationConfig"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig"],l);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=f(t,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],kd(T));const x=f(t,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const _=f(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],_);const N=f(t,["systemInstruction"]);e!==void 0&&N!=null&&m(e,["setup","systemInstruction"],j1(un(N)));const A=f(t,["tools"]);if(e!==void 0&&A!=null){let U=Wl(A);Array.isArray(U)&&(U=U.map(k=>cN(Zl(k)))),m(e,["setup","tools"],U)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],uN(w));const E=f(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&m(e,["setup","inputAudioTranscription"],E);const M=f(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&m(e,["setup","outputAudioTranscription"],M);const H=f(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const I=f(t,["contextWindowCompression"]);e!==void 0&&I!=null&&m(e,["setup","contextWindowCompression"],I);const D=f(t,["proactivity"]);return e!==void 0&&D!=null&&m(e,["setup","proactivity"],D),i}function sN(t,e){const i={},l=f(e,["model"]);l!=null&&m(i,["setup","model"],lt(t,l));const s=f(e,["config"]);return s!=null&&m(i,["config"],rN(s,i)),i}function aN(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const l=f(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],nN(a));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],iN(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],W1(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const T=f(t,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const x=f(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function uN(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cN(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(T=>T)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],oN(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],lN(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fN(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const l=t[i];if(typeof l=="object"&&l!=null&&Object.keys(l).length>0){const s=Object.keys(l).map(a=>`${i}.${a}`);e.push(...s)}else e.push(i)}return e.join(",")}function dN(t,e){let i=null;const l=t.bidiGenerateContentSetup;if(typeof l=="object"&&l!==null&&"setup"in l){const a=l.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,i=a):delete t.bidiGenerateContentSetup}else l!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(i){const a=fN(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(h=>c.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class hN extends Vi{constructor(e){super(),this.apiClient=e}async create(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=tN(this.apiClient,e);a=_e("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=dN(d,e.config);return s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pN(t,e){const i={},l=f(t,["displayName"]);return e!==void 0&&l!=null&&m(e,["displayName"],l),i}function mN(t){const e={},i=f(t,["config"]);return i!=null&&pN(i,e),e}function gN(t,e){const i={},l=f(t,["force"]);return e!==void 0&&l!=null&&m(e,["_query","force"],l),i}function yN(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const l=f(t,["config"]);return l!=null&&gN(l,e),e}function vN(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function xN(t,e){const i={},l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["customMetadata"],a)}const s=f(t,["chunkingConfig"]);return e!==void 0&&s!=null&&m(e,["chunkingConfig"],s),i}function TN(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const l=f(t,["metadata"]);l!=null&&m(e,["metadata"],l);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const c=f(t,["response"]);return c!=null&&m(e,["response"],_N(c)),e}function SN(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const l=f(t,["fileName"]);l!=null&&m(e,["fileName"],l);const s=f(t,["config"]);return s!=null&&xN(s,e),e}function _N(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["parent"]);l!=null&&m(e,["parent"],l);const s=f(t,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function CN(t,e){const i={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&m(e,["_query","pageSize"],l);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),i}function EN(t){const e={},i=f(t,["config"]);return i!=null&&CN(i,e),e}function wN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["nextPageToken"]);l!=null&&m(e,["nextPageToken"],l);const s=f(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["fileSearchStores"],a)}return e}function AN(t,e){const i={},l=f(t,["mimeType"]);e!==void 0&&l!=null&&m(e,["mimeType"],l);const s=f(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=f(t,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&m(e,["chunkingConfig"],c),i}function NN(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const l=f(t,["config"]);return l!=null&&AN(l,e),e}function bN(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MN(t,e){const i={},l=f(t,["force"]);return e!==void 0&&l!=null&&m(e,["_query","force"],l),i}function RN(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const l=f(t,["config"]);return l!=null&&MN(l,e),e}function IN(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function DN(t,e){const i={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&m(e,["_query","pageSize"],l);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),i}function UN(t){const e={},i=f(t,["parent"]);i!=null&&m(e,["_url","parent"],i);const l=f(t,["config"]);return l!=null&&DN(l,e),e}function LN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const l=f(t,["nextPageToken"]);l!=null&&m(e,["nextPageToken"],l);const s=f(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HN extends Vi{constructor(e){super(),this.apiClient=e,this.list=async i=>new Zo(Pi.PAGED_ITEM_DOCUMENTS,l=>this.listInternal({parent:i.parent,config:l.config}),await this.listInternal(i),i)}async get(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IN(e);return a=_e("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var i,l;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=RN(e);s=_e("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UN(e);return a=_e("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>{const h=LN(p),y=new hC;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kN extends Vi{constructor(e,i=new HN(e)){super(),this.apiClient=e,this.documents=i,this.list=async(l={})=>new Zo(Pi.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(l),l)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mN(e);return a=_e("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async get(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vN(e);return a=_e("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var i,l;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yN(e);s=_e("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=EN(e);return a=_e("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>{const h=wN(p),y=new pC;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NN(e);return a=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>{const h=bN(p),y=new mC;return Object.assign(y,h),y})}}async importFile(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=SN(e);return a=_e("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),s.then(p=>{const h=TN(p),y=new Id;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zN(t,e){const i={},l=f(t,["name"]);return l!=null&&m(i,["_url","name"],l),i}function GN(t,e){const i={},l=f(t,["name"]);return l!=null&&m(i,["_url","name"],l),i}function qN(t,e,i){const l={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&m(e,["displayName"],s),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(t,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const c=f(t,["learningRateMultiplier"]);if(c!=null&&m(l,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(t,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return l}function PN(t,e,i){const l={};let s=f(i,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const _=f(t,["validationDataset"]);e!==void 0&&_!=null&&m(e,["supervisedTuningSpec"],Iy(_))}else if(s==="PREFERENCE_TUNING"){const _=f(t,["validationDataset"]);e!==void 0&&_!=null&&m(e,["preferenceOptimizationSpec"],Iy(_))}const a=f(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const c=f(t,["description"]);e!==void 0&&c!=null&&m(e,["description"],c);let d=f(i,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const _=f(t,["epochCount"]);e!==void 0&&_!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(d==="PREFERENCE_TUNING"){const _=f(t,["epochCount"]);e!==void 0&&_!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let p=f(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const _=f(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(p==="PREFERENCE_TUNING"){const _=f(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let h=f(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const _=f(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(h==="PREFERENCE_TUNING"){const _=f(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let y=f(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const _=f(t,["adapterSize"]);e!==void 0&&_!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(y==="PREFERENCE_TUNING"){const _=f(t,["adapterSize"]);e!==void 0&&_!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(t,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const x=f(t,["beta"]);return e!==void 0&&x!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],x),l}function BN(t,e){const i={},l=f(t,["baseModel"]);l!=null&&m(i,["baseModel"],l);const s=f(t,["preTunedModel"]);s!=null&&m(i,["preTunedModel"],s);const a=f(t,["trainingDataset"]);a!=null&&WN(a);const c=f(t,["config"]);return c!=null&&qN(c,i),i}function VN(t,e){const i={},l=f(t,["baseModel"]);l!=null&&m(i,["baseModel"],l);const s=f(t,["preTunedModel"]);s!=null&&m(i,["preTunedModel"],s);const a=f(t,["trainingDataset"]);a!=null&&jN(a,i,e);const c=f(t,["config"]);return c!=null&&PN(c,i,e),i}function ON(t,e){const i={},l=f(t,["name"]);return l!=null&&m(i,["_url","name"],l),i}function FN(t,e){const i={},l=f(t,["name"]);return l!=null&&m(i,["_url","name"],l),i}function YN(t,e,i){const l={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const c=f(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),l}function JN(t,e,i){const l={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const c=f(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),l}function KN(t,e){const i={},l=f(t,["config"]);return l!=null&&YN(l,i),i}function XN(t,e){const i={},l=f(t,["config"]);return l!=null&&JN(l,i),i}function $N(t,e){const i={},l=f(t,["sdkHttpResponse"]);l!=null&&m(i,["sdkHttpResponse"],l);const s=f(t,["nextPageToken"]);s!=null&&m(i,["nextPageToken"],s);const a=f(t,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>lx(d))),m(i,["tuningJobs"],c)}return i}function QN(t,e){const i={},l=f(t,["sdkHttpResponse"]);l!=null&&m(i,["sdkHttpResponse"],l);const s=f(t,["nextPageToken"]);s!=null&&m(i,["nextPageToken"],s);const a=f(t,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>fd(d))),m(i,["tuningJobs"],c)}return i}function ZN(t,e){const i={},l=f(t,["name"]);l!=null&&m(i,["model"],l);const s=f(t,["name"]);return s!=null&&m(i,["endpoint"],s),i}function WN(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const l=f(t,["examples"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(a=>a)),m(i,["examples","examples"],s)}return i}function jN(t,e,i){const l={};let s=f(i,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(s==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=f(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return l}function lx(t,e){const i={},l=f(t,["sdkHttpResponse"]);l!=null&&m(i,["sdkHttpResponse"],l);const s=f(t,["name"]);s!=null&&m(i,["name"],s);const a=f(t,["state"]);a!=null&&m(i,["state"],Pv(a));const c=f(t,["createTime"]);c!=null&&m(i,["createTime"],c);const d=f(t,["tuningTask","startTime"]);d!=null&&m(i,["startTime"],d);const p=f(t,["tuningTask","completeTime"]);p!=null&&m(i,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=f(t,["description"]);y!=null&&m(i,["description"],y);const T=f(t,["baseModel"]);T!=null&&m(i,["baseModel"],T);const x=f(t,["_self"]);return x!=null&&m(i,["tunedModel"],ZN(x)),i}function fd(t,e){const i={},l=f(t,["sdkHttpResponse"]);l!=null&&m(i,["sdkHttpResponse"],l);const s=f(t,["name"]);s!=null&&m(i,["name"],s);const a=f(t,["state"]);a!=null&&m(i,["state"],Pv(a));const c=f(t,["createTime"]);c!=null&&m(i,["createTime"],c);const d=f(t,["startTime"]);d!=null&&m(i,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(i,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=f(t,["error"]);y!=null&&m(i,["error"],y);const T=f(t,["description"]);T!=null&&m(i,["description"],T);const x=f(t,["baseModel"]);x!=null&&m(i,["baseModel"],x);const _=f(t,["tunedModel"]);_!=null&&m(i,["tunedModel"],_);const N=f(t,["preTunedModel"]);N!=null&&m(i,["preTunedModel"],N);const A=f(t,["supervisedTuningSpec"]);A!=null&&m(i,["supervisedTuningSpec"],A);const w=f(t,["preferenceOptimizationSpec"]);w!=null&&m(i,["preferenceOptimizationSpec"],w);const E=f(t,["tuningDataStats"]);E!=null&&m(i,["tuningDataStats"],E);const M=f(t,["encryptionSpec"]);M!=null&&m(i,["encryptionSpec"],M);const H=f(t,["partnerModelTuningSpec"]);H!=null&&m(i,["partnerModelTuningSpec"],H);const I=f(t,["customBaseModel"]);I!=null&&m(i,["customBaseModel"],I);const D=f(t,["experiment"]);D!=null&&m(i,["experiment"],D);const U=f(t,["labels"]);U!=null&&m(i,["labels"],U);const k=f(t,["outputUri"]);k!=null&&m(i,["outputUri"],k);const F=f(t,["pipelineJob"]);F!=null&&m(i,["pipelineJob"],F);const P=f(t,["serviceAccount"]);P!=null&&m(i,["serviceAccount"],P);const Y=f(t,["tunedModelDisplayName"]);Y!=null&&m(i,["tunedModelDisplayName"],Y);const J=f(t,["veoTuningSpec"]);return J!=null&&m(i,["veoTuningSpec"],J),i}function eb(t,e){const i={},l=f(t,["sdkHttpResponse"]);l!=null&&m(i,["sdkHttpResponse"],l);const s=f(t,["name"]);s!=null&&m(i,["name"],s);const a=f(t,["metadata"]);a!=null&&m(i,["metadata"],a);const c=f(t,["done"]);c!=null&&m(i,["done"],c);const d=f(t,["error"]);return d!=null&&m(i,["error"],d),i}function Iy(t,e){const i={},l=f(t,["gcsUri"]);l!=null&&m(i,["validationDatasetUri"],l);const s=f(t,["vertexDatasetResource"]);return s!=null&&m(i,["validationDatasetUri"],s),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tb extends Vi{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new Zo(Pi.PAGED_ITEM_TUNING_JOBS,l=>this.listInternal(l),await this.listInternal(i),i),this.tune=async i=>{var l;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const s={tunedModelName:i.baseModel};!((l=i.config)===null||l===void 0)&&l.preTunedModelCheckpointId&&(s.checkpointId=i.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},i),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},i);return await this.tuneInternal(s)}else{const s=Object.assign({},i),a=await this.tuneMldevInternal(s);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:od.JOB_STATE_QUEUED}}}}async getInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=FN(e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>fd(y))}else{const h=ON(e);return d=_e("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>lx(y))}}async listInternal(e){var i,l,s,a;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=XN(e);return d=_e("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=QN(y),x=new cy;return Object.assign(x,T),x})}else{const h=KN(e);return d=_e("tunedModels",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:y.headers},x})),c.then(y=>{const T=$N(y),x=new cy;return Object.assign(x,T),x})}}async cancel(e){var i,l,s,a;let c="",d={};if(this.apiClient.isVertexAI()){const p=GN(e);c=_e("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}else{const p=zN(e);c=_e("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=VN(e,e);return a=_e("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>fd(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,l;let s,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BN(e);return a=_e("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>eb(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nb{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ib=1024*1024*8,ob=3,lb=1e3,rb=2,ou="x-goog-upload-status";async function sb(t,e,i){var l;const s=await rx(t,e,i),a=await(s==null?void 0:s.json());if(((l=s==null?void 0:s.headers)===null||l===void 0?void 0:l[ou])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function ab(t,e,i){var l;const s=await rx(t,e,i),a=await(s==null?void 0:s.json());if(((l=s==null?void 0:s.headers)===null||l===void 0?void 0:l[ou])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=Lv(a),d=new Dd;return Object.assign(d,c),d}async function rx(t,e,i){var l,s;let a=0,c=0,d=new ld(new Response),p="upload";for(a=t.size;c<a;){const h=Math.min(ib,a-c),y=t.slice(c,c+h);c+h>=a&&(p+=", finalize");let T=0,x=lb;for(;T<ob&&(d=await i.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(h)}}}),!(!((l=d==null?void 0:d.headers)===null||l===void 0)&&l[ou]));)T++,await cb(x),x=x*rb;if(c+=h,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[ou])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function ub(t){return{size:t.size,type:t.type}}function cb(t){return new Promise(e=>setTimeout(e,t))}class fb{async upload(e,i,l){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sb(e,i,l)}async uploadToFileSearchStore(e,i,l){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ab(e,i,l)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ub(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class db{create(e,i,l){return new hb(e,i,l)}}class hb{constructor(e,i,l){this.url=e,this.headers=i,this.callbacks=l}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dy="x-goog-api-key";class pb{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Dy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Dy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mb="gl-node/";class Gd{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const l=J_(e.httpOptions,e.vertexai,void 0,void 0);l&&(e.httpOptions?e.httpOptions.baseUrl=l:e.httpOptions={baseUrl:l}),this.apiVersion=e.apiVersion;const s=new pb(this.apiKey);this.apiClient=new I1({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:mb+"web",uploader:new fb,downloader:new nb}),this.models=new Q1(this.apiClient),this.live=new F1(this.apiClient,s,new db),this.batches=new SE(this.apiClient),this.chats=new nw(this.models,this.apiClient),this.caches=new jE(this.apiClient),this.files=new dw(this.apiClient),this.operations=new Z1(this.apiClient),this.authTokens=new hN(this.apiClient),this.tunings=new tb(this.apiClient),this.fileSearchStores=new kN(this.apiClient)}}async function gb(t){const e="PLACEHOLDER_API_KEY",i=new Gd({apiKey:e});try{const s=(await i.models.generateContent({model:"gemini-2.5-flash",contents:`'AB'  A -> B ''


${t}`,config:{responseMimeType:"application/json",responseSchema:{type:_t.OBJECT,properties:{characters:{type:_t.ARRAY,description:"",items:{type:_t.OBJECT,properties:{name:{type:_t.STRING,description:""}},required:["name"]}},relationships:{type:_t.ARRAY,description:"",items:{type:_t.OBJECT,properties:{source:{type:_t.STRING,description:""},target:{type:_t.STRING,description:""},label:{type:_t.STRING,description:' ( "", "")'}},required:["source","target","label"]}}},required:["characters","relationships"]}}})).text;if(!s)throw new Error("API ");const a=s.replace(/^```json\n?/,"").replace(/```$/,"");return JSON.parse(a)}catch(l){throw console.error("Error parsing relationships with Gemini API:",l),l instanceof Error&&(l.message.includes("API key not valid")||l.message.includes("invalid"))?new Error(" Google Gemini API Key "):new Error(" Gemini  API Key")}}const yb="https://api.openai.com/v1/chat/completions";async function vb(t,e){var l,s,a,c;if(!e)throw new Error("OpenAI API Key  API Key");const i=` JSON 
JSON 'characters'  'relationships'
'characters'  'name' 
'relationships'  'source' (), 'target' (),  'label' ( "", "")

: 'ABCB'
 JSON:
{
  "characters": [
    { "name": "A" },
    { "name": "B" },
    { "name": "C" }
  ],
  "relationships": [
    { "source": "A", "target": "B", "label": "" },
    { "source": "C", "target": "B", "label": "" }
  ]
}

 JSON  markdown `;try{const d=await fetch(yb,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:i},{role:"user",content:t}],response_format:{type:"json_object"},temperature:.2})});if(!d.ok){const y=await d.json();throw console.error("OpenAI API Error:",y),((l=y==null?void 0:y.error)==null?void 0:l.code)==="invalid_api_key"?new Error(" OpenAI API Key "):new Error(`OpenAI API ${d.status}${((s=y==null?void 0:y.error)==null?void 0:s.message)||""}`)}const h=(c=(a=(await d.json()).choices[0])==null?void 0:a.message)==null?void 0:c.content;if(!h)throw new Error("OpenAI API ");return JSON.parse(h)}catch(d){throw console.error("Error parsing relationships with OpenAI API:",d),d instanceof Error?d:new Error(" OpenAI ")}}const sx=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),S.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),oi=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),S.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),os=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("polyline",{points:"3 6 5 6 21 6"}),S.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),S.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),S.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Su=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),S.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),gs=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("circle",{cx:"11",cy:"11",r:"8"}),S.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),dd=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),S.jsx("circle",{cx:"9",cy:"7",r:"4"}),S.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),S.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),er=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),S.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),xb=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("circle",{cx:"18",cy:"5",r:"3"}),S.jsx("circle",{cx:"6",cy:"12",r:"3"}),S.jsx("circle",{cx:"18",cy:"19",r:"3"}),S.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),S.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),Tb=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),S.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),ax=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("path",{d:"M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z"}),S.jsx("path",{d:"M5 3L6 6"}),S.jsx("path",{d:"M19 3L18 6"}),S.jsx("path",{d:"M3 19L6 18"}),S.jsx("path",{d:"M21 19L18 18"})]}),ux=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),S.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),S.jsx("polyline",{points:"21 15 16 10 5 21"})]}),Sb=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),S.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),S.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),S.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),S.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),S.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),_b=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("circle",{cx:"12",cy:"5",r:"1"}),S.jsx("circle",{cx:"12",cy:"12",r:"1"}),S.jsx("circle",{cx:"12",cy:"19",r:"1"}),S.jsx("circle",{cx:"17",cy:"5",r:"1"}),S.jsx("circle",{cx:"17",cy:"12",r:"1"}),S.jsx("circle",{cx:"17",cy:"19",r:"1"})]}),qd=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:S.jsx("polyline",{points:"6 9 12 15 18 9"})}),Cb=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("path",{d:"M3 3v18h18"}),S.jsx("path",{d:"M7 16V8"}),S.jsx("path",{d:"M12 16v-4"}),S.jsx("path",{d:"M17 16v-8"})]}),Eb=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),S.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),wb=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[S.jsx("circle",{cx:"8",cy:"8",r:"4"}),S.jsx("circle",{cx:"16",cy:"16",r:"4"}),S.jsx("path",{d:"M12.5 11.5c-2.3-2.3-6-2.3-8.3 0"}),S.jsx("path",{d:"M11.5 12.5c2.3 2.3 2.3 6 0 8.3"})]}),Yo=({label:t,viewName:e,activeView:i,onClick:l,children:s})=>{const a=i===e;return S.jsx("button",{title:t,onClick:()=>l(e),className:`flex items-center justify-center w-12 h-12 rounded-lg transition-colors duration-200 ${a?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:s})},Ab=({activeView:t,onSetActiveView:e})=>S.jsxs("nav",{className:"bg-gray-800 p-2 flex flex-col items-center space-y-4 border-r border-gray-700",children:[S.jsx(Yo,{label:"",viewName:"graph",activeView:t,onClick:e,children:S.jsx(xb,{className:"w-6 h-6"})}),S.jsx(Yo,{label:"",viewName:"characters",activeView:t,onClick:e,children:S.jsx(dd,{className:"w-6 h-6"})}),S.jsx(Yo,{label:"",viewName:"images",activeView:t,onClick:e,children:S.jsx(ux,{className:"w-6 h-6"})}),S.jsx(Yo,{label:"",viewName:"search",activeView:t,onClick:e,children:S.jsx(gs,{className:"w-6 h-6"})}),S.jsx(Yo,{label:" Tag",viewName:"tags",activeView:t,onClick:e,children:S.jsx(er,{className:"w-6 h-6"})}),S.jsx(Yo,{label:"Tag ",viewName:"analytics",activeView:t,onClick:e,children:S.jsx(Cb,{className:"w-6 h-6"})}),S.jsx("div",{className:"flex-grow"}),S.jsx(Yo,{label:"",viewName:"settings",activeView:t,onClick:e,children:S.jsx(sx,{className:"w-6 h-6"})})]});var Nb={value:()=>{}};function ys(){for(var t=0,e=arguments.length,i={},l;t<e;++t){if(!(l=arguments[t]+"")||l in i||/[\s.]/.test(l))throw new Error("illegal type: "+l);i[l]=[]}return new $a(i)}function $a(t){this._=t}function bb(t,e){return t.trim().split(/^|\s+/).map(function(i){var l="",s=i.indexOf(".");if(s>=0&&(l=i.slice(s+1),i=i.slice(0,s)),i&&!e.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:l}})}$a.prototype=ys.prototype={constructor:$a,on:function(t,e){var i=this._,l=bb(t+"",i),s,a=-1,c=l.length;if(arguments.length<2){for(;++a<c;)if((s=(t=l[a]).type)&&(s=Mb(i[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<c;)if(s=(t=l[a]).type)i[s]=Uy(i[s],t.name,e);else if(e==null)for(s in i)i[s]=Uy(i[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new $a(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var i=new Array(s),l=0,s,a;l<s;++l)i[l]=arguments[l+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],l=0,s=a.length;l<s;++l)a[l].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var l=this._[t],s=0,a=l.length;s<a;++s)l[s].value.apply(e,i)}};function Mb(t,e){for(var i=0,l=t.length,s;i<l;++i)if((s=t[i]).name===e)return s.value}function Uy(t,e,i){for(var l=0,s=t.length;l<s;++l)if(t[l].name===e){t[l]=Nb,t=t.slice(0,l).concat(t.slice(l+1));break}return i!=null&&t.push({name:e,value:i}),t}var hd="http://www.w3.org/1999/xhtml";const Ly={svg:"http://www.w3.org/2000/svg",xhtml:hd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _u(t){var e=t+="",i=e.indexOf(":");return i>=0&&(e=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),Ly.hasOwnProperty(e)?{space:Ly[e],local:t}:t}function Rb(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===hd&&e.documentElement.namespaceURI===hd?e.createElement(t):e.createElementNS(i,t)}}function Ib(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function cx(t){var e=_u(t);return(e.local?Ib:Rb)(e)}function Db(){}function Pd(t){return t==null?Db:function(){return this.querySelector(t)}}function Ub(t){typeof t!="function"&&(t=Pd(t));for(var e=this._groups,i=e.length,l=new Array(i),s=0;s<i;++s)for(var a=e[s],c=a.length,d=l[s]=new Array(c),p,h,y=0;y<c;++y)(p=a[y])&&(h=t.call(p,p.__data__,y,a))&&("__data__"in p&&(h.__data__=p.__data__),d[y]=h);return new Hn(l,this._parents)}function Lb(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Hb(){return[]}function fx(t){return t==null?Hb:function(){return this.querySelectorAll(t)}}function kb(t){return function(){return Lb(t.apply(this,arguments))}}function zb(t){typeof t=="function"?t=kb(t):t=fx(t);for(var e=this._groups,i=e.length,l=[],s=[],a=0;a<i;++a)for(var c=e[a],d=c.length,p,h=0;h<d;++h)(p=c[h])&&(l.push(t.call(p,p.__data__,h,c)),s.push(p));return new Hn(l,s)}function dx(t){return function(){return this.matches(t)}}function hx(t){return function(e){return e.matches(t)}}var Gb=Array.prototype.find;function qb(t){return function(){return Gb.call(this.children,t)}}function Pb(){return this.firstElementChild}function Bb(t){return this.select(t==null?Pb:qb(typeof t=="function"?t:hx(t)))}var Vb=Array.prototype.filter;function Ob(){return Array.from(this.children)}function Fb(t){return function(){return Vb.call(this.children,t)}}function Yb(t){return this.selectAll(t==null?Ob:Fb(typeof t=="function"?t:hx(t)))}function Jb(t){typeof t!="function"&&(t=dx(t));for(var e=this._groups,i=e.length,l=new Array(i),s=0;s<i;++s)for(var a=e[s],c=a.length,d=l[s]=[],p,h=0;h<c;++h)(p=a[h])&&t.call(p,p.__data__,h,a)&&d.push(p);return new Hn(l,this._parents)}function px(t){return new Array(t.length)}function Kb(){return new Hn(this._enter||this._groups.map(px),this._parents)}function lu(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}lu.prototype={constructor:lu,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Xb(t){return function(){return t}}function $b(t,e,i,l,s,a){for(var c=0,d,p=e.length,h=a.length;c<h;++c)(d=e[c])?(d.__data__=a[c],l[c]=d):i[c]=new lu(t,a[c]);for(;c<p;++c)(d=e[c])&&(s[c]=d)}function Qb(t,e,i,l,s,a,c){var d,p,h=new Map,y=e.length,T=a.length,x=new Array(y),_;for(d=0;d<y;++d)(p=e[d])&&(x[d]=_=c.call(p,p.__data__,d,e)+"",h.has(_)?s[d]=p:h.set(_,p));for(d=0;d<T;++d)_=c.call(t,a[d],d,a)+"",(p=h.get(_))?(l[d]=p,p.__data__=a[d],h.delete(_)):i[d]=new lu(t,a[d]);for(d=0;d<y;++d)(p=e[d])&&h.get(x[d])===p&&(s[d]=p)}function Zb(t){return t.__data__}function Wb(t,e){if(!arguments.length)return Array.from(this,Zb);var i=e?Qb:$b,l=this._parents,s=this._groups;typeof t!="function"&&(t=Xb(t));for(var a=s.length,c=new Array(a),d=new Array(a),p=new Array(a),h=0;h<a;++h){var y=l[h],T=s[h],x=T.length,_=jb(t.call(y,y&&y.__data__,h,l)),N=_.length,A=d[h]=new Array(N),w=c[h]=new Array(N),E=p[h]=new Array(x);i(y,T,A,w,E,_,e);for(var M=0,H=0,I,D;M<N;++M)if(I=A[M]){for(M>=H&&(H=M+1);!(D=w[H])&&++H<N;);I._next=D||null}}return c=new Hn(c,l),c._enter=d,c._exit=p,c}function jb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eM(){return new Hn(this._exit||this._groups.map(px),this._parents)}function tM(t,e,i){var l=this.enter(),s=this,a=this.exit();return typeof t=="function"?(l=t(l),l&&(l=l.selection())):l=l.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),i==null?a.remove():i(a),l&&s?l.merge(s).order():s}function nM(t){for(var e=t.selection?t.selection():t,i=this._groups,l=e._groups,s=i.length,a=l.length,c=Math.min(s,a),d=new Array(s),p=0;p<c;++p)for(var h=i[p],y=l[p],T=h.length,x=d[p]=new Array(T),_,N=0;N<T;++N)(_=h[N]||y[N])&&(x[N]=_);for(;p<s;++p)d[p]=i[p];return new Hn(d,this._parents)}function iM(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var l=t[e],s=l.length-1,a=l[s],c;--s>=0;)(c=l[s])&&(a&&c.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(c,a),a=c);return this}function oM(t){t||(t=lM);function e(T,x){return T&&x?t(T.__data__,x.__data__):!T-!x}for(var i=this._groups,l=i.length,s=new Array(l),a=0;a<l;++a){for(var c=i[a],d=c.length,p=s[a]=new Array(d),h,y=0;y<d;++y)(h=c[y])&&(p[y]=h);p.sort(e)}return new Hn(s,this._parents).order()}function lM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function rM(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function sM(){return Array.from(this)}function aM(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var l=t[e],s=0,a=l.length;s<a;++s){var c=l[s];if(c)return c}return null}function uM(){let t=0;for(const e of this)++t;return t}function cM(){return!this.node()}function fM(t){for(var e=this._groups,i=0,l=e.length;i<l;++i)for(var s=e[i],a=0,c=s.length,d;a<c;++a)(d=s[a])&&t.call(d,d.__data__,a,s);return this}function dM(t){return function(){this.removeAttribute(t)}}function hM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pM(t,e){return function(){this.setAttribute(t,e)}}function mM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function gM(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function yM(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function vM(t,e){var i=_u(t);if(arguments.length<2){var l=this.node();return i.local?l.getAttributeNS(i.space,i.local):l.getAttribute(i)}return this.each((e==null?i.local?hM:dM:typeof e=="function"?i.local?yM:gM:i.local?mM:pM)(i,e))}function mx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function xM(t){return function(){this.style.removeProperty(t)}}function TM(t,e,i){return function(){this.style.setProperty(t,e,i)}}function SM(t,e,i){return function(){var l=e.apply(this,arguments);l==null?this.style.removeProperty(t):this.style.setProperty(t,l,i)}}function _M(t,e,i){return arguments.length>1?this.each((e==null?xM:typeof e=="function"?SM:TM)(t,e,i??"")):$l(this.node(),t)}function $l(t,e){return t.style.getPropertyValue(e)||mx(t).getComputedStyle(t,null).getPropertyValue(e)}function CM(t){return function(){delete this[t]}}function EM(t,e){return function(){this[t]=e}}function wM(t,e){return function(){var i=e.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function AM(t,e){return arguments.length>1?this.each((e==null?CM:typeof e=="function"?wM:EM)(t,e)):this.node()[t]}function gx(t){return t.trim().split(/^|\s+/)}function Bd(t){return t.classList||new yx(t)}function yx(t){this._node=t,this._names=gx(t.getAttribute("class")||"")}yx.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function vx(t,e){for(var i=Bd(t),l=-1,s=e.length;++l<s;)i.add(e[l])}function xx(t,e){for(var i=Bd(t),l=-1,s=e.length;++l<s;)i.remove(e[l])}function NM(t){return function(){vx(this,t)}}function bM(t){return function(){xx(this,t)}}function MM(t,e){return function(){(e.apply(this,arguments)?vx:xx)(this,t)}}function RM(t,e){var i=gx(t+"");if(arguments.length<2){for(var l=Bd(this.node()),s=-1,a=i.length;++s<a;)if(!l.contains(i[s]))return!1;return!0}return this.each((typeof e=="function"?MM:e?NM:bM)(i,e))}function IM(){this.textContent=""}function DM(t){return function(){this.textContent=t}}function UM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function LM(t){return arguments.length?this.each(t==null?IM:(typeof t=="function"?UM:DM)(t)):this.node().textContent}function HM(){this.innerHTML=""}function kM(t){return function(){this.innerHTML=t}}function zM(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function GM(t){return arguments.length?this.each(t==null?HM:(typeof t=="function"?zM:kM)(t)):this.node().innerHTML}function qM(){this.nextSibling&&this.parentNode.appendChild(this)}function PM(){return this.each(qM)}function BM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function VM(){return this.each(BM)}function OM(t){var e=typeof t=="function"?t:cx(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function FM(){return null}function YM(t,e){var i=typeof t=="function"?t:cx(t),l=e==null?FM:typeof e=="function"?e:Pd(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),l.apply(this,arguments)||null)})}function JM(){var t=this.parentNode;t&&t.removeChild(this)}function KM(){return this.each(JM)}function XM(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $M(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function QM(t){return this.select(t?$M:XM)}function ZM(t){return arguments.length?this.property("__data__",t):this.node().__data__}function WM(t){return function(e){t.call(this,e,this.__data__)}}function jM(t){return t.trim().split(/^|\s+/).map(function(e){var i="",l=e.indexOf(".");return l>=0&&(i=e.slice(l+1),e=e.slice(0,l)),{type:e,name:i}})}function eR(t){return function(){var e=this.__on;if(e){for(var i=0,l=-1,s=e.length,a;i<s;++i)a=e[i],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++l]=a;++l?e.length=l:delete this.__on}}}function tR(t,e,i){return function(){var l=this.__on,s,a=WM(e);if(l){for(var c=0,d=l.length;c<d;++c)if((s=l[c]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=i),s.value=e;return}}this.addEventListener(t.type,a,i),s={type:t.type,name:t.name,value:e,listener:a,options:i},l?l.push(s):this.__on=[s]}}function nR(t,e,i){var l=jM(t+""),s,a=l.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var p=0,h=d.length,y;p<h;++p)for(s=0,y=d[p];s<a;++s)if((c=l[s]).type===y.type&&c.name===y.name)return y.value}return}for(d=e?tR:eR,s=0;s<a;++s)this.each(d(l[s],e,i));return this}function Tx(t,e,i){var l=mx(t),s=l.CustomEvent;typeof s=="function"?s=new s(e,i):(s=l.document.createEvent("Event"),i?(s.initEvent(e,i.bubbles,i.cancelable),s.detail=i.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function iR(t,e){return function(){return Tx(this,t,e)}}function oR(t,e){return function(){return Tx(this,t,e.apply(this,arguments))}}function lR(t,e){return this.each((typeof e=="function"?oR:iR)(t,e))}function*rR(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var l=t[e],s=0,a=l.length,c;s<a;++s)(c=l[s])&&(yield c)}var Sx=[null];function Hn(t,e){this._groups=t,this._parents=e}function vs(){return new Hn([[document.documentElement]],Sx)}function sR(){return this}Hn.prototype=vs.prototype={constructor:Hn,select:Ub,selectAll:zb,selectChild:Bb,selectChildren:Yb,filter:Jb,data:Wb,enter:Kb,exit:eM,join:tM,merge:nM,selection:sR,order:iM,sort:oM,call:rM,nodes:sM,node:aM,size:uM,empty:cM,each:fM,attr:vM,style:_M,property:AM,classed:RM,text:LM,html:GM,raise:PM,lower:VM,append:OM,insert:YM,remove:KM,clone:QM,datum:ZM,on:nR,dispatch:lR,[Symbol.iterator]:rR};function Wt(t){return typeof t=="string"?new Hn([[document.querySelector(t)]],[document.documentElement]):new Hn([[t]],Sx)}function aR(t){let e;for(;e=t.sourceEvent;)t=e;return t}function zi(t,e){if(t=aR(t),e===void 0&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var l=i.createSVGPoint();return l.x=t.clientX,l.y=t.clientY,l=l.matrixTransform(e.getScreenCTM().inverse()),[l.x,l.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const uR={passive:!1},ls={capture:!0,passive:!1};function Jf(t){t.stopImmediatePropagation()}function Jl(t){t.preventDefault(),t.stopImmediatePropagation()}function _x(t){var e=t.document.documentElement,i=Wt(t).on("dragstart.drag",Jl,ls);"onselectstart"in e?i.on("selectstart.drag",Jl,ls):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Cx(t,e){var i=t.document.documentElement,l=Wt(t).on("dragstart.drag",null);e&&(l.on("click.drag",Jl,ls),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in i?l.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const za=t=>()=>t;function pd(t,{sourceEvent:e,subject:i,target:l,identifier:s,active:a,x:c,y:d,dx:p,dy:h,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:y}})}pd.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function cR(t){return!t.ctrlKey&&!t.button}function fR(){return this.parentNode}function dR(t,e){return e??{x:t.x,y:t.y}}function hR(){return navigator.maxTouchPoints||"ontouchstart"in this}function pR(){var t=cR,e=fR,i=dR,l=hR,s={},a=ys("start","drag","end"),c=0,d,p,h,y,T=0;function x(I){I.on("mousedown.drag",_).filter(l).on("touchstart.drag",w).on("touchmove.drag",E,uR).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(I,D){if(!(y||!t.call(this,I,D))){var U=H(this,e.call(this,I,D),I,D,"mouse");U&&(Wt(I.view).on("mousemove.drag",N,ls).on("mouseup.drag",A,ls),_x(I.view),Jf(I),h=!1,d=I.clientX,p=I.clientY,U("start",I))}}function N(I){if(Jl(I),!h){var D=I.clientX-d,U=I.clientY-p;h=D*D+U*U>T}s.mouse("drag",I)}function A(I){Wt(I.view).on("mousemove.drag mouseup.drag",null),Cx(I.view,h),Jl(I),s.mouse("end",I)}function w(I,D){if(t.call(this,I,D)){var U=I.changedTouches,k=e.call(this,I,D),F=U.length,P,Y;for(P=0;P<F;++P)(Y=H(this,k,I,D,U[P].identifier,U[P]))&&(Jf(I),Y("start",I,U[P]))}}function E(I){var D=I.changedTouches,U=D.length,k,F;for(k=0;k<U;++k)(F=s[D[k].identifier])&&(Jl(I),F("drag",I,D[k]))}function M(I){var D=I.changedTouches,U=D.length,k,F;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),k=0;k<U;++k)(F=s[D[k].identifier])&&(Jf(I),F("end",I,D[k]))}function H(I,D,U,k,F,P){var Y=a.copy(),J=zi(P||U,D),j,de,q;if((q=i.call(I,new pd("beforestart",{sourceEvent:U,target:x,identifier:F,active:c,x:J[0],y:J[1],dx:0,dy:0,dispatch:Y}),k))!=null)return j=q.x-J[0]||0,de=q.y-J[1]||0,function ie(L,O,oe){var ce=J,he;switch(L){case"start":s[F]=ie,he=c++;break;case"end":delete s[F],--c;case"drag":J=zi(oe||O,D),he=c;break}Y.call(L,I,new pd(L,{sourceEvent:O,subject:q,target:x,identifier:F,active:he,x:J[0]+j,y:J[1]+de,dx:J[0]-ce[0],dy:J[1]-ce[1],dispatch:Y}),k)}}return x.filter=function(I){return arguments.length?(t=typeof I=="function"?I:za(!!I),x):t},x.container=function(I){return arguments.length?(e=typeof I=="function"?I:za(I),x):e},x.subject=function(I){return arguments.length?(i=typeof I=="function"?I:za(I),x):i},x.touchable=function(I){return arguments.length?(l=typeof I=="function"?I:za(!!I),x):l},x.on=function(){var I=a.on.apply(a,arguments);return I===a?x:I},x.clickDistance=function(I){return arguments.length?(T=(I=+I)*I,x):Math.sqrt(T)},x}function Vd(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function Ex(t,e){var i=Object.create(t.prototype);for(var l in e)i[l]=e[l];return i}function xs(){}var rs=.7,ru=1/rs,Kl="\\s*([+-]?\\d+)\\s*",ss="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mR=/^#([0-9a-f]{3,8})$/,gR=new RegExp(`^rgb\\(${Kl},${Kl},${Kl}\\)$`),yR=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),vR=new RegExp(`^rgba\\(${Kl},${Kl},${Kl},${ss}\\)$`),xR=new RegExp(`^rgba\\(${mi},${mi},${mi},${ss}\\)$`),TR=new RegExp(`^hsl\\(${ss},${mi},${mi}\\)$`),SR=new RegExp(`^hsla\\(${ss},${mi},${mi},${ss}\\)$`),Hy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vd(xs,as,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ky,formatHex:ky,formatHex8:_R,formatHsl:CR,formatRgb:zy,toString:zy});function ky(){return this.rgb().formatHex()}function _R(){return this.rgb().formatHex8()}function CR(){return wx(this).formatHsl()}function zy(){return this.rgb().formatRgb()}function as(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=mR.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Gy(e):i===3?new En(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Ga(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Ga(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gR.exec(t))?new En(e[1],e[2],e[3],1):(e=yR.exec(t))?new En(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vR.exec(t))?Ga(e[1],e[2],e[3],e[4]):(e=xR.exec(t))?Ga(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=TR.exec(t))?By(e[1],e[2]/100,e[3]/100,1):(e=SR.exec(t))?By(e[1],e[2]/100,e[3]/100,e[4]):Hy.hasOwnProperty(t)?Gy(Hy[t]):t==="transparent"?new En(NaN,NaN,NaN,0):null}function Gy(t){return new En(t>>16&255,t>>8&255,t&255,1)}function Ga(t,e,i,l){return l<=0&&(t=e=i=NaN),new En(t,e,i,l)}function ER(t){return t instanceof xs||(t=as(t)),t?(t=t.rgb(),new En(t.r,t.g,t.b,t.opacity)):new En}function md(t,e,i,l){return arguments.length===1?ER(t):new En(t,e,i,l??1)}function En(t,e,i,l){this.r=+t,this.g=+e,this.b=+i,this.opacity=+l}Vd(En,md,Ex(xs,{brighter(t){return t=t==null?ru:Math.pow(ru,t),new En(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?rs:Math.pow(rs,t),new En(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new En(Xo(this.r),Xo(this.g),Xo(this.b),su(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qy,formatHex:qy,formatHex8:wR,formatRgb:Py,toString:Py}));function qy(){return`#${Jo(this.r)}${Jo(this.g)}${Jo(this.b)}`}function wR(){return`#${Jo(this.r)}${Jo(this.g)}${Jo(this.b)}${Jo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Py(){const t=su(this.opacity);return`${t===1?"rgb(":"rgba("}${Xo(this.r)}, ${Xo(this.g)}, ${Xo(this.b)}${t===1?")":`, ${t})`}`}function su(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jo(t){return t=Xo(t),(t<16?"0":"")+t.toString(16)}function By(t,e,i,l){return l<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new ei(t,e,i,l)}function wx(t){if(t instanceof ei)return new ei(t.h,t.s,t.l,t.opacity);if(t instanceof xs||(t=as(t)),!t)return new ei;if(t instanceof ei)return t;t=t.rgb();var e=t.r/255,i=t.g/255,l=t.b/255,s=Math.min(e,i,l),a=Math.max(e,i,l),c=NaN,d=a-s,p=(a+s)/2;return d?(e===a?c=(i-l)/d+(i<l)*6:i===a?c=(l-e)/d+2:c=(e-i)/d+4,d/=p<.5?a+s:2-a-s,c*=60):d=p>0&&p<1?0:c,new ei(c,d,p,t.opacity)}function AR(t,e,i,l){return arguments.length===1?wx(t):new ei(t,e,i,l??1)}function ei(t,e,i,l){this.h=+t,this.s=+e,this.l=+i,this.opacity=+l}Vd(ei,AR,Ex(xs,{brighter(t){return t=t==null?ru:Math.pow(ru,t),new ei(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?rs:Math.pow(rs,t),new ei(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,l=i+(i<.5?i:1-i)*e,s=2*i-l;return new En(Kf(t>=240?t-240:t+120,s,l),Kf(t,s,l),Kf(t<120?t+240:t-120,s,l),this.opacity)},clamp(){return new ei(Vy(this.h),qa(this.s),qa(this.l),su(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=su(this.opacity);return`${t===1?"hsl(":"hsla("}${Vy(this.h)}, ${qa(this.s)*100}%, ${qa(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Vy(t){return t=(t||0)%360,t<0?t+360:t}function qa(t){return Math.max(0,Math.min(1,t||0))}function Kf(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}const Ax=t=>()=>t;function NR(t,e){return function(i){return t+i*e}}function bR(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(l){return Math.pow(t+l*e,i)}}function MR(t){return(t=+t)==1?Nx:function(e,i){return i-e?bR(e,i,t):Ax(isNaN(e)?i:e)}}function Nx(t,e){var i=e-t;return i?NR(t,i):Ax(isNaN(t)?e:t)}const Oy=(function t(e){var i=MR(e);function l(s,a){var c=i((s=md(s)).r,(a=md(a)).r),d=i(s.g,a.g),p=i(s.b,a.b),h=Nx(s.opacity,a.opacity);return function(y){return s.r=c(y),s.g=d(y),s.b=p(y),s.opacity=h(y),s+""}}return l.gamma=t,l})(1);function xo(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}var gd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xf=new RegExp(gd.source,"g");function RR(t){return function(){return t}}function IR(t){return function(e){return t(e)+""}}function DR(t,e){var i=gd.lastIndex=Xf.lastIndex=0,l,s,a,c=-1,d=[],p=[];for(t=t+"",e=e+"";(l=gd.exec(t))&&(s=Xf.exec(e));)(a=s.index)>i&&(a=e.slice(i,a),d[c]?d[c]+=a:d[++c]=a),(l=l[0])===(s=s[0])?d[c]?d[c]+=s:d[++c]=s:(d[++c]=null,p.push({i:c,x:xo(l,s)})),i=Xf.lastIndex;return i<e.length&&(a=e.slice(i),d[c]?d[c]+=a:d[++c]=a),d.length<2?p[0]?IR(p[0].x):RR(e):(e=p.length,function(h){for(var y=0,T;y<e;++y)d[(T=p[y]).i]=T.x(h);return d.join("")})}var Fy=180/Math.PI,yd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bx(t,e,i,l,s,a){var c,d,p;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(p=t*i+e*l)&&(i-=t*p,l-=e*p),(d=Math.sqrt(i*i+l*l))&&(i/=d,l/=d,p/=d),t*l<e*i&&(t=-t,e=-e,p=-p,c=-c),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*Fy,skewX:Math.atan(p)*Fy,scaleX:c,scaleY:d}}var Pa;function UR(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?yd:bx(e.a,e.b,e.c,e.d,e.e,e.f)}function LR(t){return t==null||(Pa||(Pa=document.createElementNS("http://www.w3.org/2000/svg","g")),Pa.setAttribute("transform",t),!(t=Pa.transform.baseVal.consolidate()))?yd:(t=t.matrix,bx(t.a,t.b,t.c,t.d,t.e,t.f))}function Mx(t,e,i,l){function s(h){return h.length?h.pop()+" ":""}function a(h,y,T,x,_,N){if(h!==T||y!==x){var A=_.push("translate(",null,e,null,i);N.push({i:A-4,x:xo(h,T)},{i:A-2,x:xo(y,x)})}else(T||x)&&_.push("translate("+T+e+x+i)}function c(h,y,T,x){h!==y?(h-y>180?y+=360:y-h>180&&(h+=360),x.push({i:T.push(s(T)+"rotate(",null,l)-2,x:xo(h,y)})):y&&T.push(s(T)+"rotate("+y+l)}function d(h,y,T,x){h!==y?x.push({i:T.push(s(T)+"skewX(",null,l)-2,x:xo(h,y)}):y&&T.push(s(T)+"skewX("+y+l)}function p(h,y,T,x,_,N){if(h!==T||y!==x){var A=_.push(s(_)+"scale(",null,",",null,")");N.push({i:A-4,x:xo(h,T)},{i:A-2,x:xo(y,x)})}else(T!==1||x!==1)&&_.push(s(_)+"scale("+T+","+x+")")}return function(h,y){var T=[],x=[];return h=t(h),y=t(y),a(h.translateX,h.translateY,y.translateX,y.translateY,T,x),c(h.rotate,y.rotate,T,x),d(h.skewX,y.skewX,T,x),p(h.scaleX,h.scaleY,y.scaleX,y.scaleY,T,x),h=y=null,function(_){for(var N=-1,A=x.length,w;++N<A;)T[(w=x[N]).i]=w.x(_);return T.join("")}}}var HR=Mx(UR,"px, ","px)","deg)"),kR=Mx(LR,", ",")",")"),zR=1e-12;function Yy(t){return((t=Math.exp(t))+1/t)/2}function GR(t){return((t=Math.exp(t))-1/t)/2}function qR(t){return((t=Math.exp(2*t))-1)/(t+1)}const PR=(function t(e,i,l){function s(a,c){var d=a[0],p=a[1],h=a[2],y=c[0],T=c[1],x=c[2],_=y-d,N=T-p,A=_*_+N*N,w,E;if(A<zR)E=Math.log(x/h)/e,w=function(k){return[d+k*_,p+k*N,h*Math.exp(e*k*E)]};else{var M=Math.sqrt(A),H=(x*x-h*h+l*A)/(2*h*i*M),I=(x*x-h*h-l*A)/(2*x*i*M),D=Math.log(Math.sqrt(H*H+1)-H),U=Math.log(Math.sqrt(I*I+1)-I);E=(U-D)/e,w=function(k){var F=k*E,P=Yy(D),Y=h/(i*M)*(P*qR(e*F+D)-GR(D));return[d+Y*_,p+Y*N,h*P/Yy(e*F+D)]}}return w.duration=E*1e3*e/Math.SQRT2,w}return s.rho=function(a){var c=Math.max(.001,+a),d=c*c,p=d*d;return t(c,d,p)},s})(Math.SQRT2,2,4);var Ql=0,Wr=0,Qr=0,Rx=1e3,au,jr,uu=0,$o=0,Cu=0,us=typeof performance=="object"&&performance.now?performance:Date,Ix=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Od(){return $o||(Ix(BR),$o=us.now()+Cu)}function BR(){$o=0}function cu(){this._call=this._time=this._next=null}cu.prototype=Fd.prototype={constructor:cu,restart:function(t,e,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?Od():+i)+(e==null?0:+e),!this._next&&jr!==this&&(jr?jr._next=this:au=this,jr=this),this._call=t,this._time=i,vd()},stop:function(){this._call&&(this._call=null,this._time=1/0,vd())}};function Fd(t,e,i){var l=new cu;return l.restart(t,e,i),l}function VR(){Od(),++Ql;for(var t=au,e;t;)(e=$o-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ql}function Jy(){$o=(uu=us.now())+Cu,Ql=Wr=0;try{VR()}finally{Ql=0,FR(),$o=0}}function OR(){var t=us.now(),e=t-uu;e>Rx&&(Cu-=e,uu=t)}function FR(){for(var t,e=au,i,l=1/0;e;)e._call?(l>e._time&&(l=e._time),t=e,e=e._next):(i=e._next,e._next=null,e=t?t._next=i:au=i);jr=t,vd(l)}function vd(t){if(!Ql){Wr&&(Wr=clearTimeout(Wr));var e=t-$o;e>24?(t<1/0&&(Wr=setTimeout(Jy,t-us.now()-Cu)),Qr&&(Qr=clearInterval(Qr))):(Qr||(uu=us.now(),Qr=setInterval(OR,Rx)),Ql=1,Ix(Jy))}}function Ky(t,e,i){var l=new cu;return e=e==null?0:+e,l.restart(s=>{l.stop(),t(s+e)},e,i),l}var YR=ys("start","end","cancel","interrupt"),JR=[],Dx=0,Xy=1,xd=2,Qa=3,$y=4,Td=5,Za=6;function Eu(t,e,i,l,s,a){var c=t.__transition;if(!c)t.__transition={};else if(i in c)return;KR(t,i,{name:e,index:l,group:s,on:YR,tween:JR,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Dx})}function Yd(t,e){var i=li(t,e);if(i.state>Dx)throw new Error("too late; already scheduled");return i}function gi(t,e){var i=li(t,e);if(i.state>Qa)throw new Error("too late; already running");return i}function li(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function KR(t,e,i){var l=t.__transition,s;l[e]=i,i.timer=Fd(a,0,i.time);function a(h){i.state=Xy,i.timer.restart(c,i.delay,i.time),i.delay<=h&&c(h-i.delay)}function c(h){var y,T,x,_;if(i.state!==Xy)return p();for(y in l)if(_=l[y],_.name===i.name){if(_.state===Qa)return Ky(c);_.state===$y?(_.state=Za,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete l[y]):+y<e&&(_.state=Za,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete l[y])}if(Ky(function(){i.state===Qa&&(i.state=$y,i.timer.restart(d,i.delay,i.time),d(h))}),i.state=xd,i.on.call("start",t,t.__data__,i.index,i.group),i.state===xd){for(i.state=Qa,s=new Array(x=i.tween.length),y=0,T=-1;y<x;++y)(_=i.tween[y].value.call(t,t.__data__,i.index,i.group))&&(s[++T]=_);s.length=T+1}}function d(h){for(var y=h<i.duration?i.ease.call(null,h/i.duration):(i.timer.restart(p),i.state=Td,1),T=-1,x=s.length;++T<x;)s[T].call(t,y);i.state===Td&&(i.on.call("end",t,t.__data__,i.index,i.group),p())}function p(){i.state=Za,i.timer.stop(),delete l[e];for(var h in l)return;delete t.__transition}}function Wa(t,e){var i=t.__transition,l,s,a=!0,c;if(i){e=e==null?null:e+"";for(c in i){if((l=i[c]).name!==e){a=!1;continue}s=l.state>xd&&l.state<Td,l.state=Za,l.timer.stop(),l.on.call(s?"interrupt":"cancel",t,t.__data__,l.index,l.group),delete i[c]}a&&delete t.__transition}}function XR(t){return this.each(function(){Wa(this,t)})}function $R(t,e){var i,l;return function(){var s=gi(this,t),a=s.tween;if(a!==i){l=i=a;for(var c=0,d=l.length;c<d;++c)if(l[c].name===e){l=l.slice(),l.splice(c,1);break}}s.tween=l}}function QR(t,e,i){var l,s;if(typeof i!="function")throw new Error;return function(){var a=gi(this,t),c=a.tween;if(c!==l){s=(l=c).slice();for(var d={name:e,value:i},p=0,h=s.length;p<h;++p)if(s[p].name===e){s[p]=d;break}p===h&&s.push(d)}a.tween=s}}function ZR(t,e){var i=this._id;if(t+="",arguments.length<2){for(var l=li(this.node(),i).tween,s=0,a=l.length,c;s<a;++s)if((c=l[s]).name===t)return c.value;return null}return this.each((e==null?$R:QR)(i,t,e))}function Jd(t,e,i){var l=t._id;return t.each(function(){var s=gi(this,l);(s.value||(s.value={}))[e]=i.apply(this,arguments)}),function(s){return li(s,l).value[e]}}function Ux(t,e){var i;return(typeof e=="number"?xo:e instanceof as?Oy:(i=as(e))?(e=i,Oy):DR)(t,e)}function WR(t){return function(){this.removeAttribute(t)}}function jR(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eI(t,e,i){var l,s=i+"",a;return function(){var c=this.getAttribute(t);return c===s?null:c===l?a:a=e(l=c,i)}}function tI(t,e,i){var l,s=i+"",a;return function(){var c=this.getAttributeNS(t.space,t.local);return c===s?null:c===l?a:a=e(l=c,i)}}function nI(t,e,i){var l,s,a;return function(){var c,d=i(this),p;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),p=d+"",c===p?null:c===l&&p===s?a:(s=p,a=e(l=c,d)))}}function iI(t,e,i){var l,s,a;return function(){var c,d=i(this),p;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),p=d+"",c===p?null:c===l&&p===s?a:(s=p,a=e(l=c,d)))}}function oI(t,e){var i=_u(t),l=i==="transform"?kR:Ux;return this.attrTween(t,typeof e=="function"?(i.local?iI:nI)(i,l,Jd(this,"attr."+t,e)):e==null?(i.local?jR:WR)(i):(i.local?tI:eI)(i,l,e))}function lI(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}function rI(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}function sI(t,e){var i,l;function s(){var a=e.apply(this,arguments);return a!==l&&(i=(l=a)&&rI(t,a)),i}return s._value=e,s}function aI(t,e){var i,l;function s(){var a=e.apply(this,arguments);return a!==l&&(i=(l=a)&&lI(t,a)),i}return s._value=e,s}function uI(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;var l=_u(t);return this.tween(i,(l.local?sI:aI)(l,e))}function cI(t,e){return function(){Yd(this,t).delay=+e.apply(this,arguments)}}function fI(t,e){return e=+e,function(){Yd(this,t).delay=e}}function dI(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cI:fI)(e,t)):li(this.node(),e).delay}function hI(t,e){return function(){gi(this,t).duration=+e.apply(this,arguments)}}function pI(t,e){return e=+e,function(){gi(this,t).duration=e}}function mI(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hI:pI)(e,t)):li(this.node(),e).duration}function gI(t,e){if(typeof e!="function")throw new Error;return function(){gi(this,t).ease=e}}function yI(t){var e=this._id;return arguments.length?this.each(gI(e,t)):li(this.node(),e).ease}function vI(t,e){return function(){var i=e.apply(this,arguments);if(typeof i!="function")throw new Error;gi(this,t).ease=i}}function xI(t){if(typeof t!="function")throw new Error;return this.each(vI(this._id,t))}function TI(t){typeof t!="function"&&(t=dx(t));for(var e=this._groups,i=e.length,l=new Array(i),s=0;s<i;++s)for(var a=e[s],c=a.length,d=l[s]=[],p,h=0;h<c;++h)(p=a[h])&&t.call(p,p.__data__,h,a)&&d.push(p);return new Bi(l,this._parents,this._name,this._id)}function SI(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,l=e.length,s=i.length,a=Math.min(l,s),c=new Array(l),d=0;d<a;++d)for(var p=e[d],h=i[d],y=p.length,T=c[d]=new Array(y),x,_=0;_<y;++_)(x=p[_]||h[_])&&(T[_]=x);for(;d<l;++d)c[d]=e[d];return new Bi(c,this._parents,this._name,this._id)}function _I(t){return(t+"").trim().split(/^|\s+/).every(function(e){var i=e.indexOf(".");return i>=0&&(e=e.slice(0,i)),!e||e==="start"})}function CI(t,e,i){var l,s,a=_I(e)?Yd:gi;return function(){var c=a(this,t),d=c.on;d!==l&&(s=(l=d).copy()).on(e,i),c.on=s}}function EI(t,e){var i=this._id;return arguments.length<2?li(this.node(),i).on.on(t):this.each(CI(i,t,e))}function wI(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}}function AI(){return this.on("end.remove",wI(this._id))}function NI(t){var e=this._name,i=this._id;typeof t!="function"&&(t=Pd(t));for(var l=this._groups,s=l.length,a=new Array(s),c=0;c<s;++c)for(var d=l[c],p=d.length,h=a[c]=new Array(p),y,T,x=0;x<p;++x)(y=d[x])&&(T=t.call(y,y.__data__,x,d))&&("__data__"in y&&(T.__data__=y.__data__),h[x]=T,Eu(h[x],e,i,x,h,li(y,i)));return new Bi(a,this._parents,e,i)}function bI(t){var e=this._name,i=this._id;typeof t!="function"&&(t=fx(t));for(var l=this._groups,s=l.length,a=[],c=[],d=0;d<s;++d)for(var p=l[d],h=p.length,y,T=0;T<h;++T)if(y=p[T]){for(var x=t.call(y,y.__data__,T,p),_,N=li(y,i),A=0,w=x.length;A<w;++A)(_=x[A])&&Eu(_,e,i,A,x,N);a.push(x),c.push(y)}return new Bi(a,c,e,i)}var MI=vs.prototype.constructor;function RI(){return new MI(this._groups,this._parents)}function II(t,e){var i,l,s;return function(){var a=$l(this,t),c=(this.style.removeProperty(t),$l(this,t));return a===c?null:a===i&&c===l?s:s=e(i=a,l=c)}}function Lx(t){return function(){this.style.removeProperty(t)}}function DI(t,e,i){var l,s=i+"",a;return function(){var c=$l(this,t);return c===s?null:c===l?a:a=e(l=c,i)}}function UI(t,e,i){var l,s,a;return function(){var c=$l(this,t),d=i(this),p=d+"";return d==null&&(p=d=(this.style.removeProperty(t),$l(this,t))),c===p?null:c===l&&p===s?a:(s=p,a=e(l=c,d))}}function LI(t,e){var i,l,s,a="style."+e,c="end."+a,d;return function(){var p=gi(this,t),h=p.on,y=p.value[a]==null?d||(d=Lx(e)):void 0;(h!==i||s!==y)&&(l=(i=h).copy()).on(c,s=y),p.on=l}}function HI(t,e,i){var l=(t+="")=="transform"?HR:Ux;return e==null?this.styleTween(t,II(t,l)).on("end.style."+t,Lx(t)):typeof e=="function"?this.styleTween(t,UI(t,l,Jd(this,"style."+t,e))).each(LI(this._id,t)):this.styleTween(t,DI(t,l,e),i).on("end.style."+t,null)}function kI(t,e,i){return function(l){this.style.setProperty(t,e.call(this,l),i)}}function zI(t,e,i){var l,s;function a(){var c=e.apply(this,arguments);return c!==s&&(l=(s=c)&&kI(t,c,i)),l}return a._value=e,a}function GI(t,e,i){var l="style."+(t+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(e==null)return this.tween(l,null);if(typeof e!="function")throw new Error;return this.tween(l,zI(t,e,i??""))}function qI(t){return function(){this.textContent=t}}function PI(t){return function(){var e=t(this);this.textContent=e??""}}function BI(t){return this.tween("text",typeof t=="function"?PI(Jd(this,"text",t)):qI(t==null?"":t+""))}function VI(t){return function(e){this.textContent=t.call(this,e)}}function OI(t){var e,i;function l(){var s=t.apply(this,arguments);return s!==i&&(e=(i=s)&&VI(s)),e}return l._value=t,l}function FI(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,OI(t))}function YI(){for(var t=this._name,e=this._id,i=Hx(),l=this._groups,s=l.length,a=0;a<s;++a)for(var c=l[a],d=c.length,p,h=0;h<d;++h)if(p=c[h]){var y=li(p,e);Eu(p,t,i,h,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Bi(l,this._parents,t,i)}function JI(){var t,e,i=this,l=i._id,s=i.size();return new Promise(function(a,c){var d={value:c},p={value:function(){--s===0&&a()}};i.each(function(){var h=gi(this,l),y=h.on;y!==t&&(e=(t=y).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(p)),h.on=e}),s===0&&a()})}var KI=0;function Bi(t,e,i,l){this._groups=t,this._parents=e,this._name=i,this._id=l}function Hx(){return++KI}var ki=vs.prototype;Bi.prototype={constructor:Bi,select:NI,selectAll:bI,selectChild:ki.selectChild,selectChildren:ki.selectChildren,filter:TI,merge:SI,selection:RI,transition:YI,call:ki.call,nodes:ki.nodes,node:ki.node,size:ki.size,empty:ki.empty,each:ki.each,on:EI,attr:oI,attrTween:uI,style:HI,styleTween:GI,text:BI,textTween:FI,remove:AI,tween:ZR,delay:dI,duration:mI,ease:yI,easeVarying:xI,end:JI,[Symbol.iterator]:ki[Symbol.iterator]};function XI(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var $I={time:null,delay:0,duration:250,ease:XI};function QI(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}function ZI(t){var e,i;t instanceof Bi?(e=t._id,t=t._name):(e=Hx(),(i=$I).time=Od(),t=t==null?null:t+"");for(var l=this._groups,s=l.length,a=0;a<s;++a)for(var c=l[a],d=c.length,p,h=0;h<d;++h)(p=c[h])&&Eu(p,t,e,h,c,i||QI(p,e));return new Bi(l,this._parents,t,e)}vs.prototype.interrupt=XR;vs.prototype.transition=ZI;function WI(t,e){var i,l=1;t==null&&(t=0),e==null&&(e=0);function s(){var a,c=i.length,d,p=0,h=0;for(a=0;a<c;++a)d=i[a],p+=d.x,h+=d.y;for(p=(p/c-t)*l,h=(h/c-e)*l,a=0;a<c;++a)d=i[a],d.x-=p,d.y-=h}return s.initialize=function(a){i=a},s.x=function(a){return arguments.length?(t=+a,s):t},s.y=function(a){return arguments.length?(e=+a,s):e},s.strength=function(a){return arguments.length?(l=+a,s):l},s}function jI(t){const e=+this._x.call(null,t),i=+this._y.call(null,t);return kx(this.cover(e,i),e,i,t)}function kx(t,e,i,l){if(isNaN(e)||isNaN(i))return t;var s,a=t._root,c={data:l},d=t._x0,p=t._y0,h=t._x1,y=t._y1,T,x,_,N,A,w,E,M;if(!a)return t._root=c,t;for(;a.length;)if((A=e>=(T=(d+h)/2))?d=T:h=T,(w=i>=(x=(p+y)/2))?p=x:y=x,s=a,!(a=a[E=w<<1|A]))return s[E]=c,t;if(_=+t._x.call(null,a.data),N=+t._y.call(null,a.data),e===_&&i===N)return c.next=a,s?s[E]=c:t._root=c,t;do s=s?s[E]=new Array(4):t._root=new Array(4),(A=e>=(T=(d+h)/2))?d=T:h=T,(w=i>=(x=(p+y)/2))?p=x:y=x;while((E=w<<1|A)===(M=(N>=x)<<1|_>=T));return s[M]=a,s[E]=c,t}function e2(t){var e,i,l=t.length,s,a,c=new Array(l),d=new Array(l),p=1/0,h=1/0,y=-1/0,T=-1/0;for(i=0;i<l;++i)isNaN(s=+this._x.call(null,e=t[i]))||isNaN(a=+this._y.call(null,e))||(c[i]=s,d[i]=a,s<p&&(p=s),s>y&&(y=s),a<h&&(h=a),a>T&&(T=a));if(p>y||h>T)return this;for(this.cover(p,h).cover(y,T),i=0;i<l;++i)kx(this,c[i],d[i],t[i]);return this}function t2(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,l=this._y0,s=this._x1,a=this._y1;if(isNaN(i))s=(i=Math.floor(t))+1,a=(l=Math.floor(e))+1;else{for(var c=s-i||1,d=this._root,p,h;i>t||t>=s||l>e||e>=a;)switch(h=(e<l)<<1|t<i,p=new Array(4),p[h]=d,d=p,c*=2,h){case 0:s=i+c,a=l+c;break;case 1:i=s-c,a=l+c;break;case 2:s=i+c,l=a-c;break;case 3:i=s-c,l=a-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=l,this._x1=s,this._y1=a,this}function n2(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function i2(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function hn(t,e,i,l,s){this.node=t,this.x0=e,this.y0=i,this.x1=l,this.y1=s}function o2(t,e,i){var l,s=this._x0,a=this._y0,c,d,p,h,y=this._x1,T=this._y1,x=[],_=this._root,N,A;for(_&&x.push(new hn(_,s,a,y,T)),i==null?i=1/0:(s=t-i,a=e-i,y=t+i,T=e+i,i*=i);N=x.pop();)if(!(!(_=N.node)||(c=N.x0)>y||(d=N.y0)>T||(p=N.x1)<s||(h=N.y1)<a))if(_.length){var w=(c+p)/2,E=(d+h)/2;x.push(new hn(_[3],w,E,p,h),new hn(_[2],c,E,w,h),new hn(_[1],w,d,p,E),new hn(_[0],c,d,w,E)),(A=(e>=E)<<1|t>=w)&&(N=x[x.length-1],x[x.length-1]=x[x.length-1-A],x[x.length-1-A]=N)}else{var M=t-+this._x.call(null,_.data),H=e-+this._y.call(null,_.data),I=M*M+H*H;if(I<i){var D=Math.sqrt(i=I);s=t-D,a=e-D,y=t+D,T=e+D,l=_.data}}return l}function l2(t){if(isNaN(y=+this._x.call(null,t))||isNaN(T=+this._y.call(null,t)))return this;var e,i=this._root,l,s,a,c=this._x0,d=this._y0,p=this._x1,h=this._y1,y,T,x,_,N,A,w,E;if(!i)return this;if(i.length)for(;;){if((N=y>=(x=(c+p)/2))?c=x:p=x,(A=T>=(_=(d+h)/2))?d=_:h=_,e=i,!(i=i[w=A<<1|N]))return this;if(!i.length)break;(e[w+1&3]||e[w+2&3]||e[w+3&3])&&(l=e,E=w)}for(;i.data!==t;)if(s=i,!(i=i.next))return this;return(a=i.next)&&delete i.next,s?(a?s.next=a:delete s.next,this):e?(a?e[w]=a:delete e[w],(i=e[0]||e[1]||e[2]||e[3])&&i===(e[3]||e[2]||e[1]||e[0])&&!i.length&&(l?l[E]=i:this._root=i),this):(this._root=a,this)}function r2(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this}function s2(){return this._root}function a2(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function u2(t){var e=[],i,l=this._root,s,a,c,d,p;for(l&&e.push(new hn(l,this._x0,this._y0,this._x1,this._y1));i=e.pop();)if(!t(l=i.node,a=i.x0,c=i.y0,d=i.x1,p=i.y1)&&l.length){var h=(a+d)/2,y=(c+p)/2;(s=l[3])&&e.push(new hn(s,h,y,d,p)),(s=l[2])&&e.push(new hn(s,a,y,h,p)),(s=l[1])&&e.push(new hn(s,h,c,d,y)),(s=l[0])&&e.push(new hn(s,a,c,h,y))}return this}function c2(t){var e=[],i=[],l;for(this._root&&e.push(new hn(this._root,this._x0,this._y0,this._x1,this._y1));l=e.pop();){var s=l.node;if(s.length){var a,c=l.x0,d=l.y0,p=l.x1,h=l.y1,y=(c+p)/2,T=(d+h)/2;(a=s[0])&&e.push(new hn(a,c,d,y,T)),(a=s[1])&&e.push(new hn(a,y,d,p,T)),(a=s[2])&&e.push(new hn(a,c,T,y,h)),(a=s[3])&&e.push(new hn(a,y,T,p,h))}i.push(l)}for(;l=i.pop();)t(l.node,l.x0,l.y0,l.x1,l.y1);return this}function f2(t){return t[0]}function d2(t){return arguments.length?(this._x=t,this):this._x}function h2(t){return t[1]}function p2(t){return arguments.length?(this._y=t,this):this._y}function Kd(t,e,i){var l=new Xd(e??f2,i??h2,NaN,NaN,NaN,NaN);return t==null?l:l.addAll(t)}function Xd(t,e,i,l,s,a){this._x=t,this._y=e,this._x0=i,this._y0=l,this._x1=s,this._y1=a,this._root=void 0}function Qy(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}var mn=Kd.prototype=Xd.prototype;mn.copy=function(){var t=new Xd(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,i,l;if(!e)return t;if(!e.length)return t._root=Qy(e),t;for(i=[{source:e,target:t._root=new Array(4)}];e=i.pop();)for(var s=0;s<4;++s)(l=e.source[s])&&(l.length?i.push({source:l,target:e.target[s]=new Array(4)}):e.target[s]=Qy(l));return t};mn.add=jI;mn.addAll=e2;mn.cover=t2;mn.data=n2;mn.extent=i2;mn.find=o2;mn.remove=l2;mn.removeAll=r2;mn.root=s2;mn.size=a2;mn.visit=u2;mn.visitAfter=c2;mn.x=d2;mn.y=p2;function pn(t){return function(){return t}}function So(t){return(t()-.5)*1e-6}function m2(t){return t.x+t.vx}function g2(t){return t.y+t.vy}function y2(t){var e,i,l,s=1,a=1;typeof t!="function"&&(t=pn(t==null?1:+t));function c(){for(var h,y=e.length,T,x,_,N,A,w,E=0;E<a;++E)for(T=Kd(e,m2,g2).visitAfter(d),h=0;h<y;++h)x=e[h],A=i[x.index],w=A*A,_=x.x+x.vx,N=x.y+x.vy,T.visit(M);function M(H,I,D,U,k){var F=H.data,P=H.r,Y=A+P;if(F){if(F.index>x.index){var J=_-F.x-F.vx,j=N-F.y-F.vy,de=J*J+j*j;de<Y*Y&&(J===0&&(J=So(l),de+=J*J),j===0&&(j=So(l),de+=j*j),de=(Y-(de=Math.sqrt(de)))/de*s,x.vx+=(J*=de)*(Y=(P*=P)/(w+P)),x.vy+=(j*=de)*Y,F.vx-=J*(Y=1-Y),F.vy-=j*Y)}return}return I>_+Y||U<_-Y||D>N+Y||k<N-Y}}function d(h){if(h.data)return h.r=i[h.data.index];for(var y=h.r=0;y<4;++y)h[y]&&h[y].r>h.r&&(h.r=h[y].r)}function p(){if(e){var h,y=e.length,T;for(i=new Array(y),h=0;h<y;++h)T=e[h],i[T.index]=+t(T,h,e)}}return c.initialize=function(h,y){e=h,l=y,p()},c.iterations=function(h){return arguments.length?(a=+h,c):a},c.strength=function(h){return arguments.length?(s=+h,c):s},c.radius=function(h){return arguments.length?(t=typeof h=="function"?h:pn(+h),p(),c):t},c}function v2(t){return t.index}function Zy(t,e){var i=t.get(e);if(!i)throw new Error("node not found: "+e);return i}function x2(t){var e=v2,i=T,l,s=pn(30),a,c,d,p,h,y=1;t==null&&(t=[]);function T(w){return 1/Math.min(d[w.source.index],d[w.target.index])}function x(w){for(var E=0,M=t.length;E<y;++E)for(var H=0,I,D,U,k,F,P,Y;H<M;++H)I=t[H],D=I.source,U=I.target,k=U.x+U.vx-D.x-D.vx||So(h),F=U.y+U.vy-D.y-D.vy||So(h),P=Math.sqrt(k*k+F*F),P=(P-a[H])/P*w*l[H],k*=P,F*=P,U.vx-=k*(Y=p[H]),U.vy-=F*Y,D.vx+=k*(Y=1-Y),D.vy+=F*Y}function _(){if(c){var w,E=c.length,M=t.length,H=new Map(c.map((D,U)=>[e(D,U,c),D])),I;for(w=0,d=new Array(E);w<M;++w)I=t[w],I.index=w,typeof I.source!="object"&&(I.source=Zy(H,I.source)),typeof I.target!="object"&&(I.target=Zy(H,I.target)),d[I.source.index]=(d[I.source.index]||0)+1,d[I.target.index]=(d[I.target.index]||0)+1;for(w=0,p=new Array(M);w<M;++w)I=t[w],p[w]=d[I.source.index]/(d[I.source.index]+d[I.target.index]);l=new Array(M),N(),a=new Array(M),A()}}function N(){if(c)for(var w=0,E=t.length;w<E;++w)l[w]=+i(t[w],w,t)}function A(){if(c)for(var w=0,E=t.length;w<E;++w)a[w]=+s(t[w],w,t)}return x.initialize=function(w,E){c=w,h=E,_()},x.links=function(w){return arguments.length?(t=w,_(),x):t},x.id=function(w){return arguments.length?(e=w,x):e},x.iterations=function(w){return arguments.length?(y=+w,x):y},x.strength=function(w){return arguments.length?(i=typeof w=="function"?w:pn(+w),N(),x):i},x.distance=function(w){return arguments.length?(s=typeof w=="function"?w:pn(+w),A(),x):s},x}const T2=1664525,S2=1013904223,Wy=4294967296;function _2(){let t=1;return()=>(t=(T2*t+S2)%Wy)/Wy}function C2(t){return t.x}function E2(t){return t.y}var w2=10,A2=Math.PI*(3-Math.sqrt(5));function jy(t){var e,i=1,l=.001,s=1-Math.pow(l,1/300),a=0,c=.6,d=new Map,p=Fd(T),h=ys("tick","end"),y=_2();t==null&&(t=[]);function T(){x(),h.call("tick",e),i<l&&(p.stop(),h.call("end",e))}function x(A){var w,E=t.length,M;A===void 0&&(A=1);for(var H=0;H<A;++H)for(i+=(a-i)*s,d.forEach(function(I){I(i)}),w=0;w<E;++w)M=t[w],M.fx==null?M.x+=M.vx*=c:(M.x=M.fx,M.vx=0),M.fy==null?M.y+=M.vy*=c:(M.y=M.fy,M.vy=0);return e}function _(){for(var A=0,w=t.length,E;A<w;++A){if(E=t[A],E.index=A,E.fx!=null&&(E.x=E.fx),E.fy!=null&&(E.y=E.fy),isNaN(E.x)||isNaN(E.y)){var M=w2*Math.sqrt(.5+A),H=A*A2;E.x=M*Math.cos(H),E.y=M*Math.sin(H)}(isNaN(E.vx)||isNaN(E.vy))&&(E.vx=E.vy=0)}}function N(A){return A.initialize&&A.initialize(t,y),A}return _(),e={tick:x,restart:function(){return p.restart(T),e},stop:function(){return p.stop(),e},nodes:function(A){return arguments.length?(t=A,_(),d.forEach(N),e):t},alpha:function(A){return arguments.length?(i=+A,e):i},alphaMin:function(A){return arguments.length?(l=+A,e):l},alphaDecay:function(A){return arguments.length?(s=+A,e):+s},alphaTarget:function(A){return arguments.length?(a=+A,e):a},velocityDecay:function(A){return arguments.length?(c=1-A,e):1-c},randomSource:function(A){return arguments.length?(y=A,d.forEach(N),e):y},force:function(A,w){return arguments.length>1?(w==null?d.delete(A):d.set(A,N(w)),e):d.get(A)},find:function(A,w,E){var M=0,H=t.length,I,D,U,k,F;for(E==null?E=1/0:E*=E,M=0;M<H;++M)k=t[M],I=A-k.x,D=w-k.y,U=I*I+D*D,U<E&&(F=k,E=U);return F},on:function(A,w){return arguments.length>1?(h.on(A,w),e):h.on(A)}}}function ev(){var t,e,i,l,s=pn(-30),a,c=1,d=1/0,p=.81;function h(_){var N,A=t.length,w=Kd(t,C2,E2).visitAfter(T);for(l=_,N=0;N<A;++N)e=t[N],w.visit(x)}function y(){if(t){var _,N=t.length,A;for(a=new Array(N),_=0;_<N;++_)A=t[_],a[A.index]=+s(A,_,t)}}function T(_){var N=0,A,w,E=0,M,H,I;if(_.length){for(M=H=I=0;I<4;++I)(A=_[I])&&(w=Math.abs(A.value))&&(N+=A.value,E+=w,M+=w*A.x,H+=w*A.y);_.x=M/E,_.y=H/E}else{A=_,A.x=A.data.x,A.y=A.data.y;do N+=a[A.data.index];while(A=A.next)}_.value=N}function x(_,N,A,w){if(!_.value)return!0;var E=_.x-e.x,M=_.y-e.y,H=w-N,I=E*E+M*M;if(H*H/p<I)return I<d&&(E===0&&(E=So(i),I+=E*E),M===0&&(M=So(i),I+=M*M),I<c&&(I=Math.sqrt(c*I)),e.vx+=E*_.value*l/I,e.vy+=M*_.value*l/I),!0;if(_.length||I>=d)return;(_.data!==e||_.next)&&(E===0&&(E=So(i),I+=E*E),M===0&&(M=So(i),I+=M*M),I<c&&(I=Math.sqrt(c*I)));do _.data!==e&&(H=a[_.data.index]*l/I,e.vx+=E*H,e.vy+=M*H);while(_=_.next)}return h.initialize=function(_,N){t=_,i=N,y()},h.strength=function(_){return arguments.length?(s=typeof _=="function"?_:pn(+_),y(),h):s},h.distanceMin=function(_){return arguments.length?(c=_*_,h):Math.sqrt(c)},h.distanceMax=function(_){return arguments.length?(d=_*_,h):Math.sqrt(d)},h.theta=function(_){return arguments.length?(p=_*_,h):Math.sqrt(p)},h}function tv(t){var e=pn(.1),i,l,s;typeof t!="function"&&(t=pn(t==null?0:+t));function a(d){for(var p=0,h=i.length,y;p<h;++p)y=i[p],y.vx+=(s[p]-y.x)*l[p]*d}function c(){if(i){var d,p=i.length;for(l=new Array(p),s=new Array(p),d=0;d<p;++d)l[d]=isNaN(s[d]=+t(i[d],d,i))?0:+e(i[d],d,i)}}return a.initialize=function(d){i=d,c()},a.strength=function(d){return arguments.length?(e=typeof d=="function"?d:pn(+d),c(),a):e},a.x=function(d){return arguments.length?(t=typeof d=="function"?d:pn(+d),c(),a):t},a}function nv(t){var e=pn(.1),i,l,s;typeof t!="function"&&(t=pn(t==null?0:+t));function a(d){for(var p=0,h=i.length,y;p<h;++p)y=i[p],y.vy+=(s[p]-y.y)*l[p]*d}function c(){if(i){var d,p=i.length;for(l=new Array(p),s=new Array(p),d=0;d<p;++d)l[d]=isNaN(s[d]=+t(i[d],d,i))?0:+e(i[d],d,i)}}return a.initialize=function(d){i=d,c()},a.strength=function(d){return arguments.length?(e=typeof d=="function"?d:pn(+d),c(),a):e},a.y=function(d){return arguments.length?(t=typeof d=="function"?d:pn(+d),c(),a):t},a}function N2(t){var e=0,i=t.children,l=i&&i.length;if(!l)e=1;else for(;--l>=0;)e+=i[l].value;t.value=e}function b2(){return this.eachAfter(N2)}function M2(t,e){let i=-1;for(const l of this)t.call(e,l,++i,this);return this}function R2(t,e){for(var i=this,l=[i],s,a,c=-1;i=l.pop();)if(t.call(e,i,++c,this),s=i.children)for(a=s.length-1;a>=0;--a)l.push(s[a]);return this}function I2(t,e){for(var i=this,l=[i],s=[],a,c,d,p=-1;i=l.pop();)if(s.push(i),a=i.children)for(c=0,d=a.length;c<d;++c)l.push(a[c]);for(;i=s.pop();)t.call(e,i,++p,this);return this}function D2(t,e){let i=-1;for(const l of this)if(t.call(e,l,++i,this))return l}function U2(t){return this.eachAfter(function(e){for(var i=+t(e.data)||0,l=e.children,s=l&&l.length;--s>=0;)i+=l[s].value;e.value=i})}function L2(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function H2(t){for(var e=this,i=k2(e,t),l=[e];e!==i;)e=e.parent,l.push(e);for(var s=l.length;t!==i;)l.splice(s,0,t),t=t.parent;return l}function k2(t,e){if(t===e)return t;var i=t.ancestors(),l=e.ancestors(),s=null;for(t=i.pop(),e=l.pop();t===e;)s=t,t=i.pop(),e=l.pop();return s}function z2(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function G2(){return Array.from(this)}function q2(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function P2(){var t=this,e=[];return t.each(function(i){i!==t&&e.push({source:i.parent,target:i})}),e}function*B2(){var t=this,e,i=[t],l,s,a;do for(e=i.reverse(),i=[];t=e.pop();)if(yield t,l=t.children)for(s=0,a=l.length;s<a;++s)i.push(l[s]);while(i.length)}function $d(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=F2)):e===void 0&&(e=O2);for(var i=new fu(t),l,s=[i],a,c,d,p;l=s.pop();)if((c=e(l.data))&&(p=(c=Array.from(c)).length))for(l.children=c,d=p-1;d>=0;--d)s.push(a=c[d]=new fu(c[d])),a.parent=l,a.depth=l.depth+1;return i.eachBefore(J2)}function V2(){return $d(this).eachBefore(Y2)}function O2(t){return t.children}function F2(t){return Array.isArray(t)?t[1]:null}function Y2(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function J2(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function fu(t){this.data=t,this.depth=this.height=0,this.parent=null}fu.prototype=$d.prototype={constructor:fu,count:b2,each:M2,eachAfter:I2,eachBefore:R2,find:D2,sum:U2,sort:L2,path:H2,ancestors:z2,descendants:G2,leaves:q2,links:P2,copy:V2,[Symbol.iterator]:B2};function K2(t){return t==null?null:X2(t)}function X2(t){if(typeof t!="function")throw new Error;return t}function iv(){return 0}function $2(t){return function(){return t}}const Q2=1664525,Z2=1013904223,ov=4294967296;function W2(){let t=1;return()=>(t=(Q2*t+Z2)%ov)/ov}function j2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eD(t,e){let i=t.length,l,s;for(;i;)s=e()*i--|0,l=t[i],t[i]=t[s],t[s]=l;return t}function tD(t,e){for(var i=0,l=(t=eD(Array.from(t),e)).length,s=[],a,c;i<l;)a=t[i],c&&zx(c,a)?++i:(c=iD(s=nD(s,a)),i=0);return c}function nD(t,e){var i,l;if($f(e,t))return[e];for(i=0;i<t.length;++i)if(Ba(e,t[i])&&$f(es(t[i],e),t))return[t[i],e];for(i=0;i<t.length-1;++i)for(l=i+1;l<t.length;++l)if(Ba(es(t[i],t[l]),e)&&Ba(es(t[i],e),t[l])&&Ba(es(t[l],e),t[i])&&$f(Gx(t[i],t[l],e),t))return[t[i],t[l],e];throw new Error}function Ba(t,e){var i=t.r-e.r,l=e.x-t.x,s=e.y-t.y;return i<0||i*i<l*l+s*s}function zx(t,e){var i=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,l=e.x-t.x,s=e.y-t.y;return i>0&&i*i>l*l+s*s}function $f(t,e){for(var i=0;i<e.length;++i)if(!zx(t,e[i]))return!1;return!0}function iD(t){switch(t.length){case 1:return oD(t[0]);case 2:return es(t[0],t[1]);case 3:return Gx(t[0],t[1],t[2])}}function oD(t){return{x:t.x,y:t.y,r:t.r}}function es(t,e){var i=t.x,l=t.y,s=t.r,a=e.x,c=e.y,d=e.r,p=a-i,h=c-l,y=d-s,T=Math.sqrt(p*p+h*h);return{x:(i+a+p/T*y)/2,y:(l+c+h/T*y)/2,r:(T+s+d)/2}}function Gx(t,e,i){var l=t.x,s=t.y,a=t.r,c=e.x,d=e.y,p=e.r,h=i.x,y=i.y,T=i.r,x=l-c,_=l-h,N=s-d,A=s-y,w=p-a,E=T-a,M=l*l+s*s-a*a,H=M-c*c-d*d+p*p,I=M-h*h-y*y+T*T,D=_*N-x*A,U=(N*I-A*H)/(D*2)-l,k=(A*w-N*E)/D,F=(_*H-x*I)/(D*2)-s,P=(x*E-_*w)/D,Y=k*k+P*P-1,J=2*(a+U*k+F*P),j=U*U+F*F-a*a,de=-(Math.abs(Y)>1e-6?(J+Math.sqrt(J*J-4*Y*j))/(2*Y):j/J);return{x:l+U+k*de,y:s+F+P*de,r:de}}function lv(t,e,i){var l=t.x-e.x,s,a,c=t.y-e.y,d,p,h=l*l+c*c;h?(a=e.r+i.r,a*=a,p=t.r+i.r,p*=p,a>p?(s=(h+p-a)/(2*h),d=Math.sqrt(Math.max(0,p/h-s*s)),i.x=t.x-s*l-d*c,i.y=t.y-s*c+d*l):(s=(h+a-p)/(2*h),d=Math.sqrt(Math.max(0,a/h-s*s)),i.x=e.x+s*l-d*c,i.y=e.y+s*c+d*l)):(i.x=e.x+i.r,i.y=e.y)}function rv(t,e){var i=t.r+e.r-1e-6,l=e.x-t.x,s=e.y-t.y;return i>0&&i*i>l*l+s*s}function sv(t){var e=t._,i=t.next._,l=e.r+i.r,s=(e.x*i.r+i.x*e.r)/l,a=(e.y*i.r+i.y*e.r)/l;return s*s+a*a}function Va(t){this._=t,this.next=null,this.previous=null}function lD(t,e){if(!(a=(t=j2(t)).length))return 0;var i,l,s,a,c,d,p,h,y,T,x;if(i=t[0],i.x=0,i.y=0,!(a>1))return i.r;if(l=t[1],i.x=-l.r,l.x=i.r,l.y=0,!(a>2))return i.r+l.r;lv(l,i,s=t[2]),i=new Va(i),l=new Va(l),s=new Va(s),i.next=s.previous=l,l.next=i.previous=s,s.next=l.previous=i;e:for(p=3;p<a;++p){lv(i._,l._,s=t[p]),s=new Va(s),h=l.next,y=i.previous,T=l._.r,x=i._.r;do if(T<=x){if(rv(h._,s._)){l=h,i.next=l,l.previous=i,--p;continue e}T+=h._.r,h=h.next}else{if(rv(y._,s._)){i=y,i.next=l,l.previous=i,--p;continue e}x+=y._.r,y=y.previous}while(h!==y.next);for(s.previous=i,s.next=l,i.next=l.previous=l=s,c=sv(i);(s=s.next)!==l;)(d=sv(s))<c&&(i=s,c=d);l=i.next}for(i=[l._],s=l;(s=s.next)!==l;)i.push(s._);for(s=tD(i,e),p=0;p<a;++p)i=t[p],i.x-=s.x,i.y-=s.y;return s.r}function rD(t){return Math.sqrt(t.value)}function sD(){var t=null,e=1,i=1,l=iv;function s(a){const c=W2();return a.x=e/2,a.y=i/2,t?a.eachBefore(av(t)).eachAfter(Qf(l,.5,c)).eachBefore(uv(1)):a.eachBefore(av(rD)).eachAfter(Qf(iv,1,c)).eachAfter(Qf(l,a.r/Math.min(e,i),c)).eachBefore(uv(Math.min(e,i)/(2*a.r))),a}return s.radius=function(a){return arguments.length?(t=K2(a),s):t},s.size=function(a){return arguments.length?(e=+a[0],i=+a[1],s):[e,i]},s.padding=function(a){return arguments.length?(l=typeof a=="function"?a:$2(+a),s):l},s}function av(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Qf(t,e,i){return function(l){if(s=l.children){var s,a,c=s.length,d=t(l)*e||0,p;if(d)for(a=0;a<c;++a)s[a].r+=d;if(p=lD(s,i),d)for(a=0;a<c;++a)s[a].r-=d;l.r=p+d}}}function uv(t){return function(e){var i=e.parent;e.r*=t,i&&(e.x=i.x+t*e.x,e.y=i.y+t*e.y)}}const Oa=t=>()=>t;function aD(t,{sourceEvent:e,target:i,transform:l,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:s}})}function Gi(t,e,i){this.k=t,this.x=e,this.y=i}Gi.prototype={constructor:Gi,scale:function(t){return t===1?this:new Gi(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Gi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qx=new Gi(1,0,0);Gi.prototype;function Zf(t){t.stopImmediatePropagation()}function Zr(t){t.preventDefault(),t.stopImmediatePropagation()}function uD(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function cD(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function cv(){return this.__zoom||qx}function fD(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function dD(){return navigator.maxTouchPoints||"ontouchstart"in this}function hD(t,e,i){var l=t.invertX(e[0][0])-i[0][0],s=t.invertX(e[1][0])-i[1][0],a=t.invertY(e[0][1])-i[0][1],c=t.invertY(e[1][1])-i[1][1];return t.translate(s>l?(l+s)/2:Math.min(0,l)||Math.max(0,s),c>a?(a+c)/2:Math.min(0,a)||Math.max(0,c))}function Px(){var t=uD,e=cD,i=hD,l=fD,s=dD,a=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,p=PR,h=ys("start","zoom","end"),y,T,x,_=500,N=150,A=0,w=10;function E(q){q.property("__zoom",cv).on("wheel.zoom",F,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",Y).filter(s).on("touchstart.zoom",J).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",de).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(q,ie,L,O){var oe=q.selection?q.selection():q;oe.property("__zoom",cv),q!==oe?D(q,ie,L,O):oe.interrupt().each(function(){U(this,arguments).event(O).start().zoom(null,typeof ie=="function"?ie.apply(this,arguments):ie).end()})},E.scaleBy=function(q,ie,L,O){E.scaleTo(q,function(){var oe=this.__zoom.k,ce=typeof ie=="function"?ie.apply(this,arguments):ie;return oe*ce},L,O)},E.scaleTo=function(q,ie,L,O){E.transform(q,function(){var oe=e.apply(this,arguments),ce=this.__zoom,he=L==null?I(oe):typeof L=="function"?L.apply(this,arguments):L,R=ce.invert(he),B=typeof ie=="function"?ie.apply(this,arguments):ie;return i(H(M(ce,B),he,R),oe,c)},L,O)},E.translateBy=function(q,ie,L,O){E.transform(q,function(){return i(this.__zoom.translate(typeof ie=="function"?ie.apply(this,arguments):ie,typeof L=="function"?L.apply(this,arguments):L),e.apply(this,arguments),c)},null,O)},E.translateTo=function(q,ie,L,O,oe){E.transform(q,function(){var ce=e.apply(this,arguments),he=this.__zoom,R=O==null?I(ce):typeof O=="function"?O.apply(this,arguments):O;return i(qx.translate(R[0],R[1]).scale(he.k).translate(typeof ie=="function"?-ie.apply(this,arguments):-ie,typeof L=="function"?-L.apply(this,arguments):-L),ce,c)},O,oe)};function M(q,ie){return ie=Math.max(a[0],Math.min(a[1],ie)),ie===q.k?q:new Gi(ie,q.x,q.y)}function H(q,ie,L){var O=ie[0]-L[0]*q.k,oe=ie[1]-L[1]*q.k;return O===q.x&&oe===q.y?q:new Gi(q.k,O,oe)}function I(q){return[(+q[0][0]+ +q[1][0])/2,(+q[0][1]+ +q[1][1])/2]}function D(q,ie,L,O){q.on("start.zoom",function(){U(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(O).end()}).tween("zoom",function(){var oe=this,ce=arguments,he=U(oe,ce).event(O),R=e.apply(oe,ce),B=L==null?I(R):typeof L=="function"?L.apply(oe,ce):L,ee=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),ae=oe.__zoom,te=typeof ie=="function"?ie.apply(oe,ce):ie,me=p(ae.invert(B).concat(ee/ae.k),te.invert(B).concat(ee/te.k));return function(xe){if(xe===1)xe=te;else{var re=me(xe),ye=ee/re[2];xe=new Gi(ye,B[0]-re[0]*ye,B[1]-re[1]*ye)}he.zoom(null,xe)}})}function U(q,ie,L){return!L&&q.__zooming||new k(q,ie)}function k(q,ie){this.that=q,this.args=ie,this.active=0,this.sourceEvent=null,this.extent=e.apply(q,ie),this.taps=0}k.prototype={event:function(q){return q&&(this.sourceEvent=q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(q,ie){return this.mouse&&q!=="mouse"&&(this.mouse[1]=ie.invert(this.mouse[0])),this.touch0&&q!=="touch"&&(this.touch0[1]=ie.invert(this.touch0[0])),this.touch1&&q!=="touch"&&(this.touch1[1]=ie.invert(this.touch1[0])),this.that.__zoom=ie,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(q){var ie=Wt(this.that).datum();h.call(q,this.that,new aD(q,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:h}),ie)}};function F(q,...ie){if(!t.apply(this,arguments))return;var L=U(this,ie).event(q),O=this.__zoom,oe=Math.max(a[0],Math.min(a[1],O.k*Math.pow(2,l.apply(this,arguments)))),ce=zi(q);if(L.wheel)(L.mouse[0][0]!==ce[0]||L.mouse[0][1]!==ce[1])&&(L.mouse[1]=O.invert(L.mouse[0]=ce)),clearTimeout(L.wheel);else{if(O.k===oe)return;L.mouse=[ce,O.invert(ce)],Wa(this),L.start()}Zr(q),L.wheel=setTimeout(he,N),L.zoom("mouse",i(H(M(O,oe),L.mouse[0],L.mouse[1]),L.extent,c));function he(){L.wheel=null,L.end()}}function P(q,...ie){if(x||!t.apply(this,arguments))return;var L=q.currentTarget,O=U(this,ie,!0).event(q),oe=Wt(q.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",ee,!0),ce=zi(q,L),he=q.clientX,R=q.clientY;_x(q.view),Zf(q),O.mouse=[ce,this.__zoom.invert(ce)],Wa(this),O.start();function B(ae){if(Zr(ae),!O.moved){var te=ae.clientX-he,me=ae.clientY-R;O.moved=te*te+me*me>A}O.event(ae).zoom("mouse",i(H(O.that.__zoom,O.mouse[0]=zi(ae,L),O.mouse[1]),O.extent,c))}function ee(ae){oe.on("mousemove.zoom mouseup.zoom",null),Cx(ae.view,O.moved),Zr(ae),O.event(ae).end()}}function Y(q,...ie){if(t.apply(this,arguments)){var L=this.__zoom,O=zi(q.changedTouches?q.changedTouches[0]:q,this),oe=L.invert(O),ce=L.k*(q.shiftKey?.5:2),he=i(H(M(L,ce),O,oe),e.apply(this,ie),c);Zr(q),d>0?Wt(this).transition().duration(d).call(D,he,O,q):Wt(this).call(E.transform,he,O,q)}}function J(q,...ie){if(t.apply(this,arguments)){var L=q.touches,O=L.length,oe=U(this,ie,q.changedTouches.length===O).event(q),ce,he,R,B;for(Zf(q),he=0;he<O;++he)R=L[he],B=zi(R,this),B=[B,this.__zoom.invert(B),R.identifier],oe.touch0?!oe.touch1&&oe.touch0[2]!==B[2]&&(oe.touch1=B,oe.taps=0):(oe.touch0=B,ce=!0,oe.taps=1+!!y);y&&(y=clearTimeout(y)),ce&&(oe.taps<2&&(T=B[0],y=setTimeout(function(){y=null},_)),Wa(this),oe.start())}}function j(q,...ie){if(this.__zooming){var L=U(this,ie).event(q),O=q.changedTouches,oe=O.length,ce,he,R,B;for(Zr(q),ce=0;ce<oe;++ce)he=O[ce],R=zi(he,this),L.touch0&&L.touch0[2]===he.identifier?L.touch0[0]=R:L.touch1&&L.touch1[2]===he.identifier&&(L.touch1[0]=R);if(he=L.that.__zoom,L.touch1){var ee=L.touch0[0],ae=L.touch0[1],te=L.touch1[0],me=L.touch1[1],xe=(xe=te[0]-ee[0])*xe+(xe=te[1]-ee[1])*xe,re=(re=me[0]-ae[0])*re+(re=me[1]-ae[1])*re;he=M(he,Math.sqrt(xe/re)),R=[(ee[0]+te[0])/2,(ee[1]+te[1])/2],B=[(ae[0]+me[0])/2,(ae[1]+me[1])/2]}else if(L.touch0)R=L.touch0[0],B=L.touch0[1];else return;L.zoom("touch",i(H(he,R,B),L.extent,c))}}function de(q,...ie){if(this.__zooming){var L=U(this,ie).event(q),O=q.changedTouches,oe=O.length,ce,he;for(Zf(q),x&&clearTimeout(x),x=setTimeout(function(){x=null},_),ce=0;ce<oe;++ce)he=O[ce],L.touch0&&L.touch0[2]===he.identifier?delete L.touch0:L.touch1&&L.touch1[2]===he.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(he=zi(he,this),Math.hypot(T[0]-he[0],T[1]-he[1])<w)){var R=Wt(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return E.wheelDelta=function(q){return arguments.length?(l=typeof q=="function"?q:Oa(+q),E):l},E.filter=function(q){return arguments.length?(t=typeof q=="function"?q:Oa(!!q),E):t},E.touchable=function(q){return arguments.length?(s=typeof q=="function"?q:Oa(!!q),E):s},E.extent=function(q){return arguments.length?(e=typeof q=="function"?q:Oa([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),E):e},E.scaleExtent=function(q){return arguments.length?(a[0]=+q[0],a[1]=+q[1],E):[a[0],a[1]]},E.translateExtent=function(q){return arguments.length?(c[0][0]=+q[0][0],c[1][0]=+q[1][0],c[0][1]=+q[0][1],c[1][1]=+q[1][1],E):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},E.constrain=function(q){return arguments.length?(i=q,E):i},E.duration=function(q){return arguments.length?(d=+q,E):d},E.interpolate=function(q){return arguments.length?(p=q,E):p},E.on=function(){var q=h.on.apply(h,arguments);return q===h?E:q},E.clickDistance=function(q){return arguments.length?(A=(q=+q)*q,E):Math.sqrt(A)},E.tapDistance=function(q){return arguments.length?(w=+q,E):w},E}const fv=t=>t?t.startsWith("http")||t.startsWith("data:")?t:`/CR_PLAN/${t}`.replace(/\/+/g,"/"):"",pD=({characters:t,relationships:e,onNodeClick:i,tagCategories:l})=>{const s=Q.useRef(null),a=Q.useRef(null),[c,d]=Q.useState("individual"),[p,h]=Q.useState(""),y=Q.useMemo(()=>({nodes:t.map(x=>({...x})),links:e.map(x=>({...x}))}),[t,e]),T=Q.useMemo(()=>l.filter(x=>x.selectionMode==="single"),[l]);return Q.useEffect(()=>{if(!s.current||!a.current)return;if(y.nodes.length===0){Wt(s.current).selectAll("*").remove();return}const x=a.current.clientWidth,_=a.current.clientHeight,N=Wt(s.current).attr("width",x).attr("height",_).attr("viewBox",[-x/2,-_/2,x,_]);N.selectAll("*").remove();const A=N.append("g"),w=Px().extent([[0,0],[x,_]]).scaleExtent([.1,4]).on("zoom",({transform:D})=>{A.attr("transform",D)});N.call(w);let E;if(c==="individual")E=H(N,A,y.nodes,y.links);else if(p)E=I(N,A,y.nodes,p);else{N.append("text").attr("x",0).attr("y",0).attr("text-anchor","middle").attr("fill","#6b7280").style("font-size","16px").text(T.length>0?"":"");return}function M(D){function U(P,Y){Y.isGroup||(P.active||D.alphaTarget(.3).restart(),Y.fx=Y.x,Y.fy=Y.y)}function k(P,Y){Y.isGroup||(Y.fx=P.x,Y.fy=P.y)}function F(P,Y){Y.isGroup||(P.active||D.alphaTarget(0),Y.fx=null,Y.fy=null)}return pR().on("start",U).on("drag",k).on("end",F)}function H(D,U,k,F){const P=new Map;F.forEach(R=>{const B=typeof R.source=="object"?R.source.id:R.source,ee=typeof R.target=="object"?R.target.id:R.target,ae=R.label,te=[B,ee].sort().join(":")+"|"+ae;if(!P.has(te))P.set(te,{...R,isBidirectional:!1});else{const me=P.get(te);(typeof me.source=="object"?me.source.id:me.source)!==B&&(me.isBidirectional=!0)}});const Y=Array.from(P.values()),J=D.append("defs");J.append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",23).attr("refY",0).attr("orient","auto").attr("markerWidth",8).attr("markerHeight",8).append("svg:path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#999"),J.append("marker").attr("id","arrowhead-start").attr("viewBox","0 -5 10 10").attr("refX",-13).attr("refY",0).attr("orient","auto").attr("markerWidth",8).attr("markerHeight",8).append("svg:path").attr("d","M 10,-5 L 0,0 L 10,5").attr("fill","#999");const j=new Set;Y.forEach(R=>{const B=typeof R.source=="object"?R.source.id:R.source,ee=typeof R.target=="object"?R.target.id:R.target;j.add(B),j.add(ee)});const de=jy(k).force("link",x2(Y).id(R=>R.id).distance(200)).force("charge",ev().strength(-800)).force("center",WI(0,0)).force("x",tv(0).strength(R=>j.has(R.id)?0:.05)).force("y",nv(0).strength(R=>j.has(R.id)?0:.05)).on("tick",he),q=new Map;Y.forEach(R=>{const B=typeof R.source=="string"?R.source:R.source.id,ee=typeof R.target=="string"?R.target:R.target.id,ae=[B,ee].sort().join("-");q.has(ae)||q.set(ae,[]),q.get(ae).push(R)});const ie=new Map;q.forEach(R=>{R.length>1&&R.forEach((B,ee)=>{ie.set(B,ee)})});const L=U.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("path").data(Y).join("path").attr("stroke-width",1.5).attr("fill","none").attr("marker-end",R=>R.arrowStyle==="arrow"||R.isBidirectional?"url(#arrowhead)":"none").attr("marker-start",R=>R.isBidirectional?"url(#arrowhead-start)":"none"),O=U.append("g").selectAll(".link-label-group").data(Y).join("g").attr("class","link-label-group");O.append("rect").attr("class","link-label-bg").attr("fill","#1f2937").attr("stroke","#374151").attr("stroke-width",1).attr("rx",3).attr("ry",3).attr("opacity",.9),O.append("text").attr("class","link-label").attr("font-size","10px").attr("fill","#e5e7eb").attr("text-anchor","middle").attr("dominant-baseline","middle").text(R=>R.label);const oe=20,ce=U.append("g").attr("class","nodes").selectAll("g").data(k).join("g").style("cursor","pointer").on("click",(R,B)=>{R.defaultPrevented||i(B)}).call(M(de));ce.append("circle").attr("r",oe).attr("stroke","#fff").attr("stroke-width",1.5).attr("fill","#333"),ce.append("clipPath").attr("id",R=>`clip-${R.id}`).append("circle").attr("r",oe),ce.append("image").attr("xlink:href",R=>fv(R.image)||`https://api.dicebear.com/7.x/pixel-art/svg?seed=${encodeURIComponent(R.name)}`).attr("x",-oe).attr("y",-oe).attr("height",oe*2).attr("width",oe*2).attr("clip-path",R=>`url(#clip-${R.id})`),ce.append("text").text(R=>R.name).attr("y",oe+15).attr("text-anchor","middle").attr("fill","white").style("font-size","12px").style("paint-order","stroke").style("stroke","#111827").style("stroke-width","3px");function he(){L.attr("d",R=>{const B=R.source,ee=R.target,ae=B.x,te=B.y,me=ee.x,xe=ee.y;if(ie.has(R)){const re=ie.get(R),ye=typeof R.source=="string"?R.source:B.id,Ve=typeof R.target=="string"?R.target:ee.id,Ke=30;let Ye;re===0?Ye=ye<Ve?Ke:-Ke:Ye=ye<Ve?-Ke:Ke;const zt=me-ae,wt=xe-te,Gt=Math.sqrt(zt*zt+wt*wt),sn=(ae+me)/2,Ft=(te+xe)/2,Yt=-(xe-te)/Gt*Ye,jt=(me-ae)/Gt*Ye,en=sn+Yt,fn=Ft+jt;return`M ${ae},${te} Q ${en},${fn} ${me},${xe}`}else return`M ${ae},${te} L ${me},${xe}`}),O.attr("transform",R=>{const B=R.source,ee=R.target,ae=B.x,te=B.y,me=ee.x,xe=ee.y;if(ie.has(R)){const re=ie.get(R),ye=typeof R.source=="string"?R.source:B.id,Ve=typeof R.target=="string"?R.target:ee.id,Ke=30;let Ye;re===0?Ye=ye<Ve?Ke:-Ke:Ye=ye<Ve?-Ke:Ke;const zt=me-ae,wt=xe-te,Gt=Math.sqrt(zt*zt+wt*wt),sn=(ae+me)/2,Ft=(te+xe)/2,Yt=-(xe-te)/Gt*Ye,jt=(me-ae)/Gt*Ye,en=sn+Yt,fn=Ft+jt;return`translate(${en}, ${fn})`}else return`translate(${(ae+me)/2}, ${(te+xe)/2})`}),O.select(".link-label-bg").each(function(R){const B=Wt(this.parentNode).select(".link-label").node();if(B){const ee=B.getBBox();Wt(this).attr("x",ee.x-4).attr("y",ee.y-2).attr("width",ee.width+8).attr("height",ee.height+4)}}),ce.attr("transform",R=>`translate(${R.x},${R.y})`)}return de}function I(D,U,k,F){const P=l.find(te=>te.id===F);if(!P)return;const Y=P.tags.map(te=>({id:te.id,name:te.label,color:te.color||P.color}));Y.push({id:"other",name:"",color:"#6b7280"}),new Set(Y.map(te=>te.id));const J=k.map(te=>{const xe=te.tagIds.find(re=>P.tags.some(ye=>ye.id===re))||"other";return{...te,groupId:xe}}),j={},de=120,q=40,ie=Y.length-1,L=ie*(de*2+q),O=Math.max(300,L/(2*Math.PI)),oe=2*Math.PI/ie;j.other={x:0,y:0};let ce=-Math.PI/2;Y.forEach(te=>{te.id!=="other"&&(j[te.id]={x:Math.cos(ce)*O,y:Math.sin(ce)*O},ce+=oe)});const he=U.append("g").attr("class","group-circles").selectAll("g").data(Y).join("g").attr("transform",te=>`translate(${j[te.id].x}, ${j[te.id].y})`);he.append("circle").attr("r",de).attr("fill",te=>te.color).attr("fill-opacity",.1).attr("stroke",te=>te.color).attr("stroke-width",2).attr("stroke-dasharray","5,5"),he.append("text").text(te=>te.name).attr("y",-130).attr("text-anchor","middle").attr("fill",te=>te.color).style("font-size","16px").style("font-weight","bold");const R=jy(J).force("charge",ev().strength(-100)).force("collide",y2(25)).force("x",tv(te=>j[te.groupId||"other"].x).strength(.1)).force("y",nv(te=>j[te.groupId||"other"].y).strength(.1)).on("tick",ae),B=20,ee=U.append("g").attr("class","nodes").selectAll("g").data(J).join("g").style("cursor","pointer").on("click",(te,me)=>{te.defaultPrevented||i(me)}).call(M(R));ee.append("circle").attr("r",B).attr("stroke","#fff").attr("stroke-width",1.5).attr("fill","#333"),ee.append("clipPath").attr("id",te=>`clip-grp-${te.id}`).append("circle").attr("r",B),ee.append("image").attr("xlink:href",te=>fv(te.image)||`https://api.dicebear.com/7.x/pixel-art/svg?seed=${encodeURIComponent(te.name)}`).attr("x",-B).attr("y",-B).attr("height",B*2).attr("width",B*2).attr("clip-path",te=>`url(#clip-grp-${te.id})`),ee.append("text").text(te=>te.name).attr("y",B+15).attr("text-anchor","middle").attr("fill","white").style("font-size","12px").style("paint-order","stroke").style("stroke","#111827").style("stroke-width","3px");function ae(){ee.attr("transform",te=>`translate(${te.x},${te.y})`)}return R}return()=>{E&&E.stop()}},[y,i,c,p,l,T]),S.jsxs("div",{ref:a,className:"w-full h-full bg-gray-900 overflow-hidden relative",children:[S.jsxs("div",{className:"absolute top-4 left-4 z-10 p-2 bg-gray-800/80 backdrop-blur-sm rounded-lg shadow-lg flex items-center gap-4 border border-gray-700",children:[S.jsxs("div",{className:"flex bg-gray-900 rounded-md p-1 border border-gray-600",children:[S.jsx("button",{onClick:()=>d("individual"),title:"",className:`p-2 rounded-md transition-colors ${c==="individual"?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-700"}`,children:S.jsx(Eb,{className:"w-5 h-5"})}),S.jsx("button",{onClick:()=>d("grouped"),title:"",className:`p-2 rounded-md transition-colors ${c==="grouped"?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-700"}`,children:S.jsx(wb,{className:"w-5 h-5"})})]}),c==="grouped"&&S.jsxs("select",{value:p,onChange:x=>h(x.target.value),disabled:T.length===0,className:"bg-gray-700 text-white text-sm rounded-md p-2 border border-gray-600 focus:ring-2 focus:ring-indigo-500 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsx("option",{value:"",children:"..."}),T.map(x=>S.jsx("option",{value:x.id,children:x.name},x.id))]})]}),S.jsx("svg",{ref:s}),t.length===0&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center text-gray-500 pointer-events-none",children:S.jsxs("div",{children:[S.jsx("p",{className:"text-xl",children:""}),S.jsx("p",{className:"mt-2",children:""})]})})]})},Qd=({isOpen:t,onClose:e,tagCategories:i,selectedTagIds:l,onApply:s})=>{const[a,c]=Q.useState(""),[d,p]=Q.useState(new Set),[h,y]=Q.useState({});Q.useEffect(()=>{t&&(p(new Set(l)),c(""),y({}))},[t,l]);const T=Q.useMemo(()=>a.trim()?i.map(w=>({...w,tags:w.tags.filter(E=>E.label.toLowerCase().includes(a.toLowerCase()))})).filter(w=>w.tags.length>0):i,[i,a]);Q.useEffect(()=>{if(a.trim()){const w={};T.forEach(E=>{w[E.id]=!0}),y(w)}else y({})},[a,T]);const x=w=>{y(E=>({...E,[w]:!E[w]}))},_=w=>{p(E=>{const M=new Set(E);return M.has(w)?M.delete(w):M.add(w),M})},N=()=>{s(Array.from(d)),e()},A=()=>{p(new Set)};return t?S.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:S.jsxs("div",{className:"bg-gray-800 text-white rounded-lg shadow-xl w-full max-w-2xl p-6 relative flex flex-col max-h-[80vh]",onClick:w=>w.stopPropagation(),children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:S.jsx(oi,{className:"w-6 h-6"})}),S.jsx("h2",{className:"text-2xl font-bold mb-4 text-indigo-400",children:" Tag"}),S.jsxs("div",{className:"relative mb-4",children:[S.jsx(gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",placeholder:" Tag...",value:a,onChange:w=>c(w.target.value),className:"w-full p-2 pl-10 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),S.jsxs("div",{className:"overflow-y-auto pr-2 -mr-2 space-y-4 flex-grow border-t border-b border-gray-700 py-4",children:[i.length>0?T.map(w=>S.jsxs("div",{children:[S.jsxs("button",{onClick:()=>x(w.id),className:"w-full flex items-center justify-between p-2 rounded-md hover:bg-gray-700/50 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:w.color}}),S.jsx("h3",{className:"font-semibold text-lg",children:w.name})]}),S.jsx(qd,{className:`w-5 h-5 text-gray-400 transition-transform ${h[w.id]?"rotate-180":""}`})]}),h[w.id]&&S.jsxs("div",{className:"pt-2 pl-4 space-y-1",children:[w.tags.map(E=>{const M=d.has(E.id);return S.jsxs("label",{className:"flex items-center gap-3 p-1.5 rounded-md cursor-pointer hover:bg-gray-700/50",children:[S.jsx("input",{type:"checkbox",checked:M,onChange:()=>_(E.id),className:"w-5 h-5 rounded bg-gray-900 border-gray-500 text-indigo-500 focus:ring-2 focus:ring-indigo-600 focus:ring-offset-gray-800 cursor-pointer",style:{accentColor:w.color}}),S.jsx("span",{className:"font-medium select-none",children:E.label})]},E.id)}),w.tags.length===0&&S.jsx("p",{className:"text-sm text-gray-500 pl-4 py-1",children:" Tag"})]})]},w.id)):S.jsxs("div",{className:"text-center py-10 text-gray-500",children:[S.jsx("p",{className:"text-lg",children:" Tag"}),S.jsx("p",{children:" Tag"})]}),T.length===0&&a&&S.jsx("div",{className:"text-center py-10 text-gray-500",children:S.jsxs("p",{children:["",a," Tag"]})})]}),S.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-gray-700",children:[S.jsx("button",{onClick:A,className:"px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700 rounded-md transition-colors",children:""}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors duration-200",children:""}),S.jsx("button",{onClick:N,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors duration-200",children:""})]})]})]})}):null};var mD=Uv();const gD=bd(mD),wu=0,Eo=1,tr=2,Bx=4;function dv(t){return()=>t}function yD(t){t()}function vD(t,e){return i=>t(e(i))}function hv(t,e){return()=>t(e)}function xD(t,e){return i=>t(e,i)}function Zd(t){return t!==void 0}function TD(...t){return()=>{t.map(yD)}}function Ts(){}function Au(t,e){return e(t),t}function SD(t,e){return e(t)}function Et(...t){return t}function at(t,e){return t(Eo,e)}function Fe(t,e){t(wu,e)}function Wd(t){t(tr)}function kt(t){return t(Bx)}function be(t,e){return at(t,xD(e,wu))}function ti(t,e){const i=t(Eo,l=>{i(),e(l)});return i}function pv(t){let e,i;return l=>s=>{e=s,i&&clearTimeout(i),i=setTimeout(()=>{l(e)},t)}}function Vx(t,e){return t===e}function Ct(t=Vx){let e;return i=>l=>{t(e,l)||(e=l,i(l))}}function ze(t){return e=>i=>{t(i)&&e(i)}}function Ce(t){return e=>vD(e,t)}function hi(t){return e=>()=>{e(t)}}function fe(t,...e){const i=_D(...e);return(l,s)=>{switch(l){case tr:Wd(t);return;case Eo:return at(t,i(s))}}}function pi(t,e){return i=>l=>{i(e=t(e,l))}}function Qo(t){return e=>i=>{t>0?t--:e(i)}}function qi(t){let e=null,i;return l=>s=>{e=s,!i&&(i=setTimeout(()=>{i=void 0,l(e)},t))}}function Je(...t){const e=new Array(t.length);let i=0,l=null;const s=Math.pow(2,t.length)-1;return t.forEach((a,c)=>{const d=Math.pow(2,c);at(a,p=>{const h=i;i=i|d,e[c]=p,h!==s&&i===s&&l&&(l(),l=null)})}),a=>c=>{const d=()=>{a([c].concat(e))};i===s?d():l=d}}function _D(...t){return e=>t.reduceRight(SD,e)}function CD(t){let e,i;const l=()=>e==null?void 0:e();return function(s,a){switch(s){case Eo:return a?i===a?void 0:(l(),i=a,e=at(t,a),e):(l(),Ts);case tr:l(),i=null;return}}}function pe(t){let e=t;const i=et();return(l,s)=>{switch(l){case wu:e=s;break;case Eo:{s(e);break}case Bx:return e}return i(l,s)}}function cn(t,e){return Au(pe(e),i=>be(t,i))}function et(){const t=[];return(e,i)=>{switch(e){case wu:t.slice().forEach(l=>{l(i)});return;case tr:t.splice(0,t.length);return;case Eo:return t.push(i),()=>{const l=t.indexOf(i);l>-1&&t.splice(l,1)}}}}function Ln(t){return Au(et(),e=>be(t,e))}function rt(t,e=[],{singleton:i}={singleton:!0}){return{constructor:t,dependencies:e,id:ED(),singleton:i}}const ED=()=>Symbol();function wD(t){const e=new Map,i=({constructor:l,dependencies:s,id:a,singleton:c})=>{if(c&&e.has(a))return e.get(a);const d=l(s.map(p=>i(p)));return c&&e.set(a,d),d};return i(t)}function Ot(...t){const e=et(),i=new Array(t.length);let l=0;const s=Math.pow(2,t.length)-1;return t.forEach((a,c)=>{const d=Math.pow(2,c);at(a,p=>{i[c]=p,l=l|d,l===s&&Fe(e,i)})}),function(a,c){switch(a){case tr:{Wd(e);return}case Eo:return l===s&&c(i),at(e,c)}}}function He(t,e=Vx){return fe(t,Ct(e))}function Sd(...t){return function(e,i){switch(e){case tr:return;case Eo:return TD(...t.map(l=>at(l,i)))}}}var Xn=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(Xn||{});const AD={0:"debug",3:"error",1:"log",2:"warn"},ND=()=>typeof globalThis>"u"?window:globalThis,wo=rt(()=>{const t=pe(3);return{log:pe((e,i,l=1)=>{var s;const a=(s=ND().VIRTUOSO_LOG_LEVEL)!=null?s:kt(t);l>=a&&console[AD[l]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,i)}),logLevel:t}},[],{singleton:!0});function Nu(t,e,i){return Ox(t,e,i).callbackRef}function Ox(t,e,i){const l=Te.useRef(null);let s=c=>{};const a=Te.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(c=>{requestAnimationFrame(()=>{const p=c[0].target;p.offsetParent!==null&&t(p)})}):null,[t,i]);return s=c=>{c&&e?(a==null||a.observe(c),l.current=c):(l.current&&(a==null||a.unobserve(l.current)),l.current=null)},{callbackRef:s,ref:l}}function bD(t,e,i){const l=Te.useRef(null),s=Te.useCallback(p=>{if(!(p!=null&&p.offsetParent))return;const h=p.getBoundingClientRect(),y=h.width;let T,x;if(e){const _=e.getBoundingClientRect(),N=h.top-_.top;x=_.height-Math.max(0,N),T=N+e.scrollTop}else{const _=c.current.ownerDocument.defaultView;x=_.innerHeight-Math.max(0,h.top),T=h.top+_.scrollY}l.current={offsetTop:T,visibleHeight:x,visibleWidth:y},t(l.current)},[t,e]),{callbackRef:a,ref:c}=Ox(s,!0,i),d=Te.useCallback(()=>{s(c.current)},[s,c]);return Te.useEffect(()=>{var p;if(e){e.addEventListener("scroll",d);const h=new ResizeObserver(()=>{requestAnimationFrame(d)});return h.observe(e),()=>{e.removeEventListener("scroll",d),h.unobserve(e)}}else{const h=(p=c.current)==null?void 0:p.ownerDocument.defaultView;return h==null||h.addEventListener("scroll",d),h==null||h.addEventListener("resize",d),()=>{h==null||h.removeEventListener("scroll",d),h==null||h.removeEventListener("resize",d)}}},[d,e,c]),a}const gn=rt(()=>{const t=et(),e=et(),i=pe(0),l=et(),s=pe(0),a=et(),c=et(),d=pe(0),p=pe(0),h=pe(0),y=pe(0),T=et(),x=et(),_=pe(!1),N=pe(!1),A=pe(!1);return be(fe(t,Ce(({scrollTop:w})=>w)),e),be(fe(t,Ce(({scrollHeight:w})=>w)),c),be(e,s),{deviation:i,fixedFooterHeight:h,fixedHeaderHeight:p,footerHeight:y,headerHeight:d,horizontalDirection:N,scrollBy:x,scrollContainerState:t,scrollHeight:c,scrollingInProgress:_,scrollTo:T,scrollTop:e,skipAnimationFrameInResizeObserver:A,smoothScrollTargetReached:l,statefulScrollTop:s,viewportHeight:a}},[],{singleton:!0}),cs={lvl:0};function Fx(t,e){const i=t.length;if(i===0)return[];let{index:l,value:s}=e(t[0]);const a=[];for(let c=1;c<i;c++){const{index:d,value:p}=e(t[c]);a.push({end:d-1,start:l,value:s}),l=d,s=p}return a.push({end:1/0,start:l,value:s}),a}function vt(t){return t===cs}function fs(t,e){if(!vt(t))return e===t.k?t.v:e<t.k?fs(t.l,e):fs(t.r,e)}function ni(t,e,i="k"){if(vt(t))return[-1/0,void 0];if(Number(t[i])===e)return[t.k,t.v];if(Number(t[i])<e){const l=ni(t.r,e,i);return l[0]===-1/0?[t.k,t.v]:l}return ni(t.l,e,i)}function Un(t,e,i){return vt(t)?Kx(e,i,1):e===t.k?Xt(t,{k:e,v:i}):e<t.k?mv(Xt(t,{l:Un(t.l,e,i)})):mv(Xt(t,{r:Un(t.r,e,i)}))}function Xl(){return cs}function bu(t,e,i){if(vt(t))return[];const l=ni(t,e)[0];return MD(Cd(t,l,i))}function _d(t,e){if(vt(t))return cs;const{k:i,l,r:s}=t;if(e===i){if(vt(l))return s;if(vt(s))return l;{const[a,c]=Jx(l);return ja(Xt(t,{k:a,l:Yx(l),v:c}))}}else return e<i?ja(Xt(t,{l:_d(l,e)})):ja(Xt(t,{r:_d(s,e)}))}function Ko(t){return vt(t)?[]:[...Ko(t.l),{k:t.k,v:t.v},...Ko(t.r)]}function Cd(t,e,i){if(vt(t))return[];const{k:l,l:s,r:a,v:c}=t;let d=[];return l>e&&(d=d.concat(Cd(s,e,i))),l>=e&&l<=i&&d.push({k:l,v:c}),l<=i&&(d=d.concat(Cd(a,e,i))),d}function ja(t){const{l:e,lvl:i,r:l}=t;if(l.lvl>=i-1&&e.lvl>=i-1)return t;if(i>l.lvl+1){if(Wf(e))return Xx(Xt(t,{lvl:i-1}));if(!vt(e)&&!vt(e.r))return Xt(e.r,{l:Xt(e,{r:e.r.l}),lvl:i,r:Xt(t,{l:e.r.r,lvl:i-1})});throw new Error("Unexpected empty nodes")}else{if(Wf(t))return Ed(Xt(t,{lvl:i-1}));if(!vt(l)&&!vt(l.l)){const s=l.l,a=Wf(s)?l.lvl-1:l.lvl;return Xt(s,{l:Xt(t,{lvl:i-1,r:s.l}),lvl:s.lvl+1,r:Ed(Xt(l,{l:s.r,lvl:a}))})}else throw new Error("Unexpected empty nodes")}}function Xt(t,e){return Kx(e.k!==void 0?e.k:t.k,e.v!==void 0?e.v:t.v,e.lvl!==void 0?e.lvl:t.lvl,e.l!==void 0?e.l:t.l,e.r!==void 0?e.r:t.r)}function Yx(t){return vt(t.r)?t.l:ja(Xt(t,{r:Yx(t.r)}))}function Wf(t){return vt(t)||t.lvl>t.r.lvl}function Jx(t){return vt(t.r)?[t.k,t.v]:Jx(t.r)}function Kx(t,e,i,l=cs,s=cs){return{k:t,l,lvl:i,r:s,v:e}}function mv(t){return Ed(Xx(t))}function Xx(t){const{l:e}=t;return!vt(e)&&e.lvl===t.lvl?Xt(e,{r:Xt(t,{l:e.r})}):t}function Ed(t){const{lvl:e,r:i}=t;return!vt(i)&&!vt(i.r)&&i.lvl===e&&i.r.lvl===e?Xt(i,{l:Xt(t,{r:i.l}),lvl:e+1}):t}function MD(t){return Fx(t,({k:e,v:i})=>({index:e,value:i}))}function $x(t,e){return!!(t&&t.startIndex===e.startIndex&&t.endIndex===e.endIndex)}function ds(t,e){return!!(t&&t[0]===e[0]&&t[1]===e[1])}const jd=rt(()=>({recalcInProgress:pe(!1)}),[],{singleton:!0});function Qx(t,e,i){return t[du(t,e,i)]}function du(t,e,i,l=0){let s=t.length-1;for(;l<=s;){const a=Math.floor((l+s)/2),c=t[a],d=i(c,e);if(d===0)return a;if(d===-1){if(s-l<2)return a-1;s=a-1}else{if(s===l)return a;l=a+1}}throw new Error(`Failed binary finding record in array - ${t.join(",")}, searched for ${e}`)}function RD(t,e,i,l){const s=du(t,e,l),a=du(t,i,l,s);return t.slice(s,a+1)}function hs(t,e){return Math.round(t.getBoundingClientRect()[e])}function Mu(t){return!vt(t.groupOffsetTree)}function eh({index:t},e){return e===t?0:e<t?-1:1}function ID(){return{groupIndices:[],groupOffsetTree:Xl(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Xl()}}function DD(t,e){let i=vt(t)?0:1/0;for(const l of e){const{endIndex:s,size:a,startIndex:c}=l;if(i=Math.min(i,c),vt(t)){t=Un(t,0,a);continue}const d=bu(t,c-1,s+1);if(d.some(qD(l)))continue;let p=!1,h=!1;for(const{end:y,start:T,value:x}of d)p?(s>=T||a===x)&&(t=_d(t,T)):(h=x!==a,p=!0),y>s&&s>=T&&x!==a&&(t=Un(t,s+1,x));h&&(t=Un(t,c,a))}return[t,i]}function UD(t){return typeof t.groupIndex<"u"}function LD({offset:t},e){return e===t?0:e<t?-1:1}function ps(t,e,i){if(e.length===0)return 0;const{index:l,offset:s,size:a}=Qx(e,t,eh),c=t-l,d=a*c+(c-1)*i+s;return d>0?d+i:d}function Zx(t,e){if(!Mu(e))return t;let i=0;for(;e.groupIndices[i]<=t+i;)i++;return t+i}function Wx(t,e,i){if(UD(t))return e.groupIndices[t.groupIndex]+1;{const l=t.index==="LAST"?i:t.index;let s=Zx(l,e);return s=Math.max(0,s,Math.min(i,s)),s}}function HD(t,e,i,l=0){return l>0&&(e=Math.max(e,Qx(t,l,eh).offset)),Fx(RD(t,e,i,LD),GD)}function kD(t,[e,i,l,s]){e.length>0&&l("received item sizes",e,Xn.DEBUG);const a=t.sizeTree;let c=a,d=0;if(i.length>0&&vt(a)&&e.length===2){const x=e[0].size,_=e[1].size;c=i.reduce((N,A)=>Un(Un(N,A,x),A+1,_),c)}else[c,d]=DD(c,e);if(c===a)return t;const{lastIndex:p,lastOffset:h,lastSize:y,offsetTree:T}=wd(t.offsetTree,d,c,s);return{groupIndices:i,groupOffsetTree:i.reduce((x,_)=>Un(x,_,ps(_,T,s)),Xl()),lastIndex:p,lastOffset:h,lastSize:y,offsetTree:T,sizeTree:c}}function zD(t){return Ko(t).map(({k:e,v:i},l,s)=>{const a=s[l+1];return{endIndex:a?a.k-1:1/0,size:i,startIndex:e}})}function gv(t,e){let i=0,l=0;for(;i<t;)i+=e[l+1]-e[l]-1,l++;return l-(i===t?0:1)}function wd(t,e,i,l){let s=t,a=0,c=0,d=0,p=0;if(e!==0){p=du(s,e-1,eh),d=s[p].offset;const h=ni(i,e-1);a=h[0],c=h[1],s.length&&s[p].size===ni(i,e)[1]&&(p-=1),s=s.slice(0,p+1)}else s=[];for(const{start:h,value:y}of bu(i,e,1/0)){const T=h-a,x=T*c+d+T*l;s.push({index:h,offset:x,size:y}),a=h,d=x,c=y}return{lastIndex:a,lastOffset:d,lastSize:c,offsetTree:s}}function GD(t){return{index:t.index,value:t}}function qD(t){const{endIndex:e,size:i,startIndex:l}=t;return s=>s.start===l&&(s.end===e||s.end===1/0)&&s.value===i}const PD={offsetHeight:"height",offsetWidth:"width"},yi=rt(([{log:t},{recalcInProgress:e}])=>{const i=et(),l=et(),s=cn(l,0),a=et(),c=et(),d=pe(0),p=pe([]),h=pe(void 0),y=pe(void 0),T=pe((D,U)=>hs(D,PD[U])),x=pe(void 0),_=pe(0),N=ID(),A=cn(fe(i,Je(p,t,_),pi(kD,N),Ct()),N),w=cn(fe(p,Ct(),pi((D,U)=>({current:U,prev:D.current}),{current:[],prev:[]}),Ce(({prev:D})=>D)),[]);be(fe(p,ze(D=>D.length>0),Je(A,_),Ce(([D,U,k])=>{const F=D.reduce((P,Y,J)=>Un(P,Y,ps(Y,U.offsetTree,k)||J),Xl());return{...U,groupIndices:D,groupOffsetTree:F}})),A),be(fe(l,Je(A),ze(([D,{lastIndex:U}])=>D<U),Ce(([D,{lastIndex:U,lastSize:k}])=>[{endIndex:U,size:k,startIndex:D}])),i),be(h,y);const E=cn(fe(h,Ce(D=>D===void 0)),!0);be(fe(y,ze(D=>D!==void 0&&vt(kt(A).sizeTree)),Ce(D=>[{endIndex:0,size:D,startIndex:0}])),i);const M=Ln(fe(i,Je(A),pi(({sizes:D},[U,k])=>({changed:k!==D,sizes:k}),{changed:!1,sizes:N}),Ce(D=>D.changed)));at(fe(d,pi((D,U)=>({diff:D.prev-U,prev:U}),{diff:0,prev:0}),Ce(D=>D.diff)),D=>{const{groupIndices:U}=kt(A);if(D>0)Fe(e,!0),Fe(a,D+gv(D,U));else if(D<0){const k=kt(w);k.length>0&&(D-=gv(-D,k)),Fe(c,D)}}),at(fe(d,Je(t)),([D,U])=>{D<0&&U("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:d},Xn.ERROR)});const H=Ln(a);be(fe(a,Je(A),Ce(([D,U])=>{const k=U.groupIndices.length>0,F=[],P=U.lastSize;if(k){const Y=fs(U.sizeTree,0);let J=0,j=0;for(;J<D;){const q=U.groupIndices[j],ie=U.groupIndices.length===j+1?1/0:U.groupIndices[j+1]-q-1;F.push({endIndex:q,size:Y,startIndex:q}),F.push({endIndex:q+1+ie-1,size:P,startIndex:q+1}),j++,J+=ie+1}const de=Ko(U.sizeTree);return J!==D&&de.shift(),de.reduce((q,{k:ie,v:L})=>{let O=q.ranges;return q.prevSize!==0&&(O=[...q.ranges,{endIndex:ie+D-1,size:q.prevSize,startIndex:q.prevIndex}]),{prevIndex:ie+D,prevSize:L,ranges:O}},{prevIndex:D,prevSize:0,ranges:F}).ranges}return Ko(U.sizeTree).reduce((Y,{k:J,v:j})=>({prevIndex:J+D,prevSize:j,ranges:[...Y.ranges,{endIndex:J+D-1,size:Y.prevSize,startIndex:Y.prevIndex}]}),{prevIndex:0,prevSize:P,ranges:[]}).ranges})),i);const I=Ln(fe(c,Je(A,_),Ce(([D,{offsetTree:U},k])=>{const F=-D;return ps(F,U,k)})));return be(fe(c,Je(A,_),Ce(([D,U,k])=>{if(U.groupIndices.length>0){if(vt(U.sizeTree))return U;let F=Xl();const P=kt(w);let Y=0,J=0,j=0;for(;Y<-D;){j=P[J];const de=P[J+1]-j-1;J++,Y+=de+1}if(F=Ko(U.sizeTree).reduce((de,{k:q,v:ie})=>Un(de,Math.max(0,q+D),ie),F),Y!==-D){const de=fs(U.sizeTree,j);F=Un(F,0,de);const q=ni(U.sizeTree,-D+1)[1];F=Un(F,1,q)}return{...U,sizeTree:F,...wd(U.offsetTree,0,F,k)}}else{const F=Ko(U.sizeTree).reduce((P,{k:Y,v:J})=>Un(P,Math.max(0,Y+D),J),Xl());return{...U,sizeTree:F,...wd(U.offsetTree,0,F,k)}}})),A),{beforeUnshiftWith:H,data:x,defaultItemSize:y,firstItemIndex:d,fixedItemSize:h,gap:_,groupIndices:p,itemSize:T,listRefresh:M,shiftWith:c,shiftWithOffset:I,sizeRanges:i,sizes:A,statefulTotalCount:s,totalCount:l,trackItemSizes:E,unshiftWith:a}},Et(wo,jd),{singleton:!0});function BD(t){return t.reduce((e,i)=>(e.groupIndices.push(e.totalCount),e.totalCount+=i+1,e),{groupIndices:[],totalCount:0})}const jx=rt(([{groupIndices:t,sizes:e,totalCount:i},{headerHeight:l,scrollTop:s}])=>{const a=et(),c=et(),d=Ln(fe(a,Ce(BD)));return be(fe(d,Ce(p=>p.totalCount)),i),be(fe(d,Ce(p=>p.groupIndices)),t),be(fe(Ot(s,e,l),ze(([p,h])=>Mu(h)),Ce(([p,h,y])=>ni(h.groupOffsetTree,Math.max(p-y,0),"v")[0]),Ct(),Ce(p=>[p])),c),{groupCounts:a,topItemsIndexes:c}},Et(yi,gn)),Ao=rt(([{log:t}])=>{const e=pe(!1),i=Ln(fe(e,ze(l=>l),Ct()));return at(e,l=>{l&&kt(t)("props updated",{},Xn.DEBUG)}),{didMount:i,propsReady:e}},Et(wo),{singleton:!0}),VD=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function eT(t){const e=typeof t=="number"?{index:t}:t;return e.align||(e.align="start"),(!e.behavior||!VD)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Ss=rt(([{gap:t,listRefresh:e,sizes:i,totalCount:l},{fixedFooterHeight:s,fixedHeaderHeight:a,footerHeight:c,headerHeight:d,scrollingInProgress:p,scrollTo:h,smoothScrollTargetReached:y,viewportHeight:T},{log:x}])=>{const _=et(),N=et(),A=pe(0);let w=null,E=null,M=null;function H(){w&&(w(),w=null),M&&(M(),M=null),E&&(clearTimeout(E),E=null),Fe(p,!1)}return be(fe(_,Je(i,T,l,A,d,c,x),Je(t,a,s),Ce(([[I,D,U,k,F,P,Y,J],j,de,q])=>{const ie=eT(I),{align:L,behavior:O,offset:oe}=ie,ce=k-1,he=Wx(ie,D,ce);let R=ps(he,D.offsetTree,j)+P;L==="end"?(R+=de+ni(D.sizeTree,he)[1]-U+q,he===ce&&(R+=Y)):L==="center"?R+=(de+ni(D.sizeTree,he)[1]-U+q)/2:R-=F,oe&&(R+=oe);const B=ee=>{H(),ee?(J("retrying to scroll to",{location:I},Xn.DEBUG),Fe(_,I)):(Fe(N,!0),J("list did not change, scroll successful",{},Xn.DEBUG))};if(H(),O==="smooth"){let ee=!1;M=at(e,ae=>{ee=ee||ae}),w=ti(y,()=>{B(ee)})}else w=ti(fe(e,OD(150)),B);return E=setTimeout(()=>{H()},1200),Fe(p,!0),J("scrolling from index to",{behavior:O,index:he,top:R},Xn.DEBUG),{behavior:O,top:R}})),h),{scrollTargetReached:N,scrollToIndex:_,topListHeight:A}},Et(yi,gn,wo),{singleton:!0});function OD(t){return e=>{const i=setTimeout(()=>{e(!1)},t);return l=>{l&&(e(!0),clearTimeout(i))}}}function th(t,e){t==0?e():requestAnimationFrame(()=>{th(t-1,e)})}function nh(t,e){const i=e-1;return typeof t=="number"?t:t.index==="LAST"?i:t.index}const _s=rt(([{defaultItemSize:t,listRefresh:e,sizes:i},{scrollTop:l},{scrollTargetReached:s,scrollToIndex:a},{didMount:c}])=>{const d=pe(!0),p=pe(0),h=pe(!0);return be(fe(c,Je(p),ze(([y,T])=>!!T),hi(!1)),d),be(fe(c,Je(p),ze(([y,T])=>!!T),hi(!1)),h),at(fe(Ot(e,c),Je(d,i,t,h),ze(([[,y],T,{sizeTree:x},_,N])=>y&&(!vt(x)||Zd(_))&&!T&&!N),Je(p)),([,y])=>{ti(s,()=>{Fe(h,!0)}),th(4,()=>{ti(l,()=>{Fe(d,!0)}),Fe(a,y)})}),{initialItemFinalLocationReached:h,initialTopMostItemIndex:p,scrolledToInitialItem:d}},Et(yi,gn,Ss,Ao),{singleton:!0});function tT(t,e){return Math.abs(t-e)<1.01}const ms="up",ns="down",FD="none",YD={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},JD=0,Cs=rt(([{footerHeight:t,headerHeight:e,scrollBy:i,scrollContainerState:l,scrollTop:s,viewportHeight:a}])=>{const c=pe(!1),d=pe(!0),p=et(),h=et(),y=pe(4),T=pe(JD),x=cn(fe(Sd(fe(He(s),Qo(1),hi(!0)),fe(He(s),Qo(1),hi(!1),pv(100))),Ct()),!1),_=cn(fe(Sd(fe(i,hi(!0)),fe(i,hi(!1),pv(200))),Ct()),!1);be(fe(Ot(He(s),He(T)),Ce(([M,H])=>M<=H),Ct()),d),be(fe(d,qi(50)),h);const N=Ln(fe(Ot(l,He(a),He(e),He(t),He(y)),pi((M,[{scrollHeight:H,scrollTop:I},D,U,k,F])=>{const P=I+D-H>-F,Y={scrollHeight:H,scrollTop:I,viewportHeight:D};if(P){let j,de;return I>M.state.scrollTop?(j="SCROLLED_DOWN",de=M.state.scrollTop-I):(j="SIZE_DECREASED",de=M.state.scrollTop-I||M.scrollTopDelta),{atBottom:!0,atBottomBecause:j,scrollTopDelta:de,state:Y}}let J;return Y.scrollHeight>M.state.scrollHeight?J="SIZE_INCREASED":D<M.state.viewportHeight?J="VIEWPORT_HEIGHT_DECREASING":I<M.state.scrollTop?J="SCROLLING_UPWARDS":J="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:J,state:Y}},YD),Ct((M,H)=>M&&M.atBottom===H.atBottom))),A=cn(fe(l,pi((M,{scrollHeight:H,scrollTop:I,viewportHeight:D})=>{if(tT(M.scrollHeight,H))return{changed:!1,jump:0,scrollHeight:H,scrollTop:I};{const U=H-(I+D)<1;return M.scrollTop!==I&&U?{changed:!0,jump:M.scrollTop-I,scrollHeight:H,scrollTop:I}:{changed:!0,jump:0,scrollHeight:H,scrollTop:I}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),ze(M=>M.changed),Ce(M=>M.jump)),0);be(fe(N,Ce(M=>M.atBottom)),c),be(fe(c,qi(50)),p);const w=pe(ns);be(fe(l,Ce(({scrollTop:M})=>M),Ct(),pi((M,H)=>kt(_)?{direction:M.direction,prevScrollTop:H}:{direction:H<M.prevScrollTop?ms:ns,prevScrollTop:H},{direction:ns,prevScrollTop:0}),Ce(M=>M.direction)),w),be(fe(l,qi(50),hi(FD)),w);const E=pe(0);return be(fe(x,ze(M=>!M),hi(0)),E),be(fe(s,qi(100),Je(x),ze(([M,H])=>!!H),pi(([M,H],[I])=>[H,I],[0,0]),Ce(([M,H])=>H-M)),E),{atBottomState:N,atBottomStateChange:p,atBottomThreshold:y,atTopStateChange:h,atTopThreshold:T,isAtBottom:c,isAtTop:d,isScrolling:x,lastJumpDueToItemResize:A,scrollDirection:w,scrollVelocity:E}},Et(gn)),hu="top",pu="bottom",yv="none";function vv(t,e,i){return typeof t=="number"?i===ms&&e===hu||i===ns&&e===pu?t:0:i===ms?e===hu?t.main:t.reverse:e===pu?t.main:t.reverse}function xv(t,e){var i;return typeof t=="number"?t:(i=t[e])!=null?i:0}const ih=rt(([{deviation:t,fixedHeaderHeight:e,headerHeight:i,scrollTop:l,viewportHeight:s}])=>{const a=et(),c=pe(0),d=pe(0),p=pe(0),h=cn(fe(Ot(He(l),He(s),He(i),He(a,ds),He(p),He(c),He(e),He(t),He(d)),Ce(([y,T,x,[_,N],A,w,E,M,H])=>{const I=y-M,D=w+E,U=Math.max(x-I,0);let k=yv;const F=xv(H,hu),P=xv(H,pu);return _-=M,_+=x+E,N+=x+E,N-=M,_>y+D-F&&(k=ms),N<y-U+T+P&&(k=ns),k!==yv?[Math.max(I-x-vv(A,hu,k)-F,0),I-U-E+T+vv(A,pu,k)+P]:null}),ze(y=>y!=null),Ct(ds)),[0,0]);return{increaseViewportBy:d,listBoundary:a,overscan:p,topListHeight:c,visibleRange:h}},Et(gn),{singleton:!0});function KD(t,e,i){if(Mu(e)){const l=Zx(t,e);return[{index:ni(e.groupOffsetTree,l)[0],offset:0,size:0},{data:i==null?void 0:i[0],index:l,offset:0,size:0}]}return[{data:i==null?void 0:i[0],index:t,offset:0,size:0}]}const jf={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function eu(t,e,i,l,s,a){const{lastIndex:c,lastOffset:d,lastSize:p}=s;let h=0,y=0;if(t.length>0){h=t[0].offset;const A=t[t.length-1];y=A.offset+A.size}const T=i-c,x=d+T*p+(T-1)*l,_=h,N=x-y;return{bottom:y,firstItemIndex:a,items:Tv(t,s,a),offsetBottom:N,offsetTop:h,top:_,topItems:Tv(e,s,a),topListHeight:e.reduce((A,w)=>w.size+A,0),totalCount:i}}function nT(t,e,i,l,s,a){let c=0;if(i.groupIndices.length>0)for(const y of i.groupIndices){if(y-c>=t)break;c++}const d=t+c,p=nh(e,d),h=Array.from({length:d}).map((y,T)=>({data:a[T+p],index:T+p,offset:0,size:0}));return eu(h,[],d,s,i,l)}function Tv(t,e,i){if(t.length===0)return[];if(!Mu(e))return t.map(h=>({...h,index:h.index+i,originalIndex:h.index}));const l=t[0].index,s=t[t.length-1].index,a=[],c=bu(e.groupOffsetTree,l,s);let d,p=0;for(const h of t){(!d||d.end<h.index)&&(d=c.shift(),p=e.groupIndices.indexOf(d.start));let y;h.index===d.start?y={index:p,type:"group"}:y={groupIndex:p,index:h.index-(p+1)+i},a.push({...y,data:h.data,offset:h.offset,originalIndex:h.index,size:h.size})}return a}const Wo=rt(([{data:t,firstItemIndex:e,gap:i,sizes:l,totalCount:s},a,{listBoundary:c,topListHeight:d,visibleRange:p},{initialTopMostItemIndex:h,scrolledToInitialItem:y},{topListHeight:T},x,{didMount:_},{recalcInProgress:N}])=>{const A=pe([]),w=pe(0),E=et();be(a.topItemsIndexes,A);const M=cn(fe(Ot(_,N,He(p,ds),He(s),He(l),He(h),y,He(A),He(e),He(i),t),ze(([U,k,,F,,,,,,,P])=>{const Y=P&&P.length!==F;return U&&!k&&!Y}),Ce(([,,[U,k],F,P,Y,J,j,de,q,ie])=>{const L=P,{offsetTree:O,sizeTree:oe}=L,ce=kt(w);if(F===0)return{...jf,totalCount:F};if(U===0&&k===0)return ce===0?{...jf,totalCount:F}:nT(ce,Y,P,de,q,ie||[]);if(vt(oe))return ce>0?null:eu(KD(nh(Y,F),L,ie),[],F,q,L,de);const he=[];if(j.length>0){const te=j[0],me=j[j.length-1];let xe=0;for(const re of bu(oe,te,me)){const ye=re.value,Ve=Math.max(re.start,te),Ke=Math.min(re.end,me);for(let Ye=Ve;Ye<=Ke;Ye++)he.push({data:ie==null?void 0:ie[Ye],index:Ye,offset:xe,size:ye}),xe+=ye}}if(!J)return eu([],he,F,q,L,de);const R=j.length>0?j[j.length-1]+1:0,B=HD(O,U,k,R);if(B.length===0)return null;const ee=F-1,ae=Au([],te=>{for(const me of B){const xe=me.value;let re=xe.offset,ye=me.start;const Ve=xe.size;if(xe.offset<U){ye+=Math.floor((U-xe.offset+q)/(Ve+q));const Ye=ye-me.start;re+=Ye*Ve+Ye*q}ye<R&&(re+=(R-ye)*Ve,ye=R);const Ke=Math.min(me.end,ee);for(let Ye=ye;Ye<=Ke&&!(re>=k);Ye++)te.push({data:ie==null?void 0:ie[Ye],index:Ye,offset:re,size:Ve}),re+=Ve+q}});return eu(ae,he,F,q,L,de)}),ze(U=>U!==null),Ct()),jf);be(fe(t,ze(Zd),Ce(U=>U==null?void 0:U.length)),s),be(fe(M,Ce(U=>U.topListHeight)),T),be(T,d),be(fe(M,Ce(U=>[U.top,U.bottom])),c),be(fe(M,Ce(U=>U.items)),E);const H=Ln(fe(M,ze(({items:U})=>U.length>0),Je(s,t),ze(([{items:U},k])=>U[U.length-1].originalIndex===k-1),Ce(([,U,k])=>[U-1,k]),Ct(ds),Ce(([U])=>U))),I=Ln(fe(M,qi(200),ze(({items:U,topItems:k})=>U.length>0&&U[0].originalIndex===k.length),Ce(({items:U})=>U[0].index),Ct())),D=Ln(fe(M,ze(({items:U})=>U.length>0),Ce(({items:U})=>{let k=0,F=U.length-1;for(;U[k].type==="group"&&k<F;)k++;for(;U[F].type==="group"&&F>k;)F--;return{endIndex:U[F].index,startIndex:U[k].index}}),Ct($x)));return{endReached:H,initialItemCount:w,itemsRendered:E,listState:M,rangeChanged:D,startReached:I,topItemsIndexes:A,...x}},Et(yi,jx,ih,_s,Ss,Cs,Ao,jd),{singleton:!0}),iT=rt(([{fixedFooterHeight:t,fixedHeaderHeight:e,footerHeight:i,headerHeight:l},{listState:s}])=>{const a=et(),c=cn(fe(Ot(i,t,l,e,s),Ce(([d,p,h,y,T])=>d+p+h+y+T.offsetBottom+T.bottom)),0);return be(He(c),a),{totalListHeight:c,totalListHeightChanged:a}},Et(gn,Wo),{singleton:!0}),XD=rt(([{viewportHeight:t},{totalListHeight:e}])=>{const i=pe(!1),l=cn(fe(Ot(i,t,e),ze(([s])=>s),Ce(([,s,a])=>Math.max(0,s-a)),qi(0),Ct()),0);return{alignToBottom:i,paddingTopAddition:l}},Et(gn,iT),{singleton:!0}),oT=rt(()=>({context:pe(null)})),$D=({itemBottom:t,itemTop:e,locationParams:{align:i,behavior:l,...s},viewportBottom:a,viewportTop:c})=>e<c?{...s,align:i??"start",behavior:l}:t>a?{...s,align:i??"end",behavior:l}:null,lT=rt(([{gap:t,sizes:e,totalCount:i},{fixedFooterHeight:l,fixedHeaderHeight:s,headerHeight:a,scrollingInProgress:c,scrollTop:d,viewportHeight:p},{scrollToIndex:h}])=>{const y=et();return be(fe(y,Je(e,p,i,a,s,l,d),Je(t),Ce(([[T,x,_,N,A,w,E,M],H])=>{const{align:I,behavior:D,calculateViewLocation:U=$D,done:k,...F}=T,P=Wx(T,x,N-1),Y=ps(P,x.offsetTree,H)+A+w,J=Y+ni(x.sizeTree,P)[1],j=M+w,de=M+_-E,q=U({itemBottom:J,itemTop:Y,locationParams:{align:I,behavior:D,...F},viewportBottom:de,viewportTop:j});return q?k&&ti(fe(c,ze(ie=>!ie),Qo(kt(c)?1:2)),k):k&&k(),q}),ze(T=>T!==null)),h),{scrollIntoView:y}},Et(yi,gn,Ss,Wo,wo),{singleton:!0});function Sv(t){return t?t==="smooth"?"smooth":"auto":!1}const QD=(t,e)=>typeof t=="function"?Sv(t(e)):e&&Sv(t),ZD=rt(([{listRefresh:t,totalCount:e,fixedItemSize:i,data:l},{atBottomState:s,isAtBottom:a},{scrollToIndex:c},{scrolledToInitialItem:d},{didMount:p,propsReady:h},{log:y},{scrollingInProgress:T},{context:x},{scrollIntoView:_}])=>{const N=pe(!1),A=et();let w=null;function E(D){Fe(c,{align:"end",behavior:D,index:"LAST"})}at(fe(Ot(fe(He(e),Qo(1)),p),Je(He(N),a,d,T),Ce(([[D,U],k,F,P,Y])=>{let J=U&&P,j="auto";return J&&(j=QD(k,F||Y),J=J&&!!j),{followOutputBehavior:j,shouldFollow:J,totalCount:D}}),ze(({shouldFollow:D})=>D)),({followOutputBehavior:D,totalCount:U})=>{w&&(w(),w=null),kt(i)?requestAnimationFrame(()=>{kt(y)("following output to ",{totalCount:U},Xn.DEBUG),E(D)}):w=ti(t,()=>{kt(y)("following output to ",{totalCount:U},Xn.DEBUG),E(D),w=null})});function M(D){const U=ti(s,k=>{D&&!k.atBottom&&k.notAtBottomBecause==="SIZE_INCREASED"&&!w&&(kt(y)("scrolling to bottom due to increased size",{},Xn.DEBUG),E("auto"))});setTimeout(U,100)}at(fe(Ot(He(N),e,h),ze(([D,,U])=>D&&U),pi(({value:D},[,U])=>({refreshed:D===U,value:U}),{refreshed:!1,value:0}),ze(({refreshed:D})=>D),Je(N,e)),([,D])=>{kt(d)&&M(D!==!1)}),at(A,()=>{M(kt(N)!==!1)}),at(Ot(He(N),s),([D,U])=>{D&&!U.atBottom&&U.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&E("auto")});const H=pe(null),I=et();return be(Sd(fe(He(l),Ce(D=>{var U;return(U=D==null?void 0:D.length)!=null?U:0})),fe(He(e))),I),at(fe(Ot(fe(I,Qo(1)),p),Je(He(H),d,T,x),Ce(([[D,U],k,F,P,Y])=>U&&F&&(k==null?void 0:k({context:Y,totalCount:D,scrollingInProgress:P}))),ze(D=>!!D),qi(0)),D=>{w&&(w(),w=null),kt(i)?requestAnimationFrame(()=>{kt(y)("scrolling into view",{}),Fe(_,D)}):w=ti(t,()=>{kt(y)("scrolling into view",{}),Fe(_,D),w=null})}),{autoscrollToBottom:A,followOutput:N,scrollIntoViewOnChange:H}},Et(yi,Cs,Ss,_s,Ao,wo,gn,oT,lT)),WD=rt(([{data:t,firstItemIndex:e,gap:i,sizes:l},{initialTopMostItemIndex:s},{initialItemCount:a,listState:c},{didMount:d}])=>(be(fe(d,Je(a),ze(([,p])=>p!==0),Je(s,l,e,i,t),Ce(([[,p],h,y,T,x,_=[]])=>nT(p,h,y,T,x,_))),c),{}),Et(yi,_s,Wo,Ao),{singleton:!0}),jD=rt(([{didMount:t},{scrollTo:e},{listState:i}])=>{const l=pe(0);return at(fe(t,Je(l),ze(([,s])=>s!==0),Ce(([,s])=>({top:s}))),s=>{ti(fe(i,Qo(1),ze(a=>a.items.length>1)),()=>{requestAnimationFrame(()=>{Fe(e,s)})})}),{initialScrollTop:l}},Et(Ao,gn,Wo),{singleton:!0}),rT=rt(([{scrollVelocity:t}])=>{const e=pe(!1),i=et(),l=pe(!1);return be(fe(t,Je(l,e,i),ze(([s,a])=>!!a),Ce(([s,a,c,d])=>{const{enter:p,exit:h}=a;if(c){if(h(s,d))return!1}else if(p(s,d))return!0;return c}),Ct()),e),at(fe(Ot(e,t,i),Je(l)),([[s,a,c],d])=>{s&&d&&d.change&&d.change(a,c)}),{isSeeking:e,scrollSeekConfiguration:l,scrollSeekRangeChanged:i,scrollVelocity:t}},Et(Cs),{singleton:!0}),oh=rt(([{scrollContainerState:t,scrollTo:e}])=>{const i=et(),l=et(),s=et(),a=pe(!1),c=pe(void 0);return be(fe(Ot(i,l),Ce(([{scrollHeight:d,scrollTop:p,viewportHeight:h},{offsetTop:y}])=>({scrollHeight:d,scrollTop:Math.max(0,p-y),viewportHeight:h}))),t),be(fe(e,Je(l),Ce(([d,{offsetTop:p}])=>({...d,top:d.top+p}))),s),{customScrollParent:c,useWindowScroll:a,windowScrollContainerState:i,windowScrollTo:s,windowViewportRect:l}},Et(gn)),eU=rt(([{sizeRanges:t,sizes:e},{headerHeight:i,scrollTop:l},{initialTopMostItemIndex:s},{didMount:a},{useWindowScroll:c,windowScrollContainerState:d,windowViewportRect:p}])=>{const h=et(),y=pe(void 0),T=pe(null),x=pe(null);return be(d,T),be(p,x),at(fe(h,Je(e,l,c,T,x,i)),([_,N,A,w,E,M,H])=>{const I=zD(N.sizeTree);w&&E!==null&&M!==null&&(A=E.scrollTop-M.offsetTop),A-=H,_({ranges:I,scrollTop:A})}),be(fe(y,ze(Zd),Ce(tU)),s),be(fe(a,Je(y),ze(([,_])=>_!==void 0),Ct(),Ce(([,_])=>_.ranges)),t),{getState:h,restoreStateFrom:y}},Et(yi,gn,_s,Ao,oh));function tU(t){return{align:"start",index:0,offset:t.scrollTop}}const nU=rt(([{topItemsIndexes:t}])=>{const e=pe(0);return be(fe(e,ze(i=>i>=0),Ce(i=>Array.from({length:i}).map((l,s)=>s))),t),{topItemCount:e}},Et(Wo));function sT(t){let e=!1,i;return()=>(e||(e=!0,i=t()),i)}const iU=sT(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),oU=rt(([{deviation:t,scrollBy:e,scrollingInProgress:i,scrollTop:l},{isAtBottom:s,isScrolling:a,lastJumpDueToItemResize:c,scrollDirection:d},{listState:p},{beforeUnshiftWith:h,gap:y,shiftWithOffset:T,sizes:x},{log:_},{recalcInProgress:N}])=>{const A=Ln(fe(p,Je(c),pi(([,E,M,H],[{bottom:I,items:D,offsetBottom:U,totalCount:k},F])=>{const P=I+U;let Y=0;return M===k&&E.length>0&&D.length>0&&(D[0].originalIndex===0&&E[0].originalIndex===0||(Y=P-H,Y!==0&&(Y+=F))),[Y,D,k,P]},[0,[],0,0]),ze(([E])=>E!==0),Je(l,d,i,s,_,N),ze(([,E,M,H,,,I])=>!I&&!H&&E!==0&&M===ms),Ce(([[E],,,,,M])=>(M("Upward scrolling compensation",{amount:E},Xn.DEBUG),E))));function w(E){E>0?(Fe(e,{behavior:"auto",top:-E}),Fe(t,0)):(Fe(t,0),Fe(e,{behavior:"auto",top:-E}))}return at(fe(A,Je(t,a)),([E,M,H])=>{H&&iU()?Fe(t,M-E):w(-E)}),at(fe(Ot(cn(a,!1),t,N),ze(([E,M,H])=>!E&&!H&&M!==0),Ce(([E,M])=>M),qi(1)),w),be(fe(T,Ce(E=>({top:-E}))),e),at(fe(h,Je(x,y),Ce(([E,{groupIndices:M,lastSize:H,sizeTree:I},D])=>{function U(k){return k*(H+D)}if(M.length===0)return U(E);{let k=0;const F=fs(I,0);let P=0,Y=0;for(;P<E;){P++,k+=F;let J=M.length===Y+1?1/0:M[Y+1]-M[Y]-1;P+J>E&&(k-=F,J=E-P+1),P+=J,k+=U(J),Y++}return k}})),E=>{Fe(t,E),requestAnimationFrame(()=>{Fe(e,{top:E}),requestAnimationFrame(()=>{Fe(t,0),Fe(N,!1)})})}),{deviation:t}},Et(gn,Cs,Wo,yi,wo,jd)),lU=rt(([t,e,i,l,s,a,c,d,p,h,y])=>({...t,...e,...i,...l,...s,...a,...c,...d,...p,...h,...y}),Et(ih,WD,Ao,rT,iT,jD,XD,oh,lT,wo,oT)),aT=rt(([{data:t,defaultItemSize:e,firstItemIndex:i,fixedItemSize:l,gap:s,groupIndices:a,itemSize:c,sizeRanges:d,sizes:p,statefulTotalCount:h,totalCount:y,trackItemSizes:T},{initialItemFinalLocationReached:x,initialTopMostItemIndex:_,scrolledToInitialItem:N},A,w,E,{listState:M,topItemsIndexes:H,...I},{scrollToIndex:D},U,{topItemCount:k},{groupCounts:F},P])=>(be(I.rangeChanged,P.scrollSeekRangeChanged),be(fe(P.windowViewportRect,Ce(Y=>Y.visibleHeight)),A.viewportHeight),{data:t,defaultItemHeight:e,firstItemIndex:i,fixedItemHeight:l,gap:s,groupCounts:F,initialItemFinalLocationReached:x,initialTopMostItemIndex:_,scrolledToInitialItem:N,sizeRanges:d,topItemCount:k,topItemsIndexes:H,totalCount:y,...E,groupIndices:a,itemSize:c,listState:M,scrollToIndex:D,statefulTotalCount:h,trackItemSizes:T,...I,...P,...A,sizes:p,...w}),Et(yi,_s,gn,eU,ZD,Wo,Ss,oU,nU,jx,lU));function rU(t,e){const i={},l={};let s=0;const a=t.length;for(;s<a;)l[t[s]]=1,s+=1;for(const c in e)Object.hasOwn(l,c)||(i[c]=e[c]);return i}const Fa=typeof document<"u"?Te.useLayoutEffect:Te.useEffect;function sU(t,e,i){const l=Object.keys(e.required||{}),s=Object.keys(e.optional||{}),a=Object.keys(e.methods||{}),c=Object.keys(e.events||{}),d=Te.createContext({});function p(w,E){w.propsReady&&Fe(w.propsReady,!1);for(const M of l){const H=w[e.required[M]];Fe(H,E[M])}for(const M of s)if(M in E){const H=w[e.optional[M]];Fe(H,E[M])}w.propsReady&&Fe(w.propsReady,!0)}function h(w){return a.reduce((E,M)=>(E[M]=H=>{const I=w[e.methods[M]];Fe(I,H)},E),{})}function y(w){return c.reduce((E,M)=>(E[M]=CD(w[e.events[M]]),E),{})}const T=Te.forwardRef((w,E)=>{const{children:M,...H}=w,[I]=Te.useState(()=>Au(wD(t),k=>{p(k,H)})),[D]=Te.useState(hv(y,I));Fa(()=>{for(const k of c)k in H&&at(D[k],H[k]);return()=>{Object.values(D).map(Wd)}},[H,D,I]),Fa(()=>{p(I,H)}),Te.useImperativeHandle(E,dv(h(I)));const U=i;return S.jsx(d.Provider,{value:I,children:i?S.jsx(U,{...rU([...l,...s,...c],H),children:M}):M})}),x=w=>{const E=Te.useContext(d);return Te.useCallback(M=>{Fe(E[w],M)},[E,w])},_=w=>{const E=Te.useContext(d)[w],M=Te.useCallback(H=>at(E,H),[E]);return Te.useSyncExternalStore(M,()=>kt(E),()=>kt(E))},N=w=>{const E=Te.useContext(d)[w],[M,H]=Te.useState(hv(kt,E));return Fa(()=>at(E,I=>{I!==M&&H(dv(I))}),[E,M]),M},A=Te.version.startsWith("18")?_:N;return{Component:T,useEmitter:(w,E)=>{const M=Te.useContext(d)[w];Fa(()=>at(M,E),[E,M])},useEmitterValue:A,usePublisher:x}}Te.createContext(void 0);const uT=Te.createContext(void 0),cT=typeof document<"u"?Te.useLayoutEffect:Te.useEffect;function ed(t){return"self"in t}function aU(t){return"body"in t}function fT(t,e,i,l=Ts,s,a){const c=Te.useRef(null),d=Te.useRef(null),p=Te.useRef(null),h=Te.useCallback(x=>{let _,N,A;const w=x.target;if(aU(w)||ed(w)){const M=ed(w)?w:w.defaultView;A=a?M.scrollX:M.scrollY,_=a?M.document.documentElement.scrollWidth:M.document.documentElement.scrollHeight,N=a?M.innerWidth:M.innerHeight}else A=a?w.scrollLeft:w.scrollTop,_=a?w.scrollWidth:w.scrollHeight,N=a?w.offsetWidth:w.offsetHeight;const E=()=>{t({scrollHeight:_,scrollTop:Math.max(A,0),viewportHeight:N})};x.suppressFlushSync?E():gD.flushSync(E),d.current!==null&&(A===d.current||A<=0||A===_-N)&&(d.current=null,e(!0),p.current&&(clearTimeout(p.current),p.current=null))},[t,e,a]);Te.useEffect(()=>{const x=s||c.current;return l(s||c.current),h({suppressFlushSync:!0,target:x}),x.addEventListener("scroll",h,{passive:!0}),()=>{l(null),x.removeEventListener("scroll",h)}},[c,h,i,l,s]);function y(x){const _=c.current;if(!_||(a?"offsetWidth"in _&&_.offsetWidth===0:"offsetHeight"in _&&_.offsetHeight===0))return;const N=x.behavior==="smooth";let A,w,E;ed(_)?(w=Math.max(hs(_.document.documentElement,a?"width":"height"),a?_.document.documentElement.scrollWidth:_.document.documentElement.scrollHeight),A=a?_.innerWidth:_.innerHeight,E=a?window.scrollX:window.scrollY):(w=_[a?"scrollWidth":"scrollHeight"],A=hs(_,a?"width":"height"),E=_[a?"scrollLeft":"scrollTop"]);const M=w-A;if(x.top=Math.ceil(Math.max(Math.min(M,x.top),0)),tT(A,w)||x.top===E){t({scrollHeight:w,scrollTop:E,viewportHeight:A}),N&&e(!0);return}N?(d.current=x.top,p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{p.current=null,d.current=null,e(!0)},1e3)):d.current=null,a&&(x={behavior:x.behavior,left:x.top}),_.scrollTo(x)}function T(x){a&&(x={behavior:x.behavior,left:x.top}),c.current.scrollBy(x)}return{scrollByCallback:T,scrollerRef:c,scrollToCallback:y}}const td="-webkit-sticky",_v="sticky",lh=sT(()=>{if(typeof document>"u")return _v;const t=document.createElement("div");return t.style.position=td,t.style.position===td?td:_v});function rh(t){return t}const uU=rt(()=>{const t=pe(d=>`Item ${d}`),e=pe(d=>`Group ${d}`),i=pe({}),l=pe(rh),s=pe("div"),a=pe(Ts),c=(d,p=null)=>cn(fe(i,Ce(h=>h[d]),Ct()),p);return{components:i,computeItemKey:l,EmptyPlaceholder:c("EmptyPlaceholder"),FooterComponent:c("Footer"),GroupComponent:c("Group","div"),groupContent:e,HeaderComponent:c("Header"),HeaderFooterTag:s,ItemComponent:c("Item","div"),itemContent:t,ListComponent:c("List","div"),ScrollerComponent:c("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TopItemListComponent:c("TopItemList")}});Et(aT,uU);lh();const cU={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},fU={outline:"none",overflowX:"auto",position:"relative"},dT=t=>({height:"100%",position:"absolute",top:0,width:"100%"});lh();function _o(t,e){if(typeof t!="string")return{context:e}}function dU({useEmitter:t,useEmitterValue:e,usePublisher:i}){return Te.memo(function({children:l,style:s,context:a,...c}){const d=i("scrollContainerState"),p=e("ScrollerComponent"),h=i("smoothScrollTargetReached"),y=e("scrollerRef"),T=e("horizontalDirection")||!1,{scrollByCallback:x,scrollerRef:_,scrollToCallback:N}=fT(d,h,p,y,void 0,T);return t("scrollTo",N),t("scrollBy",x),S.jsx(p,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:_,style:{...T?fU:cU,...s},tabIndex:0,...c,..._o(p,a),children:l})})}function hU({useEmitter:t,useEmitterValue:e,usePublisher:i}){return Te.memo(function({children:l,style:s,context:a,...c}){const d=i("windowScrollContainerState"),p=e("ScrollerComponent"),h=i("smoothScrollTargetReached"),y=e("totalListHeight"),T=e("deviation"),x=e("customScrollParent"),_=Te.useRef(null),N=e("scrollerRef"),{scrollByCallback:A,scrollerRef:w,scrollToCallback:E}=fT(d,h,p,N,x);return cT(()=>{var M;return w.current=x||((M=_.current)==null?void 0:M.ownerDocument.defaultView),()=>{w.current=null}},[w,x]),t("windowScrollTo",E),t("scrollBy",A),S.jsx(p,{ref:_,"data-virtuoso-scroller":!0,style:{position:"relative",...s,...y!==0?{height:y+T}:{}},...c,..._o(p,a),children:l})})}const pU=rt(()=>{const t=pe(h=>S.jsxs("td",{children:["Item $",h]})),e=pe(null),i=pe(h=>S.jsxs("td",{colSpan:1e3,children:["Group ",h]})),l=pe(null),s=pe(null),a=pe({}),c=pe(rh),d=pe(Ts),p=(h,y=null)=>cn(fe(a,Ce(T=>T[h]),Ct()),y);return{components:a,computeItemKey:c,context:e,EmptyPlaceholder:p("EmptyPlaceholder"),FillerRow:p("FillerRow"),fixedFooterContent:s,fixedHeaderContent:l,itemContent:t,groupContent:i,ScrollerComponent:p("Scroller","div"),scrollerRef:d,ScrollSeekPlaceholder:p("ScrollSeekPlaceholder"),TableBodyComponent:p("TableBody","tbody"),TableComponent:p("Table","table"),TableFooterComponent:p("TableFoot","tfoot"),TableHeadComponent:p("TableHead","thead"),TableRowComponent:p("TableRow","tr"),GroupComponent:p("Group","tr")}});Et(aT,pU);lh();const Cv={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},mU={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:Ev,floor:mu,max:is,min:nd,round:wv}=Math;function Av(t,e,i){return Array.from({length:e-t+1}).map((l,s)=>({data:i===null?null:i[s+t],index:s+t}))}function gU(t){return{...mU,items:t}}function Ya(t,e){return t&&t.width===e.width&&t.height===e.height}function yU(t,e){return t&&t.column===e.column&&t.row===e.row}const vU=rt(([{increaseViewportBy:t,listBoundary:e,overscan:i,visibleRange:l},{footerHeight:s,headerHeight:a,scrollBy:c,scrollContainerState:d,scrollTo:p,scrollTop:h,smoothScrollTargetReached:y,viewportHeight:T},x,_,{didMount:N,propsReady:A},{customScrollParent:w,useWindowScroll:E,windowScrollContainerState:M,windowScrollTo:H,windowViewportRect:I},D])=>{const U=pe(0),k=pe(0),F=pe(Cv),P=pe({height:0,width:0}),Y=pe({height:0,width:0}),J=et(),j=et(),de=pe(0),q=pe(null),ie=pe({column:0,row:0}),L=et(),O=et(),oe=pe(!1),ce=pe(0),he=pe(!0),R=pe(!1),B=pe(!1);at(fe(N,Je(ce),ze(([re,ye])=>!!ye)),()=>{Fe(he,!1)}),at(fe(Ot(N,he,Y,P,ce,R),ze(([re,ye,Ve,Ke,,Ye])=>re&&!ye&&Ve.height!==0&&Ke.height!==0&&!Ye)),([,,,,re])=>{Fe(R,!0),th(1,()=>{Fe(J,re)}),ti(fe(h),()=>{Fe(e,[0,0]),Fe(he,!0)})}),be(fe(O,ze(re=>re!=null&&re.scrollTop>0),hi(0)),k),at(fe(N,Je(O),ze(([,re])=>re!=null)),([,re])=>{re&&(Fe(P,re.viewport),Fe(Y,re.item),Fe(ie,re.gap),re.scrollTop>0&&(Fe(oe,!0),ti(fe(h,Qo(1)),ye=>{Fe(oe,!1)}),Fe(p,{top:re.scrollTop})))}),be(fe(P,Ce(({height:re})=>re)),T),be(fe(Ot(He(P,Ya),He(Y,Ya),He(ie,(re,ye)=>re&&re.column===ye.column&&re.row===ye.row),He(h)),Ce(([re,ye,Ve,Ke])=>({gap:Ve,item:ye,scrollTop:Ke,viewport:re}))),L),be(fe(Ot(He(U),l,He(ie,yU),He(Y,Ya),He(P,Ya),He(q),He(k),He(oe),He(he),He(ce)),ze(([,,,,,,,re])=>!re),Ce(([re,[ye,Ve],Ke,Ye,zt,wt,Gt,,sn,Ft])=>{const{column:Yt,row:jt}=Ke,{height:en,width:fn}=Ye,{width:Fi}=zt;if(Gt===0&&(re===0||Fi===0))return Cv;if(fn===0){const Se=nh(Ft,re),Ge=Se+Math.max(Gt-1,0);return gU(Av(Se,Ge,wt))}const $n=hT(Fi,fn,Yt);let At,ve;sn?ye===0&&Ve===0&&Gt>0?(At=0,ve=Gt-1):(At=$n*mu((ye+jt)/(en+jt)),ve=$n*Ev((Ve+jt)/(en+jt))-1,ve=nd(re-1,is(ve,$n-1)),At=nd(ve,is(0,At))):(At=0,ve=-1);const Ne=Av(At,ve,wt),{bottom:we,top:nt}=Nv(zt,Ke,Ye,Ne),Z=Ev(re/$n),ue=Z*en+(Z-1)*jt-we;return{bottom:we,itemHeight:en,items:Ne,itemWidth:fn,offsetBottom:ue,offsetTop:nt,top:nt}})),F),be(fe(q,ze(re=>re!==null),Ce(re=>re.length)),U),be(fe(Ot(P,Y,F,ie),ze(([re,ye,{items:Ve}])=>Ve.length>0&&ye.height!==0&&re.height!==0),Ce(([re,ye,{items:Ve},Ke])=>{const{bottom:Ye,top:zt}=Nv(re,Ke,ye,Ve);return[zt,Ye]}),Ct(ds)),e);const ee=pe(!1);be(fe(h,Je(ee),Ce(([re,ye])=>ye||re!==0)),ee);const ae=Ln(fe(Ot(F,U),ze(([{items:re}])=>re.length>0),Je(ee),ze(([[re,ye],Ve])=>{const Ke=re.items[re.items.length-1].index===ye-1;return(Ve||re.bottom>0&&re.itemHeight>0&&re.offsetBottom===0&&re.items.length===ye)&&Ke}),Ce(([[,re]])=>re-1),Ct())),te=Ln(fe(He(F),ze(({items:re})=>re.length>0&&re[0].index===0),hi(0),Ct())),me=Ln(fe(He(F),Je(oe),ze(([{items:re},ye])=>re.length>0&&!ye),Ce(([{items:re}])=>({endIndex:re[re.length-1].index,startIndex:re[0].index})),Ct($x),qi(0)));be(me,_.scrollSeekRangeChanged),be(fe(J,Je(P,Y,U,ie),Ce(([re,ye,Ve,Ke,Ye])=>{const zt=eT(re),{align:wt,behavior:Gt,offset:sn}=zt;let Ft=zt.index;Ft==="LAST"&&(Ft=Ke-1),Ft=is(0,Ft,nd(Ke-1,Ft));let Yt=Ad(ye,Ye,Ve,Ft);return wt==="end"?Yt=wv(Yt-ye.height+Ve.height):wt==="center"&&(Yt=wv(Yt-ye.height/2+Ve.height/2)),sn&&(Yt+=sn),{behavior:Gt,top:Yt}})),p);const xe=cn(fe(F,Ce(re=>re.offsetBottom+re.bottom)),0);return be(fe(I,Ce(re=>({height:re.visibleHeight,width:re.visibleWidth}))),P),{customScrollParent:w,data:q,deviation:de,footerHeight:s,gap:ie,headerHeight:a,increaseViewportBy:t,initialItemCount:k,itemDimensions:Y,overscan:i,restoreStateFrom:O,scrollBy:c,scrollContainerState:d,scrollHeight:j,scrollTo:p,scrollToIndex:J,scrollTop:h,smoothScrollTargetReached:y,totalCount:U,useWindowScroll:E,viewportDimensions:P,windowScrollContainerState:M,windowScrollTo:H,windowViewportRect:I,..._,gridState:F,horizontalDirection:B,initialTopMostItemIndex:ce,totalListHeight:xe,...x,endReached:ae,propsReady:A,rangeChanged:me,startReached:te,stateChanged:L,stateRestoreInProgress:oe,...D}},Et(ih,gn,Cs,rT,Ao,oh,wo));function hT(t,e,i){return is(1,mu((t+i)/(mu(e)+i)))}function Nv(t,e,i,l){const{height:s}=i;if(s===void 0||l.length===0)return{bottom:0,top:0};const a=Ad(t,e,i,l[0].index);return{bottom:Ad(t,e,i,l[l.length-1].index)+s,top:a}}function Ad(t,e,i,l){const s=hT(t.width,i.width,e.column),a=mu(l/s),c=a*i.height+is(0,a-1)*e.row;return c>0?c+e.row:c}const xU=rt(()=>{const t=pe(T=>`Item ${T}`),e=pe({}),i=pe(null),l=pe("virtuoso-grid-item"),s=pe("virtuoso-grid-list"),a=pe(rh),c=pe("div"),d=pe(Ts),p=(T,x=null)=>cn(fe(e,Ce(_=>_[T]),Ct()),x),h=pe(!1),y=pe(!1);return be(He(y),h),{components:e,computeItemKey:a,context:i,FooterComponent:p("Footer"),HeaderComponent:p("Header"),headerFooterTag:c,itemClassName:l,ItemComponent:p("Item","div"),itemContent:t,listClassName:s,ListComponent:p("List","div"),readyStateChanged:h,reportReadyState:y,ScrollerComponent:p("Scroller","div"),scrollerRef:d,ScrollSeekPlaceholder:p("ScrollSeekPlaceholder","div")}}),TU=rt(([t,e])=>({...t,...e}),Et(vU,xU)),SU=Te.memo(function(){const t=Mt("gridState"),e=Mt("listClassName"),i=Mt("itemClassName"),l=Mt("itemContent"),s=Mt("computeItemKey"),a=Mt("isSeeking"),c=Jn("scrollHeight"),d=Mt("ItemComponent"),p=Mt("ListComponent"),h=Mt("ScrollSeekPlaceholder"),y=Mt("context"),T=Jn("itemDimensions"),x=Jn("gap"),_=Mt("log"),N=Mt("stateRestoreInProgress"),A=Jn("reportReadyState"),w=Nu(Te.useMemo(()=>E=>{const M=E.parentElement.parentElement.scrollHeight;c(M);const H=E.firstChild;if(H){const{height:I,width:D}=H.getBoundingClientRect();T({height:I,width:D})}x({column:bv("column-gap",getComputedStyle(E).columnGap,_),row:bv("row-gap",getComputedStyle(E).rowGap,_)})},[c,T,x,_]),!0,!1);return cT(()=>{t.itemHeight>0&&t.itemWidth>0&&A(!0)},[t]),N?null:S.jsx(p,{className:e,ref:w,..._o(p,y),"data-testid":"virtuoso-item-list",style:{paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},children:t.items.map(E=>{const M=s(E.index,E.data,y);return a?S.jsx(h,{..._o(h,y),height:t.itemHeight,index:E.index,width:t.itemWidth},M):Q.createElement(d,{..._o(d,y),className:i,"data-index":E.index,key:M},l(E.index,E.data,y))})})}),_U=Te.memo(function(){const t=Mt("HeaderComponent"),e=Jn("headerHeight"),i=Mt("headerFooterTag"),l=Nu(Te.useMemo(()=>a=>{e(hs(a,"height"))},[e]),!0,!1),s=Mt("context");return t?S.jsx(i,{ref:l,children:S.jsx(t,{..._o(t,s)})}):null}),CU=Te.memo(function(){const t=Mt("FooterComponent"),e=Jn("footerHeight"),i=Mt("headerFooterTag"),l=Nu(Te.useMemo(()=>a=>{e(hs(a,"height"))},[e]),!0,!1),s=Mt("context");return t?S.jsx(i,{ref:l,children:S.jsx(t,{..._o(t,s)})}):null}),EU=({children:t})=>{const e=Te.useContext(uT),i=Jn("itemDimensions"),l=Jn("viewportDimensions"),s=Nu(Te.useMemo(()=>a=>{l(a.getBoundingClientRect())},[l]),!0,!1);return Te.useEffect(()=>{e&&(l({height:e.viewportHeight,width:e.viewportWidth}),i({height:e.itemHeight,width:e.itemWidth}))},[e,l,i]),S.jsx("div",{ref:s,style:dT(),children:t})},wU=({children:t})=>{const e=Te.useContext(uT),i=Jn("windowViewportRect"),l=Jn("itemDimensions"),s=Mt("customScrollParent"),a=bD(i,s,!1);return Te.useEffect(()=>{e&&(l({height:e.itemHeight,width:e.itemWidth}),i({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,i,l]),S.jsx("div",{ref:a,style:dT(),children:t})},AU=Te.memo(function({...t}){const e=Mt("useWindowScroll"),i=Mt("customScrollParent"),l=i||e?MU:bU,s=i||e?wU:EU,a=Mt("context");return S.jsx(l,{...t,..._o(l,a),children:S.jsxs(s,{children:[S.jsx(_U,{}),S.jsx(SU,{}),S.jsx(CU,{})]})})}),{Component:NU,useEmitter:pT,useEmitterValue:Mt,usePublisher:Jn}=sU(TU,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},AU),bU=dU({useEmitter:pT,useEmitterValue:Mt,usePublisher:Jn}),MU=hU({useEmitter:pT,useEmitterValue:Mt,usePublisher:Jn});function bv(t,e,i){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&i(`${t} was not resolved to pixel value correctly`,e,Xn.WARN),e==="normal"?0:parseInt(e??"0",10)}const mT=NU,RU=t=>t?t.startsWith("http")||t.startsWith("data:")?t:`/CR_PLAN/${t}`.replace(/\/+/g,"/"):"",IU=({characters:t,onCharacterClick:e,allTags:i,onAddNewCharacter:l,tagCategories:s})=>{const[a,c]=Q.useState(""),[d,p]=Q.useState(!1),[h,y]=Q.useState([]),T=Q.useMemo(()=>i.filter(N=>h.includes(N.id)),[i,h]),x=Q.useMemo(()=>{let N=t;return a&&(N=N.filter(A=>{var w;return A.name.toLowerCase().includes(a.toLowerCase())||((w=A.notes)==null?void 0:w.toLowerCase().includes(a.toLowerCase()))})),h.length>0&&(N=N.filter(A=>h.every(w=>A.tagIds.includes(w)))),N},[t,a,h]),_=N=>{y(A=>A.filter(w=>w!==N))};return S.jsxs("div",{className:"h-full w-full bg-gray-900 flex flex-col",children:[S.jsxs("div",{className:"p-8 border-b border-gray-700 flex-shrink-0",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-white",children:""}),S.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md transition-colors shadow-lg shadow-indigo-500/30",children:[S.jsx(Su,{className:"w-5 h-5"}),S.jsx("span",{children:""})]})]}),S.jsxs("div",{className:"flex gap-4",children:[S.jsxs("div",{className:"relative flex-grow",children:[S.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),S.jsx("input",{type:"text",placeholder:"...",value:a,onChange:N=>c(N.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-md text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),S.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-800 border border-gray-700 rounded-md text-white hover:bg-gray-700 transition-colors whitespace-nowrap",children:[S.jsx(er,{className:"w-5 h-5"}),S.jsx("span",{children:h.length>0?` ${h.length}  Tag`:" Tag"})]})]}),T.length>0&&S.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:T.map(N=>S.jsxs("div",{className:"flex items-center text-xs font-medium pl-2 pr-1 py-0.5 rounded-full",style:{backgroundColor:N.color},children:[S.jsx("span",{className:"text-white",children:N.label}),S.jsx("button",{onClick:()=>_(N.id),className:"ml-1 text-white/70 hover:text-white",children:S.jsx(oi,{className:"w-3 h-3"})})]},N.id))})]}),S.jsx("div",{className:"flex-grow p-4 overflow-hidden",children:x.length>0?S.jsx(mT,{style:{height:"100%"},totalCount:x.length,components:{List:Q.forwardRef(({style:N,children:A,...w},E)=>S.jsx("div",{ref:E,...w,style:N,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-4",children:A})),Item:Q.forwardRef(({children:N,...A},w)=>S.jsx("div",{...A,ref:w,className:"h-full",children:N}))},itemContent:N=>{const A=x[N],w=i.filter(E=>A.tagIds.includes(E.id));return S.jsxs("div",{onClick:()=>e(A),className:"bg-gray-800 rounded-lg overflow-hidden cursor-pointer group transform hover:-translate-y-1 transition-transform duration-200 shadow-lg hover:shadow-indigo-500/30 border border-gray-700 flex flex-col h-[400px]",style:{contentVisibility:"auto",containIntrinsicSize:"400px"},children:[S.jsxs("div",{className:"w-full flex-grow bg-gray-700 relative overflow-hidden",children:[S.jsx("img",{src:RU(A.image)||`https://api.dicebear.com/7.x/pixel-art/svg?seed=${encodeURIComponent(A.name)}`,alt:A.name,className:"w-full h-full object-cover object-top transition-transform duration-500 group-hover:scale-110",style:{imageRendering:"auto"},loading:"lazy"}),S.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:S.jsx("h3",{className:"text-lg font-bold text-white truncate drop-shadow-lg",children:A.name})})]}),S.jsx("div",{className:"px-2 py-1.5 bg-gray-800/95",children:S.jsx("div",{className:"overflow-hidden",children:w.length>0?S.jsxs("div",{className:"flex flex-wrap gap-1",children:[w.slice(0,3).map(E=>S.jsx("span",{className:"text-xs font-medium px-1.5 py-0.5 rounded-full whitespace-nowrap",style:{backgroundColor:E.color,color:"#fff"},children:E.label},E.id)),w.length>3&&S.jsxs("span",{className:"text-xs text-gray-400 self-center",children:["+",w.length-3]})]}):S.jsx("span",{className:"text-xs text-gray-600 italic",children:""})})})]})}}):S.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[S.jsx("p",{className:"text-xl",children:""}),S.jsx("p",{className:"mt-2",children:" Tag"})]})}),S.jsx(Qd,{isOpen:d,onClose:()=>p(!1),tagCategories:s,selectedTagIds:h,onApply:y})]})};async function DU(t){const e="PLACEHOLDER_API_KEY",i=new Gd({apiKey:e});try{const s=(await i.models.generateContent({model:"gemini-2.5-flash",contents:` (tag)


${t}`,config:{responseMimeType:"application/json",responseSchema:{type:_t.OBJECT,properties:{tags:{type:_t.ARRAY,description:"",items:{type:_t.STRING,description:""}}},required:["tags"]}}})).text;if(!s)throw new Error("API ");const a=s.replace(/^```json\n?/,"").replace(/```$/,"");return JSON.parse(a).tags}catch(l){throw console.error("Error extracting tags with Gemini API:",l),l instanceof Error&&(l.message.includes("API key not valid")||l.message.includes("invalid"))?new Error(" Google Gemini API Key "):new Error(" Gemini ")}}async function UU(t,e){const i="PLACEHOLDER_API_KEY",l=new Gd({apiKey:i}),s=t.match(/^data:(.*);base64,(.*)$/);if(!s)throw new Error("");const a=s[1],d={inlineData:{data:s[2],mimeType:a}},h=` ()


${JSON.stringify(e.map(y=>({category:y.name,tags:y.tags.map(T=>T.label)})))}


 JSON `;try{const T=(await l.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[d,{text:h}]},config:{responseMimeType:"application/json",responseSchema:{type:_t.OBJECT,properties:{existingTags:{type:_t.ARRAY,description:" (label) ",items:{type:_t.STRING}},newTagSuggestions:{type:_t.ARRAY,description:" ()",items:{type:_t.STRING}}},required:["existingTags","newTagSuggestions"]}}})).text;if(!T)throw new Error("API ");const x=T.replace(/^```json\n?/,"").replace(/```$/,"");return JSON.parse(x)}catch(y){throw console.error("Error suggesting tags with Gemini API:",y),y instanceof Error&&(y.message.includes("API key not valid")||y.message.includes("invalid"))?new Error(" Google Gemini API Key "):new Error(" Gemini ")}}const Mv=["#3b82f6","#ef4444","#f97316","#10b981","#8b5cf6","#06b6d4","#d946ef","#64748b"],LU=({isOpen:t,onClose:e,categories:i,onSave:l})=>{const[s,a]=Q.useState([]),[c,d]=Q.useState(null),p=Q.useRef(null),h=Q.useRef(null);if(Q.useEffect(()=>{t&&(a(JSON.parse(JSON.stringify(i))),d(null))},[t,i]),!t)return null;const y=(A,w,E)=>{a(M=>M.map(H=>H.id===A?{...H,[w]:E}:H))},T=()=>{const A=Mv[s.length%Mv.length],w={id:Ue(),name:"",color:A,tags:[],selectionMode:"multiple"};a(E=>[...E,w])},x=A=>{c===A?(a(w=>w.filter(E=>E.id!==A)),d(null)):(d(A),setTimeout(()=>{d(w=>w===A?null:w)},3e3))},_=()=>{if(p.current===null||h.current===null)return;const A=[...s],w=A.splice(p.current,1)[0];A.splice(h.current,0,w),p.current=null,h.current=null,a(A)},N=()=>{l(s),e()};return S.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:S.jsxs("div",{className:"bg-gray-800 text-white rounded-lg shadow-xl w-full max-w-2xl p-6 relative flex flex-col max-h-[80vh]",onClick:A=>A.stopPropagation(),children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:S.jsx(oi,{className:"w-6 h-6"})}),S.jsxs("div",{className:"flex justify-between items-center mb-4 pr-10",children:[S.jsx("h2",{className:"text-2xl font-bold text-indigo-400",children:""}),S.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors text-sm",children:[S.jsx(Su,{className:"w-4 h-4"}),S.jsx("span",{children:""})]})]}),S.jsxs("div",{className:"overflow-y-auto pr-2 -mr-2 space-y-3 flex-grow",children:[s.map((A,w)=>S.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-700 rounded-md",draggable:!0,onDragStart:()=>p.current=w,onDragEnter:()=>h.current=w,onDragEnd:_,onDragOver:E=>E.preventDefault(),children:[S.jsx("span",{className:"cursor-grab text-gray-500",title:"",children:S.jsx(_b,{className:"w-5 h-5"})}),S.jsx("input",{type:"color",value:A.color,onChange:E=>y(A.id,"color",E.target.value),className:"p-0 h-8 w-8 block bg-transparent border-none cursor-pointer rounded-md"}),S.jsx("input",{type:"text",value:A.name,onChange:E=>y(A.id,"name",E.target.value),className:"flex-grow p-2 bg-gray-800 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"}),S.jsxs("select",{value:A.selectionMode||"multiple",onChange:E=>y(A.id,"selectionMode",E.target.value),className:"p-2 bg-gray-800 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 text-sm",title:"",children:[S.jsx("option",{value:"multiple",children:""}),S.jsx("option",{value:"single",children:""})]}),S.jsx("button",{onClick:()=>x(A.id),className:`transition-colors text-sm font-bold p-1 rounded ${c===A.id?"bg-red-600 text-white px-2":"text-gray-400 hover:text-red-400"}`,title:"",children:c===A.id?"":S.jsx(os,{className:"w-5 h-5"})})]},A.id)),s.length===0&&S.jsx("div",{className:"text-center py-10 text-gray-500",children:S.jsx("p",{children:""})})]}),S.jsxs("div",{className:"flex justify-end items-center gap-4 mt-6 pt-4 border-t border-gray-700",children:[S.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors duration-200",children:""}),S.jsx("button",{onClick:N,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors duration-200",children:""})]})]})})},HU=({tagCategories:t,onUpdate:e})=>{const[i,l]=Q.useState({}),[s,a]=Q.useState(!1),[c,d]=Q.useState(null),[p,h]=Q.useState(""),[y,T]=Q.useState(!1),[x,_]=Q.useState(null),[N,A]=Q.useState(null),w=I=>{var U;const D=(U=i[I])==null?void 0:U.trim();if(D){const k={id:Ue(),label:D},F=t.map(P=>P.id===I?{...P,tags:[...P.tags,k]}:P);e(F),l(P=>({...P,[I]:""}))}},E=(I,D)=>{const U=t.map(k=>k.id===I?{...k,tags:k.tags.filter(F=>F.id!==D)}:k);e(U)},M=I=>{if(c===I){const D=t.filter(U=>U.id!==I);e(D),d(null)}else d(I),setTimeout(()=>{d(D=>D===I?null:D)},3e3)},H=async()=>{if(!p.trim()||!N){_("");return}T(!0),_(null);try{const I=await DU(p),D=t.map(U=>{if(U.id===N){const k=new Set(U.tags.map(P=>P.label.toLowerCase())),F=I.filter(P=>!k.has(P.toLowerCase())).map(P=>({id:Ue(),label:P}));return{...U,tags:[...U.tags,...F]}}return U});e(D),h(""),A(null)}catch(I){I instanceof Error?_(I.message):_("")}finally{T(!1)}};return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"h-full w-full bg-gray-900 flex flex-col p-8",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-white",children:" Tag"}),S.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md font-semibold transition-colors text-sm",title:"",children:[S.jsx(Sb,{className:"w-5 h-5"}),S.jsx("span",{children:""})]})]}),S.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 mb-8",children:[S.jsxs("h2",{className:"text-xl font-semibold mb-3 text-indigo-400 flex items-center gap-2",children:[S.jsx(ax,{className:"w-5 h-5"}),"  AI  Tag ()"]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S.jsx("textarea",{value:p,onChange:I=>h(I.target.value),className:"w-full h-24 p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none transition md:col-span-2",placeholder:" Tag, , ...",disabled:y}),S.jsxs("div",{className:"flex flex-col gap-2",children:[S.jsxs("select",{value:N||"",onChange:I=>A(I.target.value),className:"w-full p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none transition",disabled:y||t.length===0,children:[S.jsx("option",{value:"",children:"..."}),t.map(I=>S.jsx("option",{value:I.id,children:I.name},I.id))]}),S.jsx("button",{onClick:H,disabled:y||!p.trim()||!N,className:"w-full py-2 px-4 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-500 disabled:cursor-not-allowed rounded-md font-semibold transition-colors duration-200",children:y?"...":" Tag"})]})]}),x&&S.jsx("p",{className:"text-red-400 text-sm mt-2",children:x})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-6",children:[t.map(I=>S.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[S.jsxs("div",{className:"flex justify-between items-center mb-3",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:I.color}}),S.jsx("h3",{className:"font-bold text-xl text-white",children:I.name})]}),S.jsx("div",{className:"flex items-center gap-2",children:S.jsx("button",{onClick:()=>M(I.id),className:`transition-colors text-sm font-bold p-1 rounded ${c===I.id?"bg-red-600 text-white px-2":"text-gray-400 hover:text-red-400"}`,title:"",children:c===I.id?"":S.jsx(os,{className:"w-5 h-5"})})})]}),S.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 min-h-[2.25rem] items-center",children:[I.tags.map(D=>S.jsxs("div",{className:"flex items-center text-sm font-medium pl-3 pr-1 py-1 rounded-full",style:{backgroundColor:I.color},children:[S.jsx("span",{className:"text-white",children:D.label}),S.jsx("button",{onClick:()=>E(I.id,D.id),className:"ml-1 text-white/70 hover:text-white",children:S.jsx(oi,{className:"w-4 h-4"})})]},D.id)),I.tags.length===0&&S.jsx("p",{className:"text-sm text-gray-500 px-2",children:" Tag"})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("input",{type:"text",placeholder:" Tag...",value:i[I.id]||"",onChange:D=>l(U=>({...U,[I.id]:D.target.value})),onKeyPress:D=>D.key==="Enter"&&w(I.id),className:"flex-grow p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"}),S.jsx("button",{onClick:()=>w(I.id),className:"px-3 py-2 bg-gray-600 hover:bg-gray-500 rounded-md font-semibold text-sm",children:""})]})]},I.id)),t.length===0&&S.jsxs("div",{className:"text-center py-10 text-gray-500",children:[S.jsx("p",{className:"text-lg",children:" Tag "}),S.jsx("p",{children:""})]})]})]}),S.jsx(LU,{isOpen:s,onClose:()=>a(!1),categories:t,onSave:e})]})},Nd=({isOpen:t,onClose:e,tagCategories:i,selectedTagIds:l,onSave:s,enableAiSuggestions:a,image:c,onAddTagToCategory:d})=>{const[p,h]=Q.useState(""),[y,T]=Q.useState(new Set),[x,_]=Q.useState({}),[N,A]=Q.useState(!1),[w,E]=Q.useState(null),[M,H]=Q.useState(null);Q.useEffect(()=>{if(t){T(new Set(l)),h(""),H(null),E(null);const J={};i.forEach(j=>{J[j.id]=!0}),_(J)}},[t,l,i]);const I=Q.useMemo(()=>{const J=new Map;return i.forEach(j=>{j.tags.forEach(de=>{J.set(de.label.toLowerCase(),{...de,categoryName:j.name,color:j.color})})}),J},[i]),D=Q.useMemo(()=>p.trim()?i.map(J=>({...J,tags:J.tags.filter(j=>j.label.toLowerCase().includes(p.toLowerCase()))})).filter(J=>J.tags.length>0):i,[i,p]),U=async()=>{if(c){A(!0),E(null),H(null);try{const J=await UU(c.imageDataUrl,i);H(J)}catch(J){J instanceof Error?E(J.message):E("")}finally{A(!1)}}},k=J=>{_(j=>({...j,[J]:!j[J]}))},F=J=>{T(j=>{const de=new Set(j);return de.has(J)?de.delete(J):de.add(J),de})},P=(J,j)=>{var de;if(d){const q=i.find(L=>L.name==="")?"":((de=i[0])==null?void 0:de.name)||"",ie=d(J,q);ie&&(F(ie.id),H(L=>L?{...L,newTagSuggestions:L.newTagSuggestions.filter(O=>O!==J)}:null))}},Y=()=>{s(Array.from(y)),e()};return t?S.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:S.jsxs("div",{className:"bg-gray-800 text-white rounded-lg shadow-xl w-full max-w-2xl p-6 relative flex flex-col max-h-[80vh]",onClick:J=>J.stopPropagation(),children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:S.jsx(oi,{className:"w-6 h-6"})}),S.jsx("h2",{className:"text-2xl font-bold mb-4 text-indigo-400",children:" Tag"}),S.jsxs("div",{className:"relative mb-4",children:[S.jsx(gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",placeholder:" Tag...",value:p,onChange:J=>h(J.target.value),className:"w-full p-2 pl-10 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),a&&c&&d&&S.jsxs("div",{className:"mb-4 p-4 bg-gray-900/50 rounded-lg border border-gray-700",children:[S.jsxs("button",{onClick:U,disabled:N,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-500 rounded-md font-semibold transition-colors text-sm",children:[S.jsx(ax,{className:"w-5 h-5"}),S.jsx("span",{children:N?"...":"AI  Tag"})]}),w&&S.jsx("p",{className:"text-red-400 text-xs mt-2",children:w}),M&&S.jsxs("div",{className:"mt-3 text-sm",children:[S.jsx("p",{className:"font-semibold text-gray-300 mb-2",children:":"}),S.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.existingTags.map(J=>{const j=I.get(J.toLowerCase());if(!j)return null;const de=y.has(j.id);return S.jsx("button",{onClick:()=>F(j.id),className:`text-xs font-medium px-2 py-1 rounded-full border transition-colors ${de?"border-transparent text-white":"border-gray-500 text-gray-300 hover:border-white"}`,style:{backgroundColor:de?j.color:"transparent"},children:j.label},`sug-exist-${j.id}`)}),M.newTagSuggestions.map(J=>S.jsxs("button",{onClick:()=>P(J),className:"flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-full border border-dashed border-emerald-500 text-emerald-300 hover:bg-emerald-500/20 transition-colors",children:[S.jsx(Su,{className:"w-3 h-3"})," ",J," ()"]},`sug-new-${J}`))]})]})]}),S.jsx("div",{className:"overflow-y-auto pr-2 -mr-2 space-y-2 flex-grow border-t border-b border-gray-700 py-4",children:i.length>0?D.map(J=>S.jsxs("div",{children:[S.jsxs("button",{onClick:()=>k(J.id),className:"w-full flex items-center justify-between p-2 rounded-md hover:bg-gray-700/50 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:J.color}}),S.jsx("h3",{className:"font-semibold",children:J.name})]}),S.jsx(qd,{className:`w-5 h-5 text-gray-400 transition-transform ${x[J.id]?"rotate-180":""}`})]}),x[J.id]&&S.jsx("div",{className:"pt-2 pl-4 space-y-1",children:J.tags.map(j=>{const de=y.has(j.id);return S.jsxs("label",{className:"flex items-center gap-3 p-1.5 rounded-md cursor-pointer hover:bg-gray-700/50",children:[S.jsx("input",{type:"checkbox",checked:de,onChange:()=>F(j.id),className:"w-5 h-5 rounded bg-gray-900 border-gray-500 text-indigo-500 focus:ring-2 focus:ring-indigo-600 focus:ring-offset-gray-800 cursor-pointer",style:{accentColor:J.color}}),S.jsx("span",{className:"font-medium select-none",children:j.label})]},j.id)})})]},J.id)):S.jsxs("div",{className:"text-center py-10 text-gray-500",children:[S.jsx("p",{className:"text-lg",children:" Tag"}),S.jsx("p",{children:" Tag"})]})}),S.jsxs("div",{className:"flex justify-end items-center gap-4 mt-6 pt-4 border-t border-gray-700",children:[S.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors duration-200",children:""}),S.jsx("button",{onClick:Y,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors duration-200",children:""})]})]})}):null};var kU=Object.defineProperty,zU=(t,e,i)=>e in t?kU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,bt=(t,e,i)=>zU(t,typeof e!="symbol"?e+"":e,i);const gu={x:0,y:0,width:0,height:0,unit:"px"},Pl=(t,e,i)=>Math.min(Math.max(t,e),i),GU=(...t)=>t.filter(e=>e&&typeof e=="string").join(" "),Rv=(t,e)=>t===e||t.width===e.width&&t.height===e.height&&t.x===e.x&&t.y===e.y&&t.unit===e.unit;function qU(t,e,i,l){const s=di(t,i,l);return t.width&&(s.height=s.width/e),t.height&&(s.width=s.height*e),s.y+s.height>l&&(s.height=l-s.y,s.width=s.height*e),s.x+s.width>i&&(s.width=i-s.x,s.height=s.width/e),t.unit==="%"?To(s,i,l):s}function PU(t,e,i){const l=di(t,e,i);return l.x=(e-l.width)/2,l.y=(i-l.height)/2,t.unit==="%"?To(l,e,i):l}function To(t,e,i){return t.unit==="%"?{...gu,...t,unit:"%"}:{unit:"%",x:t.x?t.x/e*100:0,y:t.y?t.y/i*100:0,width:t.width?t.width/e*100:0,height:t.height?t.height/i*100:0}}function di(t,e,i){return t.unit?t.unit==="px"?{...gu,...t,unit:"px"}:{unit:"px",x:t.x?t.x*e/100:0,y:t.y?t.y*i/100:0,width:t.width?t.width*e/100:0,height:t.height?t.height*i/100:0}:{...gu,...t,unit:"px"}}function Iv(t,e,i,l,s,a=0,c=0,d=l,p=s){const h={...t};let y=Math.min(a,l),T=Math.min(c,s),x=Math.min(d,l),_=Math.min(p,s);e&&(e>1?(y=c?c*e:y,T=y/e,x=d*e):(T=a?a/e:T,y=T*e,_=p/e)),h.y<0&&(h.height=Math.max(h.height+h.y,T),h.y=0),h.x<0&&(h.width=Math.max(h.width+h.x,y),h.x=0);const N=l-(h.x+h.width);N<0&&(h.x=Math.min(h.x,l-y),h.width+=N);const A=s-(h.y+h.height);if(A<0&&(h.y=Math.min(h.y,s-T),h.height+=A),h.width<y&&((i==="sw"||i=="nw")&&(h.x-=y-h.width),h.width=y),h.height<T&&((i==="nw"||i=="ne")&&(h.y-=T-h.height),h.height=T),h.width>x&&((i==="sw"||i=="nw")&&(h.x-=x-h.width),h.width=x),h.height>_&&((i==="nw"||i=="ne")&&(h.y-=_-h.height),h.height=_),e){const w=h.width/h.height;if(w<e){const E=Math.max(h.width/e,T);(i==="nw"||i=="ne")&&(h.y-=E-h.height),h.height=E}else if(w>e){const E=Math.max(h.height*e,y);(i==="sw"||i=="nw")&&(h.x-=E-h.width),h.width=E}}return h}function BU(t,e,i,l){const s={...t};return e==="ArrowLeft"?l==="nw"?(s.x-=i,s.y-=i,s.width+=i,s.height+=i):l==="w"?(s.x-=i,s.width+=i):l==="sw"?(s.x-=i,s.width+=i,s.height+=i):l==="ne"?(s.y+=i,s.width-=i,s.height-=i):l==="e"?s.width-=i:l==="se"&&(s.width-=i,s.height-=i):e==="ArrowRight"&&(l==="nw"?(s.x+=i,s.y+=i,s.width-=i,s.height-=i):l==="w"?(s.x+=i,s.width-=i):l==="sw"?(s.x+=i,s.width-=i,s.height-=i):l==="ne"?(s.y-=i,s.width+=i,s.height+=i):l==="e"?s.width+=i:l==="se"&&(s.width+=i,s.height+=i)),e==="ArrowUp"?l==="nw"?(s.x-=i,s.y-=i,s.width+=i,s.height+=i):l==="n"?(s.y-=i,s.height+=i):l==="ne"?(s.y-=i,s.width+=i,s.height+=i):l==="sw"?(s.x+=i,s.width-=i,s.height-=i):l==="s"?s.height-=i:l==="se"&&(s.width-=i,s.height-=i):e==="ArrowDown"&&(l==="nw"?(s.x+=i,s.y+=i,s.width-=i,s.height-=i):l==="n"?(s.y+=i,s.height-=i):l==="ne"?(s.y+=i,s.width-=i,s.height-=i):l==="sw"?(s.x-=i,s.width+=i,s.height+=i):l==="s"?s.height+=i:l==="se"&&(s.width+=i,s.height+=i)),s}const Bl={capture:!0,passive:!1};let VU=0;const vo=class jn extends Q.PureComponent{constructor(){super(...arguments),bt(this,"docMoveBound",!1),bt(this,"mouseDownOnCrop",!1),bt(this,"dragStarted",!1),bt(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),bt(this,"componentRef",Q.createRef()),bt(this,"mediaRef",Q.createRef()),bt(this,"resizeObserver"),bt(this,"initChangeCalled",!1),bt(this,"instanceId",`rc-${VU++}`),bt(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),bt(this,"onCropPointerDown",e=>{const{crop:i,disabled:l}=this.props,s=this.getBox();if(!i)return;const a=di(i,s.width,s.height);if(l)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const c=e.target.dataset.ord,d=!!c;let p=e.clientX,h=e.clientY,y=a.x,T=a.y;if(c){const x=e.clientX-s.x,_=e.clientY-s.y;let N=0,A=0;c==="ne"||c=="e"?(N=x-(a.x+a.width),A=_-a.y,y=a.x,T=a.y+a.height):c==="se"||c==="s"?(N=x-(a.x+a.width),A=_-(a.y+a.height),y=a.x,T=a.y):c==="sw"||c=="w"?(N=x-a.x,A=_-(a.y+a.height),y=a.x+a.width,T=a.y):(c==="nw"||c=="n")&&(N=x-a.x,A=_-a.y,y=a.x+a.width,T=a.y+a.height),p=y+s.x+N,h=T+s.y+A}this.evData={startClientX:p,startClientY:h,startCropX:y,startCropY:T,clientX:e.clientX,clientY:e.clientY,isResize:d,ord:c},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),bt(this,"onComponentPointerDown",e=>{const{crop:i,disabled:l,locked:s,keepSelection:a,onChange:c}=this.props,d=this.getBox();if(l||s||a&&i)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const p=e.clientX-d.x,h=e.clientY-d.y,y={unit:"px",x:p,y:h,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:p,startCropY:h,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,c(di(y,d.width,d.height),To(y,d.width,d.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),bt(this,"onDocPointerMove",e=>{const{crop:i,disabled:l,onChange:s,onDragStart:a}=this.props,c=this.getBox();if(l||!i||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,a&&a(e));const{evData:d}=this;d.clientX=e.clientX,d.clientY=e.clientY;let p;d.isResize?p=this.resizeCrop():p=this.dragCrop(),Rv(i,p)||s(di(p,c.width,c.height),To(p,c.width,c.height))}),bt(this,"onComponentKeyDown",e=>{const{crop:i,disabled:l,onChange:s,onComplete:a}=this.props;if(l)return;const c=e.key;let d=!1;if(!i)return;const p=this.getBox(),h=this.makePixelCrop(p),y=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?jn.nudgeStepLarge:e.shiftKey?jn.nudgeStepMedium:jn.nudgeStep;if(c==="ArrowLeft"?(h.x-=y,d=!0):c==="ArrowRight"?(h.x+=y,d=!0):c==="ArrowUp"?(h.y-=y,d=!0):c==="ArrowDown"&&(h.y+=y,d=!0),d){e.cancelable&&e.preventDefault(),h.x=Pl(h.x,0,p.width-h.width),h.y=Pl(h.y,0,p.height-h.height);const T=di(h,p.width,p.height),x=To(h,p.width,p.height);s(T,x),a&&a(T,x)}}),bt(this,"onHandlerKeyDown",(e,i)=>{const{aspect:l=0,crop:s,disabled:a,minWidth:c=0,minHeight:d=0,maxWidth:p,maxHeight:h,onChange:y,onComplete:T}=this.props,x=this.getBox();if(a||!s)return;if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight")e.stopPropagation(),e.preventDefault();else return;const _=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?jn.nudgeStepLarge:e.shiftKey?jn.nudgeStepMedium:jn.nudgeStep,N=di(s,x.width,x.height),A=BU(N,e.key,_,i),w=Iv(A,l,i,x.width,x.height,c,d,p,h);if(!Rv(s,w)){const E=To(w,x.width,x.height);y(w,E),T&&T(w,E)}}),bt(this,"onDocPointerDone",e=>{const{crop:i,disabled:l,onComplete:s,onDragEnd:a}=this.props,c=this.getBox();this.unbindDocMove(),!(l||!i)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,a&&a(e),s&&s(di(i,c.width,c.height),To(i,c.width,c.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),bt(this,"onDragFocus",()=>{var e;(e=this.componentRef.current)==null||e.scrollTo(0,0)})}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:i,y:l,width:s,height:a}=e.getBoundingClientRect();return{x:i,y:l,width:s,height:a}}componentDidUpdate(e){const{crop:i,onComplete:l}=this.props;if(l&&!e.crop&&i){const{width:s,height:a}=this.getBox();s&&a&&l(di(i,s,a),To(i,s,a))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,Bl),this.document.addEventListener("pointerup",this.onDocPointerDone,Bl),this.document.addEventListener("pointercancel",this.onDocPointerDone,Bl),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,Bl),this.document.removeEventListener("pointerup",this.onDocPointerDone,Bl),this.document.removeEventListener("pointercancel",this.onDocPointerDone,Bl),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,i=this.getBox(),l=this.makePixelCrop(i),s=e.clientX-e.startClientX,a=e.clientY-e.startClientY;return l.x=Pl(e.startCropX+s,0,i.width-l.width),l.y=Pl(e.startCropY+a,0,i.height-l.height),l}getPointRegion(e,i,l,s){const{evData:a}=this,c=a.clientX-e.x,d=a.clientY-e.y;let p;s&&i?p=i==="nw"||i==="n"||i==="ne":p=d<a.startCropY;let h;return l&&i?h=i==="nw"||i==="w"||i==="sw":h=c<a.startCropX,h?p?"nw":"sw":p?"ne":"se"}resolveMinDimensions(e,i,l=0,s=0){const a=Math.min(l,e.width),c=Math.min(s,e.height);return!i||!a&&!c?[a,c]:i>1?a?[a,a/i]:[c*i,c]:c?[c*i,c]:[a,a/i]}resizeCrop(){const{evData:e}=this,{aspect:i=0,maxWidth:l,maxHeight:s}=this.props,a=this.getBox(),[c,d]=this.resolveMinDimensions(a,i,this.props.minWidth,this.props.minHeight);let p=this.makePixelCrop(a);const h=this.getPointRegion(a,e.ord,c,d),y=e.ord||h;let T=e.clientX-e.startClientX,x=e.clientY-e.startClientY;(c&&y==="nw"||y==="w"||y==="sw")&&(T=Math.min(T,-c)),(d&&y==="nw"||y==="n"||y==="ne")&&(x=Math.min(x,-d));const _={unit:"px",x:0,y:0,width:0,height:0};h==="ne"?(_.x=e.startCropX,_.width=T,i?(_.height=_.width/i,_.y=e.startCropY-_.height):(_.height=Math.abs(x),_.y=e.startCropY-_.height)):h==="se"?(_.x=e.startCropX,_.y=e.startCropY,_.width=T,i?_.height=_.width/i:_.height=x):h==="sw"?(_.x=e.startCropX+T,_.y=e.startCropY,_.width=Math.abs(T),i?_.height=_.width/i:_.height=x):h==="nw"&&(_.x=e.startCropX+T,_.width=Math.abs(T),i?(_.height=_.width/i,_.y=e.startCropY-_.height):(_.height=Math.abs(x),_.y=e.startCropY+x));const N=Iv(_,i,h,a.width,a.height,c,d,l,s);return i||jn.xyOrds.indexOf(y)>-1?p=N:jn.xOrds.indexOf(y)>-1?(p.x=N.x,p.width=N.width):jn.yOrds.indexOf(y)>-1&&(p.y=N.y,p.height=N.height),p.x=Pl(p.x,0,a.width-p.width),p.y=Pl(p.y,0,a.height-p.height),p}renderCropSelection(){const{ariaLabels:e=jn.defaultProps.ariaLabels,disabled:i,locked:l,renderSelectionAddon:s,ruleOfThirds:a,crop:c}=this.props,d=this.getCropStyle();if(c)return Te.createElement("div",{style:d,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!i&&!l&&Te.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},Te.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),Te.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),Te.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),Te.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),Te.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"nw"),role:"button"}),Te.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"n"),role:"button"}),Te.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"ne"),role:"button"}),Te.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"e"),role:"button"}),Te.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"se"),role:"button"}),Te.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"s"),role:"button"}),Te.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"sw"),role:"button"}),Te.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"w"),role:"button"})),s&&Te.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:p=>p.stopPropagation()},s(this.state)),a&&Te.createElement(Te.Fragment,null,Te.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),Te.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){const i={...gu,...this.props.crop||{}};return di(i,e.width,e.height)}render(){const{aspect:e,children:i,circularCrop:l,className:s,crop:a,disabled:c,locked:d,style:p,ruleOfThirds:h}=this.props,{cropIsActive:y,newCropIsBeingDrawn:T}=this.state,x=a?this.renderCropSelection():null,_=GU("ReactCrop",s,y&&"ReactCrop--active",c&&"ReactCrop--disabled",d&&"ReactCrop--locked",T&&"ReactCrop--new-crop",a&&e&&"ReactCrop--fixed-aspect",a&&l&&"ReactCrop--circular-crop",a&&h&&"ReactCrop--rule-of-thirds",!this.dragStarted&&a&&!a.width&&!a.height&&"ReactCrop--invisible-crop",l&&"ReactCrop--no-animate");return Te.createElement("div",{ref:this.componentRef,className:_,style:p},Te.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},i),a?Te.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},Te.createElement("defs",null,Te.createElement("mask",{id:`hole-${this.instanceId}`},Te.createElement("rect",{width:"100%",height:"100%",fill:"white"}),l?Te.createElement("ellipse",{cx:`${a.x+a.width/2}${a.unit}`,cy:`${a.y+a.height/2}${a.unit}`,rx:`${a.width/2}${a.unit}`,ry:`${a.height/2}${a.unit}`,fill:"black"}):Te.createElement("rect",{x:`${a.x}${a.unit}`,y:`${a.y}${a.unit}`,width:`${a.width}${a.unit}`,height:`${a.height}${a.unit}`,fill:"black"}))),Te.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,x)}};bt(vo,"xOrds",["e","w"]),bt(vo,"yOrds",["n","s"]),bt(vo,"xyOrds",["nw","ne","se","sw"]),bt(vo,"nudgeStep",1),bt(vo,"nudgeStepMedium",10),bt(vo,"nudgeStepLarge",100),bt(vo,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let OU=vo;function FU(t,e,i){const l=i.getContext("2d");if(!l)throw new Error("No 2d context");const s=t.naturalWidth/t.width,a=t.naturalHeight/t.height,c=512;i.width=c,i.height=c,l.imageSmoothingQuality="high",l.drawImage(t,e.x*s,e.y*a,e.width*s,e.height*a,0,0,c,c)}const YU=({isOpen:t,onClose:e,imageSrc:i,onCropComplete:l})=>{const[s,a]=Q.useState(),[c,d]=Q.useState(),p=Q.useRef(null),h=Q.useRef(null);function y(x){const{width:_,height:N}=x.currentTarget;if(_===0||N===0){console.error("Image has zero dimensions, cannot crop."),e();return}const A=PU(qU({unit:"%",width:90},1,_,N),_,N);a(A)}const T=()=>{const x=p.current,_=h.current;if(!(!x||!_||!c||c.width===0))try{FU(x,c,_);const N=_.toDataURL("image/jpeg");l(N)}catch(N){console.error("Error cropping image:",N),e()}};return!t||!i?null:S.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:e,children:S.jsxs("div",{className:"bg-gray-800 text-white rounded-lg shadow-xl w-full max-w-xl p-6 relative flex flex-col max-h-[90vh]",onClick:x=>x.stopPropagation(),children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:S.jsx(oi,{className:"w-6 h-6"})}),S.jsx("h2",{className:"text-2xl font-bold mb-4 text-indigo-400",children:""}),S.jsx("div",{className:"flex-grow flex items-center justify-center bg-black/50 rounded-md overflow-hidden my-4",children:S.jsx(OU,{crop:s,onChange:(x,_)=>a(_),onComplete:x=>d(x),aspect:1,circularCrop:!0,keepSelection:!0,children:S.jsx("img",{ref:p,alt:"Crop me",src:i,onLoad:y,style:{maxHeight:"65vh"}})})}),S.jsx("canvas",{ref:h,style:{display:"none",objectFit:"contain"}}),S.jsxs("div",{className:"flex justify-end items-center gap-4 mt-4 pt-4 border-t border-gray-700",children:[S.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors duration-200",children:""}),S.jsx("button",{onClick:T,disabled:!c||c.width===0,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-500 disabled:cursor-not-allowed rounded-md font-semibold transition-colors duration-200",children:""})]})]})})},JU=(t,e)=>new Promise((i,l)=>{const s=new Image;s.onload=()=>{const{width:a,height:c}=s;if(a===0||c===0){l(new Error("Image has zero dimensions."));return}let d=a,p=c;a>c?a>e&&(p=Math.round(c*(e/a)),d=e):c>e&&(d=Math.round(a*(e/c)),p=e);const h=document.createElement("canvas");h.width=d,h.height=p;const y=h.getContext("2d");if(!y){l(new Error("Could not get canvas context."));return}y.drawImage(s,0,0,d,p),i(h.toDataURL("image/jpeg",.9))},s.onerror=a=>{l(new Error(`Image failed to load: ${a}`))},s.src=t}),Ja=t=>t?t.startsWith("http")||t.startsWith("data:")?t:`/CR_PLAN/${t}`.replace(/\/+/g,"/"):"",KU=({isOpen:t,onClose:e,character:i,onSave:l,onDelete:s,tagCategories:a,allCharacters:c,allRelationships:d,onUpdateRelationships:p,characterImages:h,onUpdateCharacterImages:y,onAddTagToCategory:T})=>{const[x,_]=Q.useState(i),[N,A]=Q.useState("details"),[w,E]=Q.useState(!1),[M,H]=Q.useState(!1),[I,D]=Q.useState(null),[U,k]=Q.useState(null),[F,P]=Q.useState(""),[Y,J]=Q.useState(""),[j,de]=Q.useState(""),[q,ie]=Q.useState("to"),[L,O]=Q.useState(""),[oe,ce]=Q.useState(!1),[he,R]=Q.useState(null),[B,ee]=Q.useState(new Set),[ae,te]=Q.useState([]),[me,xe]=Q.useState("outgoing"),re=Q.useRef(null);Q.useEffect(()=>{_(i),H(!1),P(""),J(""),de(""),ie("to"),O(""),R(null),ee(new Set),te([]),xe("outgoing")},[i,t]),Q.useEffect(()=>{const Z=ue=>{re.current&&!re.current.contains(ue.target)&&ce(!1)};return document.addEventListener("mousedown",Z),()=>{document.removeEventListener("mousedown",Z)}},[]);const ye=Q.useMemo(()=>a.flatMap(Z=>Z.tags.map(ue=>({...ue,color:Z.color}))),[a]),Ve=Q.useMemo(()=>ye.filter(Z=>x.tagIds.includes(Z.id)),[ye,x.tagIds]),Ke=Q.useMemo(()=>h.filter(Z=>Z.characterId===i.id),[h,i.id]),Ye=Z=>{const{name:ue,value:Se}=Z.target,Ge={...x,[ue]:Se};_(Ge),l(Ge)},zt=Z=>{const ue={...x,tagIds:Z};_(ue),l(ue)},wt=()=>{M?s(i.id):(H(!0),setTimeout(()=>H(!1),3e3))},{outgoingList:Gt,incomingList:sn}=Q.useMemo(()=>{const Z=[],ue=[];return d.forEach(Se=>{if(Se.source===i.id){const Ge=c.find(Pe=>Pe.id===Se.target);Ge&&Z.push({id:Se.id,otherCharacterName:Ge.name,label:Se.label,description:Se.description,direction:"outgoing",arrowStyle:Se.arrowStyle,originalRel:Se})}else if(Se.target===i.id){const Ge=c.find(Pe=>Pe.id===Se.source);Ge&&ue.push({id:Se.id,otherCharacterName:Ge.name,label:Se.label,description:Se.description,direction:"incoming",arrowStyle:Se.arrowStyle,originalRel:Se})}}),{outgoingList:Z,incomingList:ue}},[d,i.id,c]),Ft=Z=>{Z.preventDefault();const ue=c.find(Se=>Se.id===F);ue&&Y&&(p(Se=>{const Ge=q==="to"||q==="from"||q==="both"?"arrow":"none",Pe=[],Le={id:Ue(),source:i.id,target:ue.id,label:Y,description:j,arrowStyle:Ge},Xe={id:Ue(),source:ue.id,target:i.id,label:Y,description:j,arrowStyle:Ge};return q==="to"?Pe.push(Le):q==="from"?Pe.push(Xe):(q==="both"||q==="none")&&Pe.push(Le,Xe),he?[...Se.filter(Ie=>!ae.includes(Ie.id)),...Pe]:[...Se,...Pe]}),P(""),J(""),de(""),O(""),ie("to"),R(null),te([]))},Yt=Z=>{var ue,Se;P(((ue=c.find(Ge=>Ge.name===Z.otherCharacterName))==null?void 0:ue.id)||""),O(Z.otherCharacterName),J(Z.label),de(Z.description||""),Z.direction==="outgoing"?ie("to"):ie("from"),R(Z.id),te([Z.id]),(Se=re.current)==null||Se.scrollIntoView({behavior:"smooth"})},jt=()=>{P(""),J(""),de(""),O(""),ie("to"),R(null),te([])},en=Z=>{ee(ue=>{const Se=new Set(ue);return Se.has(Z)?Se.delete(Z):Se.add(Z),Se})},fn=Z=>{window.confirm("")&&p(ue=>ue.filter(Se=>Se.id!==Z))},Fi=Q.useMemo(()=>{const Z=c.filter(ue=>ue.id!==i.id);return L?Z.filter(ue=>ue.name.toLowerCase().includes(L.toLowerCase())):Z},[c,i.id,L]),$n=Z=>{if(Z.target.files&&Z.target.files.length>0){const ue=Z.target.files[0],Se=new FileReader;Se.onload=async()=>{const Ge=Se.result;if(Ge)try{const Pe=await JU(Ge,1024),Le=`${Ue()}.jpg`,Xe=await fetch("/api/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({characterName:i.name,fileName:Le,imageBase64:Pe})});let Ie=Pe;if(Xe.ok){const Jt=await Xe.json();Jt.success&&Jt.path&&(Ie=Jt.path)}else console.error("Failed to upload image to local storage, falling back to base64");const ut={id:Ue(),characterId:i.id,imageDataUrl:Ie,tagIds:[],notes:""};y(Jt=>[...Jt,ut]),_(Jt=>(Jt.image||k(Pe),Jt))}catch(Pe){console.error("Failed to process image:",Pe),alert(`: ${Pe instanceof Error?Pe.message:"Unknown error"}`)}},Se.readAsDataURL(ue)}Z.target.value=""},At=Z=>{const ue={...x,image:Z};_(ue),l(ue),k(null)},ve=Z=>{_(ue=>{let Se=ue;const Ge=h.find(Pe=>Pe.id===Z);if(Ge&&Ge.imageDataUrl===ue.image){const Pe=h.filter(Xe=>Xe.characterId===i.id&&Xe.id!==Z),Le=Pe.length>0?Pe[0].imageDataUrl:void 0;Se={...ue,image:Le},l(Se)}return Se}),y(ue=>ue.filter(Se=>Se.id!==Z))},Ne=Z=>{k(Z)},we=Z=>{if(!I)return;const ue=I.id;y(Se=>Se.map(Ge=>Ge.id===ue?{...Ge,tagIds:Z}:Ge)),D(null)};if(!t)return null;const nt=me==="outgoing"?Gt:sn;return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-40",onClick:e,children:S.jsxs("div",{className:"bg-gray-800 text-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex overflow-hidden",onClick:Z=>Z.stopPropagation(),children:[S.jsxs("div",{className:"w-48 bg-gray-900/50 p-4 flex flex-col border-r border-gray-700",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[S.jsxs("div",{className:"w-16 h-16 rounded-full bg-gray-700 flex-shrink-0 overflow-hidden relative group",children:[S.jsx("img",{src:Ja(x.image)||`https://api.dicebear.com/7.x/pixel-art/svg?seed=${encodeURIComponent(x.name)}`,alt:x.name,className:"w-full h-full object-cover transition-all duration-300",style:{objectPosition:x.avatarPosition?`${x.avatarPosition.x}% ${x.avatarPosition.y}%`:"center"}}),S.jsx("button",{onClick:()=>{const Z=x.avatarPosition;let ue={x:50,y:50};!Z||Z.x===50&&Z.y===50?ue={x:50,y:0}:Z.x===50&&Z.y===0?ue={x:50,y:100}:Z.x===50&&Z.y===100?ue={x:0,y:0}:Z.x===0&&Z.y===0?ue={x:100,y:0}:Z.x===100&&Z.y===0&&(ue={x:50,y:50});const Se={...x,avatarPosition:ue};_(Se),l(Se)},className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center text-xs text-white font-bold transition-opacity",title:" (->->...)",children:""})]}),S.jsx("h2",{className:"text-xl font-bold text-indigo-400 break-words",children:x.name})]}),S.jsxs("nav",{className:"space-y-2",children:[S.jsxs("button",{onClick:()=>A("details"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-left ${N==="details"?"bg-indigo-600":"hover:bg-gray-700"}`,children:[S.jsx(dd,{className:"w-5 h-5"})," "]}),S.jsxs("button",{onClick:()=>A("relationships"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-left ${N==="relationships"?"bg-indigo-600":"hover:bg-gray-700"}`,children:[S.jsx(dd,{className:"w-5 h-5"})," "]}),S.jsxs("button",{onClick:()=>A("profile"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-left ${N==="profile"?"bg-indigo-600":"hover:bg-gray-700"}`,children:[S.jsx(sx,{className:"w-5 h-5"})," "]}),S.jsxs("button",{onClick:()=>A("images"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-left ${N==="images"?"bg-indigo-600":"hover:bg-gray-700"}`,children:[S.jsx(ux,{className:"w-5 h-5"})," "]})]}),S.jsx("div",{className:"flex-grow"}),S.jsx("button",{onClick:wt,className:`w-full flex items-center justify-center gap-3 px-3 py-2 rounded-md text-left transition-colors duration-200 ${M?"bg-red-600 text-white":"text-red-400 hover:bg-red-900/50"}`,children:M?"":S.jsxs(S.Fragment,{children:[S.jsx(os,{className:"w-5 h-5"})," "]})})]}),S.jsxs("div",{className:"flex-1 flex flex-col p-6 overflow-y-auto",children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-10",children:S.jsx(oi,{className:"w-6 h-6"})}),N==="details"&&S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-1",children:""}),S.jsx("input",{type:"text",id:"name",name:"name",value:x.name,onChange:Ye,className:"w-full p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-300 mb-1",children:""}),S.jsx("textarea",{id:"notes",name:"notes",value:x.notes,onChange:Ye,rows:8,className:"w-full p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-1",children:"Tags"}),S.jsxs("button",{onClick:()=>E(!0),className:"text-indigo-400 hover:underline text-sm font-medium flex items-center gap-1",children:[S.jsx(er,{className:"w-4 h-4"})," "]})]}),S.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Ve.length>0?Ve.map(Z=>S.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full",style:{backgroundColor:Z.color,color:"#fff"},children:Z.label},Z.id)):S.jsx("p",{className:"text-sm text-gray-500",children:" Tag"})})]})]}),N==="profile"&&S.jsx("div",{className:"space-y-8 animate-fadeIn",children:i.profile?S.jsxs(S.Fragment,{children:[i.profile.appearance&&S.jsxs("section",{children:[S.jsxs("h3",{className:"text-lg font-semibold text-indigo-400 mb-3 flex items-center",children:[S.jsx("span",{className:"w-1 h-6 bg-indigo-500 rounded-full mr-3"}),""]}),S.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50 text-gray-300 leading-relaxed whitespace-pre-wrap",children:i.profile.appearance})]}),i.profile.personality&&S.jsxs("section",{children:[S.jsxs("h3",{className:"text-lg font-semibold text-emerald-400 mb-3 flex items-center",children:[S.jsx("span",{className:"w-1 h-6 bg-emerald-500 rounded-full mr-3"}),""]}),S.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50 text-gray-300 leading-relaxed whitespace-pre-wrap",children:i.profile.personality})]}),i.profile.background&&S.jsxs("section",{children:[S.jsxs("h3",{className:"text-lg font-semibold text-amber-400 mb-3 flex items-center",children:[S.jsx("span",{className:"w-1 h-6 bg-amber-500 rounded-full mr-3"}),""]}),S.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50 text-gray-300 leading-relaxed whitespace-pre-wrap",children:i.profile.background})]}),i.profile.specialty&&S.jsxs("section",{children:[S.jsxs("h3",{className:"text-lg font-semibold text-rose-400 mb-3 flex items-center",children:[S.jsx("span",{className:"w-1 h-6 bg-rose-500 rounded-full mr-3"}),""]}),S.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50 text-gray-300 leading-relaxed whitespace-pre-wrap",children:i.profile.specialty})]}),i.profile.quote&&S.jsxs("section",{children:[S.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[S.jsx("span",{className:"w-1 h-6 bg-cyan-500 rounded-full mr-3"}),""]}),S.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50 text-gray-300 leading-relaxed whitespace-pre-wrap italic border-l-4 border-l-cyan-500",children:i.profile.quote})]})]}):S.jsxs("div",{className:"text-center py-12 text-gray-500",children:[S.jsx("p",{children:""}),S.jsx("p",{className:"text-sm mt-2",children:" Markdown "})]})}),N==="relationships"&&S.jsxs("div",{className:"space-y-6",children:[S.jsx("h3",{className:"text-2xl font-bold",children:""}),S.jsxs("form",{onSubmit:Ft,className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[S.jsx("h4",{className:"font-semibold mb-3",children:he?"":""}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[S.jsxs("div",{className:"md:col-span-2 relative",ref:re,children:[S.jsx("label",{htmlFor:"newRelTarget",className:"block text-sm font-medium text-gray-300 mb-1",children:""}),S.jsx("input",{id:"newRelTarget",type:"text",value:L,onChange:Z=>{O(Z.target.value),ce(!0)},onFocus:()=>ce(!0),placeholder:"...",autoComplete:"off",className:"w-full p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"}),oe&&S.jsx("div",{className:"absolute z-10 mt-1 w-full bg-gray-800 border border-gray-600 rounded-md shadow-lg max-h-48 overflow-y-auto",children:Fi.map(Z=>S.jsx("div",{onClick:()=>{P(Z.id),O(Z.name),ce(!1)},className:"px-4 py-2 hover:bg-indigo-600 cursor-pointer",children:Z.name},Z.id))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"newRelLabel",className:"block text-sm font-medium text-gray-300 mb-1",children:""}),S.jsx("input",{id:"newRelLabel",type:"text",value:Y,onChange:Z=>J(Z.target.value),placeholder:"",className:"w-full p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"newRelDirection",className:"block text-sm font-medium text-gray-300 mb-1",children:""}),S.jsxs("select",{id:"newRelDirection",value:q,onChange:Z=>ie(Z.target.value),className:"w-full p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500",children:[S.jsx("option",{value:"to",children:`${i.name}  `}),S.jsx("option",{value:"from",children:`${i.name}  `}),S.jsx("option",{value:"both",children:`${i.name}  `}),S.jsx("option",{value:"none",children:`${i.name}  `})]})]}),S.jsxs("div",{className:"md:col-span-4",children:[S.jsx("label",{htmlFor:"newRelDescription",className:"block text-sm font-medium text-gray-300 mb-1",children:" ()"}),S.jsx("textarea",{id:"newRelDescription",value:j,onChange:Z=>de(Z.target.value),placeholder:"...",rows:2,className:"w-full p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"})]})]}),S.jsxs("div",{className:"flex gap-2 mt-4",children:[S.jsx("button",{type:"submit",className:"flex-1 py-2 px-4 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors",children:he?"":""}),he&&S.jsx("button",{type:"button",onClick:jt,className:"py-2 px-4 bg-gray-600 hover:bg-gray-500 rounded-md font-semibold transition-colors",children:""})]})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h4",{className:"font-semibold",children:""}),S.jsxs("div",{className:"flex bg-gray-700 rounded-lg p-1",children:[S.jsx("button",{onClick:()=>xe("outgoing"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${me==="outgoing"?"bg-indigo-600 text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:" ()"}),S.jsx("button",{onClick:()=>xe("incoming"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${me==="incoming"?"bg-indigo-600 text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:" ()"})]})]}),S.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto pr-2",children:[nt.map(Z=>S.jsxs("div",{className:`rounded-md overflow-hidden transition-all duration-200 border ${B.has(Z.id)?"bg-gray-700 border-indigo-500/50 shadow-md":"bg-gray-700/50 border-transparent hover:bg-gray-700"}`,children:[S.jsxs("div",{className:"flex items-center justify-between p-3",children:[S.jsxs("div",{className:"flex items-center gap-2 flex-wrap cursor-pointer flex-grow select-none",onClick:()=>en(Z.id),children:[S.jsx("span",{className:"font-semibold text-white",children:i.name}),Z.direction==="outgoing"&&S.jsx("span",{className:"text-indigo-400 font-bold",children:""}),Z.direction==="incoming"&&S.jsx("span",{className:"text-indigo-400 font-bold",children:""}),S.jsx("span",{className:"font-semibold text-white",children:Z.otherCharacterName}),S.jsxs("span",{className:"text-gray-400 text-sm",children:["(",Z.label,")"]})]}),S.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[S.jsx("button",{onClick:ue=>{ue.stopPropagation(),Yt(Z)},className:"text-gray-400 hover:text-indigo-400 p-1.5 rounded-md hover:bg-gray-600 transition-colors",title:"",children:S.jsx(Tb,{className:"w-4 h-4"})}),S.jsx("button",{onClick:ue=>{ue.stopPropagation(),fn(Z.id)},className:"text-gray-400 hover:text-red-400 p-1.5 rounded-md hover:bg-gray-600 transition-colors",title:"",children:S.jsx(os,{className:"w-4 h-4"})}),S.jsx("button",{onClick:ue=>{ue.stopPropagation(),en(Z.id)},className:`text-gray-400 hover:text-white p-1.5 rounded-md hover:bg-gray-600 transition-all duration-200 ${B.has(Z.id)?"rotate-180 text-indigo-400":""}`,children:S.jsx(qd,{className:"w-4 h-4"})})]})]}),B.has(Z.id)&&S.jsx("div",{className:"px-4 py-3 text-sm text-gray-300 bg-gray-900/30 border-t border-gray-600/50 shadow-inner",children:S.jsxs("div",{className:"flex gap-2",children:[S.jsx("span",{className:"text-indigo-400 flex-shrink-0 mt-0.5",children:""}),S.jsx("span",{className:"leading-relaxed",children:Z.description||S.jsx("span",{className:"text-gray-500 italic",children:""})})]})})]},Z.id)),nt.length===0&&S.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:""})]})]})]}),N==="images"&&S.jsxs("div",{className:"space-y-6",children:[S.jsx("h3",{className:"text-2xl font-bold",children:""}),S.jsxs("div",{className:"mb-6",children:[S.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center justify-center w-full h-32 border-2 border-gray-600 border-dashed rounded-lg bg-gray-700/50 hover:bg-gray-700/80 transition-colors",onDragOver:Z=>{Z.preventDefault(),Z.currentTarget.classList.add("bg-indigo-600/20","border-indigo-500")},onDragLeave:Z=>{Z.preventDefault(),Z.currentTarget.classList.remove("bg-indigo-600/20","border-indigo-500")},onDrop:Z=>{Z.preventDefault(),Z.currentTarget.classList.remove("bg-indigo-600/20","border-indigo-500");const ue=Z.dataTransfer.files;ue&&ue.length>0&&$n({target:{files:ue,value:""}})},children:S.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[S.jsx(Su,{className:"w-8 h-8 mb-2 text-gray-400"}),S.jsxs("p",{className:"mb-2 text-sm text-gray-400",children:[S.jsx("span",{className:"font-semibold",children:""})," "]}),S.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF"})]})}),S.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:$n,className:"hidden"})]}),S.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Ke.map(Z=>S.jsxs("div",{className:"relative group aspect-square",children:[S.jsx("img",{src:Ja(Z.thumbnailUrl)||Ja(Z.imageDataUrl),alt:"Character",className:"w-full h-full object-cover rounded-md"}),S.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center p-2 text-center text-white",children:[S.jsx("button",{onClick:()=>Ne(Z.imageDataUrl),className:"text-xs bg-indigo-600 px-2 py-1 rounded mb-1 hover:bg-indigo-700",children:""}),S.jsx("button",{onClick:()=>D(Z),className:"text-xs bg-gray-600 px-2 py-1 rounded mb-1 hover:bg-gray-500",children:" Tag"}),S.jsx("button",{onClick:()=>ve(Z.id),className:"text-xs bg-red-600 px-2 py-1 rounded hover:bg-red-700",children:""})]}),x.image===Z.imageDataUrl&&S.jsx("div",{className:"absolute top-1 right-1 bg-indigo-600 text-white text-xs px-1.5 py-0.5 rounded-full",children:""})]},Z.id))}),Ke.length===0&&S.jsx("p",{className:"text-sm text-gray-500 text-center",children:""})]})]})]})}),S.jsx(Nd,{isOpen:w,onClose:()=>E(!1),tagCategories:a,selectedTagIds:x.tagIds,onSave:zt,enableAiSuggestions:!1}),S.jsx(Nd,{isOpen:!!I,onClose:()=>D(null),tagCategories:a,selectedTagIds:(I==null?void 0:I.tagIds)||[],onSave:we,enableAiSuggestions:!0,image:I,onAddTagToCategory:T}),S.jsx(YU,{isOpen:!!U,onClose:()=>k(null),imageSrc:U?Ja(U):null,onCropComplete:At})]})},XU=({isOpen:t,onClose:e,onSave:i,currentProvider:l,currentOpenaiKey:s})=>{const[a,c]=Q.useState(l),[d,p]=Q.useState(s);if(Q.useEffect(()=>{t&&(c(l),p(s))},[t,l,s]),!t)return null;const h=()=>{i({provider:a,openaiKey:d}),e()};return S.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:S.jsxs("div",{className:"bg-gray-800 text-white rounded-lg shadow-xl w-full max-w-lg p-6 relative",onClick:y=>y.stopPropagation(),children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:S.jsx(oi,{className:"w-6 h-6"})}),S.jsx("h2",{className:"text-2xl font-bold mb-4 text-indigo-400",children:"AI  API Key "}),S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" AI "}),S.jsxs("div",{className:"flex bg-gray-900 rounded-lg p-1 border border-gray-700",children:[S.jsx("button",{onClick:()=>c("gemini"),className:`w-1/2 py-2 rounded-md text-sm font-semibold transition-colors ${a==="gemini"?"bg-indigo-600":"hover:bg-gray-700"}`,children:"Google Gemini"}),S.jsx("button",{onClick:()=>c("openai"),className:`w-1/2 py-2 rounded-md text-sm font-semibold transition-colors ${a==="openai"?"bg-indigo-600":"hover:bg-gray-700"}`,children:"OpenAI"})]})]}),a==="gemini"&&S.jsx("div",{children:S.jsx("p",{className:"text-sm text-gray-400 mb-4",children:" Google GeminiAPI Key "})}),a==="openai"&&S.jsxs("div",{children:[S.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:[" ",S.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:underline font-medium",children:"OpenAI Platform"}),"  OpenAI API Key",S.jsx("br",{})," `gpt-4o-mini` "]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("label",{htmlFor:"openaiKeyInput",className:"block text-sm font-medium text-gray-300 mb-1",children:"OpenAI API Key"}),S.jsx("input",{id:"openaiKeyInput",type:"password",value:d,onChange:y=>p(y.target.value),placeholder:" OpenAI API Key (sk-...)",className:"w-full p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]})]}),S.jsxs("div",{className:"flex justify-end items-center gap-4 mt-4",children:[S.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors duration-200",children:""}),S.jsx("button",{onClick:h,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors duration-200",children:""})]})]})})},$U=({onOpenApiKeyModal:t,onExportCharacters:e,onImportCharacters:i,onExportTags:l,onImportTags:s,onReset:a})=>{const c=Q.useRef(null),[d,p]=Q.useState(null),[h,y]=Q.useState(!1),[T,x]=Q.useState(!1),_=Q.useRef(null),N=Q.useRef(null),A=H=>{var I;p(H),(I=c.current)==null||I.click()},w=H=>{var U;const I=(U=H.target.files)==null?void 0:U[0];if(!I||!d)return;const D=new FileReader;D.onload=k=>{var F;try{const P=(F=k.target)==null?void 0:F.result;if(typeof P!="string")throw new Error("File content is not a string.");const Y=JSON.parse(P);d==="characters"?i(Y):d==="tags"&&s(Y)}catch(P){console.error("Error parsing imported file:",P),alert(" JSON ")}finally{p(null)}},D.readAsText(I),H.target&&(H.target.value="")},E=()=>{_.current&&(clearTimeout(_.current),_.current=null),h?(a(),y(!1)):(y(!0),_.current=window.setTimeout(()=>{y(!1)},3e3))},M=()=>{if(N.current&&(clearTimeout(N.current),N.current=null),T)try{localStorage.removeItem("characterMapData"),alert(` characterMapData

`),window.location.reload()}catch(H){console.error("Failed to clear cache:",H),alert("  F12 Console ")}finally{x(!1)}else x(!0),N.current=window.setTimeout(()=>{x(!1)},3e3)};return S.jsxs("div",{className:"h-full w-full bg-gray-900 flex flex-col p-8 overflow-y-auto",children:[S.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:""}),S.jsx("div",{className:"mb-4 text-xs text-gray-500 font-mono",children:"Version 0.1.0"}),S.jsxs("div",{className:"space-y-8 max-w-2xl",children:[S.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700",children:[S.jsx("h2",{className:"text-xl font-semibold mb-3 text-indigo-400",children:"AI  ()"}),S.jsx("p",{className:"text-sm text-gray-400 mb-4",children:" AI "}),S.jsx("button",{onClick:t,disabled:!0,className:"px-6 py-2 bg-indigo-600/50 cursor-not-allowed rounded-md font-semibold transition-colors duration-200 text-white/50",children:" AI  API Key"})]}),S.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700",children:[S.jsx("h2",{className:"text-xl font-semibold mb-3 text-indigo-400",children:""}),S.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Tag "}),S.jsxs("div",{className:"flex flex-wrap gap-4",children:[S.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors duration-200",children:""}),S.jsx("button",{onClick:()=>A("characters"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors duration-200",children:""}),S.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors duration-200",children:" Tag "}),S.jsx("button",{onClick:()=>A("tags"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors duration-200",children:" Tag "}),S.jsx("input",{type:"file",ref:c,onChange:w,accept:".json,application/json",style:{display:"none"}})]})]}),S.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700",children:[S.jsx("h2",{className:"text-xl font-semibold mb-3 text-indigo-400",children:""}),S.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:[" localStorage  ",S.jsx("span",{className:"font-mono",children:"characterMapData"}),""]}),S.jsx("button",{onClick:M,className:`px-6 py-2 text-white rounded-md font-semibold transition-all duration-200 ${T?"bg-amber-700 hover:bg-amber-800 ring-2 ring-amber-300":"bg-amber-600 hover:bg-amber-700"}`,children:T?"":""})]}),S.jsxs("div",{className:"bg-red-900/30 p-6 rounded-lg shadow-lg border border-red-500/50",children:[S.jsx("h2",{className:"text-xl font-semibold mb-3 text-red-400",children:""}),S.jsx("p",{className:"text-sm text-red-300/80 mb-4",children:""}),S.jsx("button",{onClick:E,className:`px-6 py-2 text-white rounded-md font-semibold transition-all duration-200 ${h?"bg-red-700 hover:bg-red-800 ring-2 ring-red-400":"bg-red-600 hover:bg-red-700"}`,children:h?"":""})]})]})]})},QU=t=>t?t.startsWith("http")||t.startsWith("data:")?t:`/CR_PLAN/${t}`.replace(/\/+/g,"/"):"",ZU=({characters:t,allTags:e,tagCategories:i,onCharacterClick:l})=>{const[s,a]=Q.useState(""),[c,d]=Q.useState([]),[p,h]=Q.useState(!1),y=Q.useMemo(()=>{let _=[...t];return s.trim()&&(_=_.filter(N=>N.name.toLowerCase().includes(s.toLowerCase()))),c.length>0&&(_=_.filter(N=>c.every(A=>N.tagIds.includes(A)))),_},[t,s,c]),T=Q.useMemo(()=>e.filter(_=>c.includes(_.id)),[e,c]),x=_=>{d(N=>N.filter(A=>A!==_))};return Q.useMemo(()=>({characters:y,columnCount:1,onCharacterClick:l,allTags:e}),[y,l,e]),S.jsxs("div",{className:"h-full w-full bg-gray-900 flex flex-col",children:[S.jsxs("div",{className:"p-8 border-b border-gray-700 flex-shrink-0",children:[S.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:""}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:""}),S.jsxs("div",{className:"relative",children:[S.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),S.jsx("input",{type:"text",value:s,onChange:_=>a(_.target.value),placeholder:"...",className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-md text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Tag "}),S.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-between px-4 py-2 bg-gray-800 border border-gray-700 rounded-md text-white hover:bg-gray-700 transition-colors",children:[S.jsxs("span",{className:"flex items-center gap-2 text-gray-300",children:[S.jsx(er,{className:"w-5 h-5"}),c.length>0?` ${c.length}  Tag`:" Tag..."]}),S.jsx("span",{className:"text-gray-500",children:""})]})]})]}),T.length>0&&S.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:T.map(_=>S.jsxs("div",{className:"flex items-center text-xs font-medium pl-2 pr-1 py-0.5 rounded-full",style:{backgroundColor:_.color},children:[S.jsx("span",{className:"text-white",children:_.label}),S.jsx("button",{onClick:()=>x(_.id),className:"ml-1 text-white/70 hover:text-white",children:S.jsx(oi,{className:"w-3 h-3"})})]},_.id))})]}),S.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:y.length>0?S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.map(_=>{const N=e.filter(A=>_.tagIds.includes(A.id));return S.jsxs("div",{onClick:()=>l(_),className:"bg-gray-800 rounded-lg overflow-hidden cursor-pointer group transform hover:-translate-y-1 transition-transform duration-200 shadow-lg hover:shadow-indigo-500/30 border border-gray-700 flex flex-col h-[400px]",style:{contentVisibility:"auto",containIntrinsicSize:"400px"},children:[S.jsxs("div",{className:"w-full flex-grow bg-gray-700 relative overflow-hidden",children:[S.jsx("img",{src:QU(_.image)||`https://api.dicebear.com/7.x/pixel-art/svg?seed=${encodeURIComponent(_.name)}`,alt:_.name,className:"w-full h-full object-cover object-top transition-transform duration-500 group-hover:scale-110",style:{imageRendering:"auto"},loading:"lazy"}),S.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:S.jsx("h3",{className:"text-lg font-bold text-white truncate drop-shadow-lg",children:_.name})})]}),S.jsx("div",{className:"px-2 py-1.5 bg-gray-800/95",children:S.jsx("div",{className:"overflow-hidden",children:N.length>0?S.jsxs("div",{className:"flex flex-wrap gap-1",children:[N.slice(0,3).map(A=>S.jsx("span",{className:"text-xs font-medium px-1.5 py-0.5 rounded-full whitespace-nowrap",style:{backgroundColor:A.color,color:"#fff"},children:A.label},A.id)),N.length>3&&S.jsxs("span",{className:"text-xs text-gray-400 self-center",children:["+",N.length-3]})]}):S.jsx("span",{className:"text-xs text-gray-600 italic",children:""})})})]},_.id)})}):S.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[S.jsx("p",{className:"text-xl",children:""}),S.jsx("p",{className:"mt-2",children:" Tag"})]})}),S.jsx(Qd,{isOpen:p,onClose:()=>h(!1),tagCategories:i,selectedTagIds:c,onApply:d})]})},WU=({options:t,value:e,onChange:i,placeholder:l})=>{const[s,a]=Q.useState(!1),[c,d]=Q.useState(""),p=Q.useRef(null),h=Q.useMemo(()=>{var x;return((x=t.find(_=>_.value===e))==null?void 0:x.label)||""},[e,t]),y=Q.useMemo(()=>c?t.filter(x=>x.label.toLowerCase().includes(c.toLowerCase())):t,[t,c]);Q.useEffect(()=>{function x(_){p.current&&!p.current.contains(_.target)&&(a(!1),d(""))}return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[p]);const T=x=>{i(x),d(""),a(!1)};return S.jsxs("div",{className:"relative",ref:p,children:[S.jsx("input",{type:"text",value:s?c:h,onChange:x=>d(x.target.value),onFocus:()=>{a(!0),d("")},placeholder:l,className:"w-full p-2 pr-8 bg-gray-700 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none"}),S.jsx("svg",{className:"w-5 h-5 text-gray-400 absolute top-1/2 right-3 transform -translate-y-1/2 pointer-events-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),s&&S.jsx("div",{className:"absolute z-10 mt-1 w-full bg-gray-800 border border-gray-600 rounded-md shadow-lg max-h-60 overflow-y-auto",children:y.length>0?y.map(x=>S.jsx("div",{onClick:()=>T(x.value),className:`px-4 py-2 cursor-pointer hover:bg-indigo-600 ${e===x.value?"bg-indigo-600/50":""}`,children:x.label},x.value)):S.jsx("div",{className:"px-4 py-2 text-gray-500",children:""})})]})},Dv=t=>t?t.startsWith("http")||t.startsWith("data:")?t:`/CR_PLAN/${t}`.replace(/\/+/g,"/"):"",jU=({characters:t,characterImages:e,allTags:i,tagCategories:l,onImageClick:s})=>{const[a,c]=Q.useState("all"),[d,p]=Q.useState([]),[h,y]=Q.useState(!1),T=Q.useMemo(()=>Array.isArray(t)?new Map(t.map(w=>[w.id,w])):new Map,[t]),x=Q.useMemo(()=>Array.isArray(t)?[{value:"all",label:""},...t.map(w=>({value:w.id,label:w.name}))]:[{value:"all",label:""}],[t]),_=Q.useMemo(()=>{if(!Array.isArray(e))return[];let w=[...e];return a!=="all"&&(w=w.filter(E=>E.characterId===a)),d.length>0&&(w=w.filter(E=>d.every(M=>E.tagIds.includes(M)))),w},[e,a,d]),N=Q.useMemo(()=>i.filter(w=>d.includes(w.id)),[i,d]),A=w=>{p(E=>E.filter(M=>M!==w))};return S.jsxs("div",{className:"h-full w-full bg-gray-900 flex flex-col",children:[S.jsxs("div",{className:"p-8 border-b border-gray-700 flex-shrink-0",children:[S.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:""}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-sm font-medium text-gray-400 mb-2",children:""}),S.jsx(WU,{options:x,value:a,onChange:c,placeholder:"..."})]}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-sm font-medium text-gray-400 mb-2",children:" Tag "}),S.jsxs("button",{onClick:()=>y(!0),className:"w-full flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md font-semibold transition-colors text-sm text-left h-[42px]",children:[S.jsx(er,{className:"w-5 h-5"}),S.jsxs("span",{children:[" Tag ",d.length>0?`( ${d.length} )`:""]})]})]})]}),N.length>0&&S.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:N.map(w=>S.jsxs("div",{className:"flex items-center text-xs font-medium pl-2 pr-1 py-0.5 rounded-full",style:{backgroundColor:w.color},children:[S.jsx("span",{className:"text-white",children:w.label}),S.jsx("button",{onClick:()=>A(w.id),className:"ml-1 text-white/70 hover:text-white",children:S.jsx(oi,{className:"w-3 h-3"})})]},w.id))})]}),S.jsx("div",{className:"flex-grow p-4 overflow-hidden",children:_.length>0?S.jsx(mT,{style:{height:"100%"},totalCount:_.length,components:{List:Q.forwardRef(({style:w,children:E,...M},H)=>S.jsx("div",{ref:H,...M,style:w,className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:E})),Item:Q.forwardRef(({children:w,...E},M)=>S.jsx("div",{...E,ref:M,className:"aspect-square",children:w}))},itemContent:w=>{const E=_[w],M=T.get(E.characterId);return S.jsxs("div",{onClick:()=>s(E),className:"w-full h-full bg-gray-800 rounded-lg overflow-hidden cursor-pointer group relative border border-gray-700 shadow-sm hover:shadow-indigo-500/30 transition-shadow duration-200",style:{contentVisibility:"auto",containIntrinsicSize:"200px"},children:[S.jsx("img",{src:Dv(E.thumbnailUrl)||Dv(E.imageDataUrl),alt:(M==null?void 0:M.name)||"Character image",className:"w-full h-full object-cover object-top",loading:"lazy"}),S.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:S.jsx("p",{className:"text-white text-sm font-bold truncate",children:M==null?void 0:M.name})})]})}}):S.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[S.jsx("p",{className:"text-xl",children:""}),S.jsx("p",{className:"mt-2",children:""})]})}),S.jsx(Qd,{isOpen:h,onClose:()=>y(!1),tagCategories:l,selectedTagIds:d,onApply:p})]})},e4=t=>t?t.startsWith("http")||t.startsWith("data:")?t:`/CR_PLAN/${t}`.replace(/\/+/g,"/"):"",t4=({isOpen:t,onClose:e,image:i,character:l,tagCategories:s,allTags:a,onUpdateImage:c,onDeleteImage:d,onAddTagToCategory:p})=>{const[h,y]=Q.useState(!1),[T,x]=Q.useState(""),[_,N]=Q.useState(!1);Q.useEffect(()=>{t&&i&&(x(i.notes||""),N(!1))},[t,i]),Q.useEffect(()=>{if(!t||!i||T===(i.notes||""))return;const M=setTimeout(()=>{c(H=>H.map(I=>I.id===i.id?{...I,notes:T}:I))},500);return()=>{clearTimeout(M)}},[T,i,c,t]);const A=Q.useMemo(()=>i?a.filter(M=>i.tagIds.includes(M.id)):[],[a,i]),w=M=>{if(!i)return;const H=i.id;c(I=>I.map(D=>D.id===H?{...D,tagIds:M}:D)),y(!1)},E=()=>{i&&(_?d(i.id):(N(!0),setTimeout(()=>N(!1),3e3)))};return!t||!i||!l?null:S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:S.jsxs("div",{className:"bg-gray-800 text-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col md:flex-row overflow-hidden",onClick:M=>M.stopPropagation(),children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20 bg-black/30 rounded-full p-1",children:S.jsx(oi,{className:"w-6 h-6"})}),S.jsx("div",{className:"w-full md:w-2/3 flex-shrink-0 bg-black flex items-center justify-center",children:S.jsx("img",{src:e4(i.imageDataUrl),alt:`Image of ${l.name}`,className:"max-w-full max-h-[90vh] object-contain"})}),S.jsxs("div",{className:"w-full md:w-1/3 p-6 flex flex-col overflow-y-auto",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2 text-indigo-400",children:l.name}),S.jsx("p",{className:"text-sm text-gray-400 mb-6",children:""}),S.jsxs("div",{className:"mb-6",children:[S.jsx("label",{htmlFor:"imageNotes",className:"block text-lg font-semibold mb-2",children:""}),S.jsx("textarea",{id:"imageNotes",value:T,onChange:M=>x(M.target.value),rows:5,placeholder:"...",className:"w-full p-2 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 transition"})]}),S.jsxs("div",{className:"flex-grow",children:[S.jsxs("div",{className:"flex justify-between items-center mb-2",children:[S.jsx("h3",{className:"text-lg font-semibold",children:"Tags"}),S.jsxs("button",{onClick:()=>y(!0),className:"text-indigo-400 hover:underline text-sm font-medium flex items-center gap-1",children:[S.jsx(er,{className:"w-4 h-4"})," "]})]}),S.jsx("div",{className:"flex flex-wrap gap-2",children:A.length>0?A.map(M=>S.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full",style:{backgroundColor:M.color,color:"#fff"},children:M.label},M.id)):S.jsx("p",{className:"text-sm text-gray-500",children:" Tag"})})]}),S.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:S.jsx("button",{onClick:E,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-md text-left transition-colors duration-200 ${_?"bg-red-600 text-white":"text-red-400 hover:bg-red-900/50"}`,children:_?"":S.jsxs(S.Fragment,{children:[S.jsx(os,{className:"w-5 h-5"})," "]})})})]})]})}),S.jsx(Nd,{isOpen:h,onClose:()=>y(!1),tagCategories:s,selectedTagIds:(i==null?void 0:i.tagIds)||[],onSave:w,enableAiSuggestions:!0,image:i,onAddTagToCategory:p})]})},n4=({tagCategories:t,characterImages:e,characters:i})=>{const[l,s]=Q.useState("most"),[a,c]=Q.useState("all"),d=Q.useRef(null),p=Q.useRef(null),h=Q.useMemo(()=>{const y=new Map;e.forEach(_=>{_.tagIds.forEach(N=>{y.set(N,(y.get(N)||0)+1)})}),i.forEach(_=>{_.tagIds.forEach(N=>{y.set(N,(y.get(N)||0)+1)})});const x=t.flatMap(_=>_.tags.map(N=>({...N,color:_.color,categoryId:_.id}))).map(_=>({id:_.id,label:_.label,color:_.color,categoryId:_.categoryId,count:y.get(_.id)||0}));return a==="all"?x:x.filter(_=>_.categoryId===a)},[t,e,i,a]);return Q.useEffect(()=>{if(!d.current||!p.current||h.length===0){d.current&&Wt(d.current).selectAll("*").remove();return}const y=p.current.clientWidth,T=p.current.clientHeight,x=h.map(D=>{const U=Math.max(...h.map(F=>F.count),0);let k=0;return l==="most"?k=D.count>0?D.count:.5:k=U-D.count+1,{...D,value:k}}),_=sD().size([y-2,T-2]).padding(5),N=$d({children:x}).sum(D=>D.value||0),A=_(N).leaves(),w=Wt(d.current).attr("width",y).attr("height",T).attr("viewBox",`0 0 ${y} ${T}`).style("font","12px sans-serif");w.selectAll("*").remove();const E=w.append("g"),M=Wt(p.current).append("div").attr("class","tooltip").style("position","absolute").style("background","rgba(0,0,0,0.8)").style("color","#fff").style("padding","5px 10px").style("border-radius","4px").style("pointer-events","none").style("opacity",0).style("transition","opacity 0.2s"),H=E.append("g").selectAll("g").data(A).join("g").attr("transform",D=>`translate(${D.x},${D.y})`).style("cursor","pointer").on("mouseover",(D,U)=>{M.transition().style("opacity",1),M.html(`${U.data.label}<br/>: ${U.data.count}`).style("left",D.pageX+15+"px").style("top",D.pageY-15+"px"),Wt(D.currentTarget).select("circle").attr("stroke","#fff")}).on("mouseout",D=>{M.transition().style("opacity",0),Wt(D.currentTarget).select("circle").attr("stroke",U=>U.data.count>0?null:U.data.color)});return H.append("circle").attr("r",D=>D.r).attr("fill",D=>D.data.count>0?D.data.color:"none").attr("stroke",D=>D.data.count>0?null:D.data.color).attr("stroke-width",2).attr("stroke-dasharray",D=>D.data.count>0?"none":"4,4"),H.append("text").attr("clip-path",D=>`circle(${D.r})`).attr("text-anchor","middle").attr("fill",D=>D.data.count>0?"#fff":D.data.color).attr("paint-order","stroke").attr("stroke","rgba(0,0,0,0.5)").attr("stroke-width","1px").attr("font-size",D=>Math.max(8,Math.min(D.r/2.5,20))+"px").selectAll("tspan").data(D=>D.data.label.split(/(?=[A-Z][^A-Z])/g)).join("tspan").attr("x",0).attr("y",(D,U,k)=>`${U-k.length/2+.8}em`).text(D=>D),w.call(Px().extent([[0,0],[y,T]]).scaleExtent([.5,8]).on("zoom",({transform:D})=>{E.attr("transform",D)})),()=>{M.remove()}},[h,l]),S.jsxs("div",{className:"h-full w-full bg-gray-900 flex flex-col p-8",children:[S.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-4",children:[S.jsx("h1",{className:"text-3xl font-bold text-white",children:"Tag "}),S.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[S.jsx("div",{children:S.jsxs("select",{value:a,onChange:y=>c(y.target.value),className:"p-2 bg-gray-800 border border-gray-700 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none transition text-sm font-semibold",children:[S.jsx("option",{value:"all",children:""}),t.map(y=>S.jsx("option",{value:y.id,children:y.name},y.id))]})}),S.jsxs("div",{className:"flex bg-gray-800 rounded-lg p-1 border border-gray-700",children:[S.jsx("button",{onClick:()=>s("most"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-colors ${l==="most"?"bg-indigo-600":"hover:bg-gray-700"}`,children:""}),S.jsx("button",{onClick:()=>s("least"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-colors ${l==="least"?"bg-indigo-600":"hover:bg-gray-700"}`,children:""})]})]})]}),S.jsx("p",{className:"text-sm text-gray-400 mb-6",children:" Tag "}),S.jsxs("div",{ref:p,className:"w-full h-full bg-gray-800/50 rounded-lg overflow-hidden relative border border-gray-700",children:[S.jsx("svg",{ref:d}),h.length===0&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center text-gray-500 pointer-events-none",children:S.jsxs("div",{children:[S.jsx("p",{className:"text-xl",children:""}),S.jsx("p",{className:"mt-2",children:"/ Tag"})]})})]})]})};class i4 extends Q.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,i){console.error("Uncaught error:",e,i),this.setState({errorInfo:i})}render(){return this.state.hasError?S.jsxs("div",{className:"p-4 bg-red-900 text-white max-h-[40vh] overflow-auto",children:[S.jsx("h1",{className:"text-xl font-bold mb-2",children:"Something went wrong."}),S.jsx("h2",{className:"text-sm font-semibold mb-1",children:"Error:"}),S.jsx("pre",{className:"bg-black p-2 rounded mb-2 whitespace-pre-wrap text-xs",children:this.state.error&&this.state.error.toString()}),S.jsx("button",{className:"mt-2 px-3 py-1 bg-white text-red-900 rounded hover:bg-gray-200 text-sm",onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}function o4(){const t=Array.from({length:12},()=>Ue()),e=[{id:t[0],name:"",notes:"",tagIds:[]},{id:t[1],name:"",notes:"",tagIds:[]},{id:t[2],name:"",notes:"",tagIds:[]},{id:t[3],name:"",notes:"",tagIds:[]},{id:t[4],name:"",notes:"",tagIds:[]},{id:t[5],name:"",notes:" Boss",tagIds:[]},{id:t[6],name:"",notes:"",tagIds:[]},{id:t[7],name:"",notes:"",tagIds:[]},{id:t[8],name:"",notes:"",tagIds:[]},{id:t[9],name:"",notes:"",tagIds:[]},{id:t[10],name:"",notes:"",tagIds:[]},{id:t[11],name:"",notes:"",tagIds:[]}],i=Array.from({length:4},()=>Ue()),l={[i[0]]:[{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""}],[i[1]]:[{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""}],[i[2]]:[{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""}],[i[3]]:[{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""},{id:Ue(),label:""}]},s=[{id:i[0],name:"",color:"#ef4444",tags:l[i[0]],selectionMode:"single"},{id:i[1],name:"",color:"#3b82f6",tags:l[i[1]],selectionMode:"single"},{id:i[2],name:"",color:"#10b981",tags:l[i[2]],selectionMode:"single"},{id:i[3],name:"",color:"#8b5cf6",tags:l[i[3]],selectionMode:"multiple"}];e[0].tagIds=[l[i[0]][0].id,l[i[1]][0].id,l[i[2]][0].id,l[i[3]][2].id,l[i[3]][4].id],e[1].tagIds=[l[i[0]][0].id,l[i[1]][1].id,l[i[2]][0].id,l[i[3]][1].id,l[i[3]][5].id],e[2].tagIds=[l[i[0]][1].id,l[i[1]][0].id,l[i[2]][0].id,l[i[3]][1].id,l[i[3]][3].id,l[i[3]][4].id],e[3].tagIds=[l[i[0]][0].id,l[i[1]][2].id,l[i[2]][1].id,l[i[3]][0].id,l[i[3]][6].id],e[4].tagIds=[l[i[0]][2].id,l[i[1]][3].id,l[i[2]][2].id],e[5].tagIds=[l[i[0]][1].id,l[i[2]][3].id],e[6].tagIds=[l[i[0]][0].id,l[i[2]][4].id],e[7].tagIds=[l[i[0]][1].id,l[i[1]][0].id,l[i[2]][0].id],e[8].tagIds=[l[i[0]][2].id,l[i[2]][2].id],e[9].tagIds=[l[i[0]][0].id,l[i[2]][1].id,l[i[3]][0].id],e[10].tagIds=[l[i[0]][1].id,l[i[1]][4].id,l[i[2]][4].id],e[11].tagIds=[l[i[0]][0].id,l[i[1]][5].id,l[i[2]][0].id,l[i[3]][5].id];const a=[{id:Ue(),source:t[1],target:t[0],label:"",arrowStyle:"arrow"},{id:Ue(),source:t[0],target:t[2],label:"",arrowStyle:"arrow"},{id:Ue(),source:t[0],target:t[3],label:"",arrowStyle:"none"},{id:Ue(),source:t[3],target:t[0],label:"",arrowStyle:"none"},{id:Ue(),source:t[4],target:t[0],label:"",arrowStyle:"arrow"},{id:Ue(),source:t[2],target:t[5],label:"",arrowStyle:"arrow"},{id:Ue(),source:t[1],target:t[6],label:"",arrowStyle:"arrow"},{id:Ue(),source:t[7],target:t[2],label:"",arrowStyle:"arrow"},{id:Ue(),source:t[8],target:t[4],label:"",arrowStyle:"arrow"},{id:Ue(),source:t[4],target:t[8],label:"",arrowStyle:"arrow"},{id:Ue(),source:t[9],target:t[3],label:"",arrowStyle:"none"},{id:Ue(),source:t[3],target:t[9],label:"",arrowStyle:"none"},{id:Ue(),source:t[2],target:t[10],label:"",arrowStyle:"arrow"},{id:Ue(),source:t[11],target:t[0],label:"",arrowStyle:"arrow"}],c=Array.from({length:50},(d,p)=>{const h=p%e.length,y=e[h],T=[];if(y.tagIds.length>0){const x=Math.floor(Math.random()*3)+1,_=[...y.tagIds].sort(()=>.5-Math.random());T.push(..._.slice(0,x))}return{id:Ue(),characterId:y.id,imageDataUrl:`https://api.dicebear.com/7.x/pixel-art/svg?seed=${encodeURIComponent(y.name+p)}`,tagIds:T,notes:` ${y.name}  ${Math.floor(p/e.length)+1} `}});return{characters:e,relationships:a,tagCategories:s,characterImages:c}}const l4=()=>{const[t,e]=Q.useState([]),[i,l]=Q.useState([]),[s,a]=Q.useState([]),[c,d]=Q.useState([]),[p,h]=Q.useState("graph"),[y,T]=Q.useState(!1),[x,_]=Q.useState(null),[N,A]=Q.useState(null),[w,E]=Q.useState(!1),[M,H]=Q.useState(!1),[I,D]=Q.useState(null),[U,k]=Q.useState(!1),[F,P]=Q.useState("gemini"),[Y,J]=Q.useState(""),[j,de]=Q.useState("idle"),[q,ie]=Q.useState(null),[L,O]=Q.useState(null),[oe,ce]=Q.useState(new Set),[he,R]=Q.useState(new Set),B=Q.useMemo(()=>({c8a2b1d3e4f5:"1a4889cddbd5","8f7c3e9a2b1d":"5b0ba53871bb",e4a5d8f9b2c3:"c5c6abfed105"}),[]),ee=Q.useCallback(ve=>B[ve]||ve,[B]),ae=Q.useCallback((ve,Ne)=>{const we=Array.from(new Set([...ve.tagIds||[],...Ne.tagIds||[]].filter(Boolean)));return{...ve,name:ve.name||Ne.name,notes:ve.notes||Ne.notes,image:ve.image||Ne.image,avatarPosition:ve.avatarPosition||Ne.avatarPosition,tagIds:we}},[]),te=()=>window.location.pathname.startsWith("/CR_PLAN")?"/CR_PLAN":"",me=async ve=>await fetch(ve,{cache:"no-store",headers:{"Cache-Control":"no-store",Pragma:"no-cache"}});Q.useEffect(()=>{(async()=>{try{const Ne=localStorage.getItem("aiProvider");(Ne==="openai"||Ne==="gemini")&&P(Ne);const we=localStorage.getItem("openaiApiKey");we&&J(we);const Z=await(await fetch("./cr_data.json")).json();let ue={};try{if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"){const ke=[`${te()}/api/user-data`,"/api/user-data"].filter((tt,Rt,$t)=>$t.indexOf(tt)===Rt);let mt=!1;for(const tt of ke)try{const Rt=await me(tt);if(Rt.ok){ue=await Rt.json(),console.log(` Loaded user data from API: ${tt}`),mt=!0;break}}catch{}if(!mt){const tt=await me("./user_data.json");tt.ok?(ue=await tt.json(),console.log(" Loaded user_data.json (static fallback)")):console.warn(" user data not found (API/static), using defaults")}}else{const Re=await me("./user_data.json");Re.ok?(ue=await Re.json(),console.log(" Loaded user_data.json successfully")):console.warn(" user_data.json not found, using defaults")}}catch(ge){console.warn("Failed to load user_data.json",ge)}ue=(ge=>{if(!ge)return ge;const Re=ge.characters&&typeof ge.characters=="object"?ge.characters:{},ke={};Object.keys(Re).forEach(Rt=>{const $t=ee(Rt),gt=Re[Rt]||{},Ut={...gt,image:typeof gt.image=="string"?gt.image.replace(Rt,$t):gt.image};if(!ke[$t])ke[$t]=Ut;else{const wn=ke[$t],ir=Array.from(new Set([...wn.tagIds||[],...Ut.tagIds||[]].filter(Boolean)));ke[$t]={...wn,name:wn.name||Ut.name,notes:wn.notes||Ut.notes,image:wn.image||Ut.image,avatarPosition:wn.avatarPosition||Ut.avatarPosition,tagIds:ir}}});const mt=(ge.relationships||[]).map(Rt=>({...Rt,source:ee(Rt.source),target:ee(Rt.target)})),tt=(ge.characterImages||[]).map(Rt=>{const $t=ee(Rt.characterId);let gt=Rt.imageDataUrl;return typeof gt=="string"&&(gt=gt.replace("c8a2b1d3e4f5","1a4889cddbd5").replace("8f7c3e9a2b1d","5b0ba53871bb").replace("e4a5d8f9b2c3","c5c6abfed105")),{...Rt,characterId:$t,imageDataUrl:gt}});return{...ge,characters:ke,relationships:mt,characterImages:tt}})(ue);const Ge=localStorage.getItem("characterMapData");let Pe=[],Le=[];if(Ge){const ge=JSON.parse(Ge);Pe=ge.characters||[],Le=ge.tagCategories||[]}if(Pe.length>0){const ge=new Map;for(const Re of Pe){const ke=ee(Re.id),mt={...Re,id:ke},tt=ge.get(ke);ge.set(ke,tt?ae(tt,mt):mt)}Pe=Array.from(ge.values())}ue.deletedRelationshipIds&&ce(new Set(ue.deletedRelationshipIds));const Xe=new Set(ue.deletedImageIds||[]);R(Xe);const Ie=(Z.characters||[]).map(ge=>{var mt;const Re=Pe.find(tt=>tt.id===ge.id),ke=((mt=ue.characters)==null?void 0:mt[ge.id])||{};return{...ge,image:ke.image||(Re==null?void 0:Re.image)||ge.image,tagIds:ke.tagIds||(Re!=null&&Re.tagIds&&Re.tagIds.length>0?Re.tagIds:ge.tagIds),avatarPosition:ke.avatarPosition||(Re==null?void 0:Re.avatarPosition)||ge.avatarPosition}});if(ue.characters){const ge=new Set((Z.characters||[]).map(Re=>Re.id));Object.keys(ue.characters).forEach(Re=>{ge.has(Re)})}const ut=new Set(Ie.map(ge=>ge.id));Pe.forEach(ge=>{const Re=ee(ge.id);if(ut.has(Re)){const mt=Ie.findIndex(tt=>tt.id===Re);mt>=0&&(Ie[mt]=ae(Ie[mt],{...ge,id:Re}));return}const ke=Ie.findIndex(mt=>mt.name===ge.name);if(ke>=0){Ie[ke]=ae(Ie[ke],{...ge,id:Ie[ke].id});return}Ie.push({...ge,id:Re}),ut.add(Re)}),ue.characters&&Object.keys(ue.characters).forEach(ge=>{const Re=ee(ge),ke=ue.characters[ge];if(ut.has(Re)){const tt=Ie.findIndex(Rt=>Rt.id===Re);tt>=0&&(Ie[tt]=ae(Ie[tt],{id:Re,name:ke.name||Ie[tt].name,notes:ke.notes||Ie[tt].notes||"",tagIds:ke.tagIds||[],image:ke.image,avatarPosition:ke.avatarPosition}));return}const mt=ke.name;if(mt){const tt=Ie.findIndex(Rt=>Rt.name===mt);if(tt>=0){Ie[tt]=ae(Ie[tt],{id:Ie[tt].id,name:mt,notes:ke.notes||Ie[tt].notes||"",tagIds:ke.tagIds||[],image:ke.image,avatarPosition:ke.avatarPosition});return}}ut.has(Re)||(Ie.push({id:Re,name:ke.name||"",notes:ke.notes||"",tagIds:ke.tagIds||[],image:ke.image,avatarPosition:ke.avatarPosition}),ut.add(Re))}),e(Ie);const Jt=ue.relationships||[],Yi=Z.relationships||[],yn=new Set(ue.deletedRelationshipIds||[]),jo=new Map(Jt.map(ge=>[ge.id,ge])),el=new Set(Jt.map(ge=>`${ge.source}-${ge.target}-${ge.label}`)),ri=[...Jt];Yi.forEach(ge=>{const Re=`${ge.source}-${ge.target}-${ge.label}`;!jo.has(ge.id)&&!el.has(Re)&&!yn.has(ge.id)&&ri.push(ge)}),l(ri);const tl=Z.characterImages||[],No=ue.characterImages||[],nr=new Map;tl.forEach(ge=>{Xe.has(ge.id)||nr.set(ge.id,ge)}),No.forEach(ge=>{Xe.has(ge.id)||nr.set(ge.id,ge)});let Ji=Array.from(nr.values());const si=new Map;Ji.forEach(ge=>{const Re=ge.imageDataUrl;if(si.has(Re)){const ke=si.get(Re),mt=ke.tagIds&&ke.tagIds.length>0||ke.notes,tt=ge.tagIds&&ge.tagIds.length>0||ge.notes;(tt&&!mt||!mt&&!tt)&&si.set(Re,ge)}else si.set(Re,ge)}),Ji=Array.from(si.values()),ue.characterImages&&Z.characterImages&&(Ji=Ji.map(ge=>{if(ge.imageDataUrl.match(/[()\s]/)){const Re=Z.characterImages.find(ke=>ke.characterId===ge.characterId&&!ke.imageDataUrl.match(/[()\s]/));if(Re)return{...ge,imageDataUrl:Re.imageDataUrl}}return ge})),d(Ji);const Ki=ue.tagCategories||[];let nl=[];Ki.length>0?(nl=Ki,console.log(" Using TAG categories from user_data.json")):Le.length>0?(nl=Le,console.log(" Using TAG categories from localStorage")):(nl=Z.tagCategories||[],console.log(" Using TAG categories from cr_data.json"));const Es=nl.map(ge=>({...ge,tags:ge.tags.map(Re=>({...Re,color:ge.color})),selectionMode:ge.selectionMode||(ge.name===""?"single":"multiple")}));a(Es)}catch(Ne){console.error("Failed to load data:",Ne);const we=o4();e(we.characters),l(we.relationships),a(we.tagCategories),d(we.characterImages)}})()},[]),Q.useEffect(()=>{const Ne=setTimeout(async()=>{try{de("saving"),O(null);const we={characters:t,relationships:i,tagCategories:s,characterImages:c};localStorage.setItem("characterMapData",JSON.stringify(we));const nt={characters:t.reduce((ue,Se)=>((Se.image||Se.avatarPosition||Se.tagIds&&Se.tagIds.length>0||Se.name!=="")&&(ue[Se.id]={name:Se.name,notes:Se.notes,image:Se.image,avatarPosition:Se.avatarPosition,tagIds:Se.tagIds}),ue),{}),relationships:i,tagCategories:s,characterImages:c,deletedRelationshipIds:Array.from(oe),deletedImageIds:Array.from(he)};if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"){const Se=[`${te()}/api/save-metadata`,"/api/save-metadata"].filter((Le,Xe,Ie)=>Ie.indexOf(Le)===Xe);let Ge=!1,Pe=null;for(const Le of Se)try{const Xe=await fetch(Le,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)});if(!Xe.ok){Pe=new Error(`Save API failed: ${Le} (${Xe.status})`);continue}const Ie=await Xe.json().catch(()=>({}));if(Ie&&Ie.success===!1){Pe=new Error(Ie.error||"Save API returned success=false");continue}Ge=!0;break}catch(Xe){Pe=Xe}if(!Ge)throw Pe||new Error("Save failed: no API endpoint available");de("saved"),ie(Date.now())}else console.log(" "),de("readonly")}catch(we){if(console.error("Failed to save data",we),de("error"),O((we==null?void 0:we.message)||String(we)),we.name==="QuotaExceededError"||we.code===22){const nt=Date.now();(nt-window.lastQuotaAlert>5e3||!window.lastQuotaAlert)&&(alert(` 

 (user_data.json)
`),window.lastQuotaAlert=nt)}}},1e3);return()=>clearTimeout(Ne)},[t,i,s,c,oe,he]);const xe=Q.useMemo(()=>s.flatMap(ve=>ve.tags.map(Ne=>({...Ne,color:ve.color}))),[s]),re=async ve=>{T(!0),_(null);try{let Ne;F==="gemini"?Ne=await gb(ve):Ne=await vb(ve,Y),e(we=>{const nt=new Set(we.map(Le=>Le.name)),Z=Ne.characters.filter(Le=>!nt.has(Le.name));if(Z.length===0&&Ne.relationships.length>0){const Le=[...we],Xe=new Map(Le.map(ut=>[ut.name,ut.id])),Ie=Ne.relationships.map(ut=>{const Jt=Xe.get(ut.source),Yi=Xe.get(ut.target);return Jt&&Yi?{id:Ue(),source:Jt,target:Yi,label:ut.label,arrowStyle:"arrow"}:null}).filter(ut=>ut!==null);return l(ut=>{const Jt=new Set(ut.map(yn=>`${yn.source}-${yn.target}-${yn.label}`)),Yi=Ie.filter(yn=>!Jt.has(`${yn.source}-${yn.target}-${yn.label}`));return[...ut,...Yi]}),we}const ue=Z.map(Le=>({id:Ue(),name:Le.name,notes:"",tagIds:[]})),Se=[...we,...ue],Ge=new Map(Se.map(Le=>[Le.name,Le.id])),Pe=Ne.relationships.map(Le=>{const Xe=Ge.get(Le.source),Ie=Ge.get(Le.target);return Xe&&Ie?{id:Ue(),source:Xe,target:Ie,label:Le.label,arrowStyle:"arrow"}:null}).filter(Le=>Le!==null);return l(Le=>{const Xe=new Set(Le.map(ut=>`${ut.source}-${ut.target}-${ut.label}`)),Ie=Pe.filter(ut=>!Xe.has(`${ut.source}-${ut.target}-${ut.label}`));return[...Le,...Ie]}),Se})}catch(Ne){_(Ne.message||"An unknown error occurred.")}finally{T(!1)}},ye=ve=>{A(ve),E(!0)},Ve=ve=>{e(Ne=>Ne.map(we=>we.id===ve.id?ve:we))},Ke=ve=>{e(Ne=>Ne.filter(we=>we.id!==ve)),l(Ne=>Ne.filter(we=>we.source!==ve&&we.target!==ve)),d(Ne=>Ne.filter(we=>we.characterId!==ve)),E(!1),A(null)},Ye=()=>{const ve={id:Ue(),name:"",notes:"",tagIds:[]};e(Ne=>[...Ne,ve]),A(ve),E(!0)},zt=({provider:ve,openaiKey:Ne})=>{P(ve),J(Ne),localStorage.setItem("aiProvider",ve),localStorage.setItem("openaiApiKey",Ne)},wt=Q.useCallback((ve,Ne)=>{let we=null;return a(nt=>{const Z=JSON.parse(JSON.stringify(nt));let ue=Z.find(Ge=>Ge.name.toLowerCase()===Ne.toLowerCase());return ue||(ue={id:Ue(),name:Ne,color:"#8b5cf6",tags:[],selectionMode:"multiple"},Z.push(ue)),ue.tags.some(Ge=>Ge.label.toLowerCase()===ve.toLowerCase())?we=ue.tags.find(Ge=>Ge.label.toLowerCase()===ve.toLowerCase())||null:(we={id:Ue(),label:ve},ue.tags.push(we)),Z}),we},[]),Gt=ve=>{D(ve),k(!0)},sn=ve=>{const Ne=c.find(we=>we.id===ve);Ne&&(d(we=>we.filter(nt=>nt.id!==ve)),R(we=>{const nt=new Set(we);return nt.add(ve),nt}),e(we=>we.map(nt=>nt.image===Ne.imageDataUrl?{...nt,image:void 0}:nt)),k(!1),D(null))},Ft=(ve,Ne)=>{const we=JSON.stringify(ve,null,2),nt="data:application/json;charset=utf-8,"+encodeURIComponent(we),Z=document.createElement("a");Z.setAttribute("href",nt),Z.setAttribute("download",Ne),Z.click()},Yt=()=>{Ft({characters:t,relationships:i,characterImages:c,deletedRelationshipIds:Array.from(oe)},"characters-and-relations.json")},jt=()=>{Ft({tagCategories:s},"tags.json")},en=ve=>{ve.characters&&ve.relationships&&ve.characterImages?(e(ve.characters),l(ve.relationships),d(ve.characterImages),ve.deletedRelationshipIds&&ce(new Set(ve.deletedRelationshipIds)),alert("")):alert("")},fn=ve=>{if(ve.tagCategories){const Ne=ve.tagCategories.map(we=>({...we,selectionMode:we.selectionMode||"multiple"}));a(Ne),alert("Tag ")}else alert("")},Fi=()=>{e([]),l([]),a([]),d([])},$n=()=>{switch(p){case"graph":return S.jsx(pD,{characters:t,relationships:i,onNodeClick:ye,tagCategories:s});case"characters":return S.jsx(IU,{characters:t,onCharacterClick:ye,allTags:xe,onProcess:re,isLoading:y,error:x,onAddNewCharacter:Ye,tagCategories:s});case"images":return S.jsx(jU,{characters:t,characterImages:c,allTags:xe,tagCategories:s,onCharacterClick:ye,onImageClick:Gt});case"search":return S.jsx(ZU,{characters:t,allTags:xe,tagCategories:s,onCharacterClick:ye});case"tags":return S.jsx(HU,{tagCategories:s,onUpdate:a});case"analytics":return S.jsx(n4,{tagCategories:s,characterImages:c,characters:t});case"settings":return S.jsx($U,{onOpenApiKeyModal:()=>H(!0),onExportCharacters:Yt,onImportCharacters:en,onExportTags:jt,onImportTags:fn,onReset:Fi});default:return S.jsx("div",{children:"View not found"})}},At=ve=>{l(Ne=>{const we=typeof ve=="function"?ve(Ne):ve,nt=new Set(we.map(ue=>ue.id)),Z=Ne.filter(ue=>!nt.has(ue.id)).map(ue=>ue.id);return Z.length>0&&setTimeout(()=>{ce(ue=>{const Se=new Set(ue);return Z.forEach(Ge=>Se.add(Ge)),Se})},0),we})};return S.jsxs("div",{className:"flex h-screen w-screen bg-gray-900 text-white font-sans",children:[S.jsx(Ab,{activeView:p,onSetActiveView:h}),S.jsx("main",{className:"flex-1 overflow-hidden",children:S.jsx(i4,{children:$n()})}),S.jsxs("div",{className:"fixed bottom-3 right-3 z-50 rounded-md border border-gray-700 bg-gray-950/80 px-3 py-2 text-xs text-gray-200 backdrop-blur",children:[j==="saving"&&S.jsx("div",{children:""}),j==="saved"&&S.jsxs("div",{children:["",q?`${new Date(q).toLocaleTimeString()}`:""]}),j==="readonly"&&S.jsx("div",{children:""}),j==="error"&&S.jsxs("div",{className:"text-red-300",children:["",L||""]}),j==="idle"&&S.jsx("div",{className:"text-gray-400",children:""})]}),w&&N&&S.jsx(KU,{isOpen:w,onClose:()=>E(!1),character:N,onSave:Ve,onDelete:Ke,tagCategories:s,allCharacters:t,allRelationships:i,onUpdateRelationships:At,characterImages:c,onUpdateCharacterImages:d,onAddTagToCategory:wt}),S.jsx(XU,{isOpen:M,onClose:()=>H(!1),onSave:zt,currentProvider:F,currentOpenaiKey:Y}),S.jsx(t4,{isOpen:U,onClose:()=>k(!1),image:I,character:I&&t.find(ve=>ve.id===I.characterId)||null,tagCategories:s,allTags:xe,onUpdateImage:d,onDeleteImage:sn,onAddTagToCategory:wt})]})},gT=document.getElementById("root");if(!gT)throw new Error("Could not find root element to mount to");const r4=z_.createRoot(gT);r4.render(S.jsx(Te.StrictMode,{children:S.jsx(l4,{})}));
